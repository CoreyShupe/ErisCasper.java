<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>TextChannelImpl.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">ErisCasper.java</a> &gt; <a href="index.source.html" class="el_package">net.dv8tion.jda.core.entities.impl</a> &gt; <span class="el_source">TextChannelImpl.java</span></div><h1>TextChannelImpl.java</h1><pre class="source lang-java linenums">/*
 *     Copyright 2015-2018 Austin Keener &amp; Michael Ritter &amp; Florian Spie√ü
 *     Copyright 2018-2018 &quot;Princess&quot; Lana Samson
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package net.dv8tion.jda.core.entities.impl;

import java.io.InputStream;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.List;
import java.util.stream.Collectors;
import net.dv8tion.jda.client.exceptions.VerificationLevelException;
import net.dv8tion.jda.core.Permission;
import net.dv8tion.jda.core.entities.*;
import net.dv8tion.jda.core.exceptions.InsufficientPermissionException;
import net.dv8tion.jda.core.requests.Request;
import net.dv8tion.jda.core.requests.Response;
import net.dv8tion.jda.core.requests.RestAction;
import net.dv8tion.jda.core.requests.Route;
import net.dv8tion.jda.core.requests.restaction.AuditableRestAction;
import net.dv8tion.jda.core.requests.restaction.ChannelAction;
import net.dv8tion.jda.core.requests.restaction.MessageAction;
import net.dv8tion.jda.core.requests.restaction.WebhookAction;
import net.dv8tion.jda.core.utils.Checks;
import net.dv8tion.jda.core.utils.MiscUtil;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

public class TextChannelImpl extends AbstractChannelImpl&lt;TextChannelImpl&gt; implements TextChannel {
  private String topic;
  private long lastMessageId;
  private boolean nsfw;

  public TextChannelImpl(long id, GuildImpl guild) {
<span class="nc" id="L49">    super(id, guild);</span>
<span class="nc" id="L50">  }</span>

  @Override
  public String getAsMention() {
<span class="nc" id="L54">    return &quot;&lt;#&quot; + id + '&gt;';</span>
  }

  @Override
  public RestAction&lt;List&lt;Webhook&gt;&gt; getWebhooks() {
<span class="nc" id="L59">    checkPermission(Permission.MANAGE_WEBHOOKS);</span>

<span class="nc" id="L61">    Route.CompiledRoute route = Route.Channels.GET_WEBHOOKS.compile(getId());</span>
<span class="nc" id="L62">    return new RestAction&lt;List&lt;Webhook&gt;&gt;(getJDA(), route) {</span>
      @Override
      protected void handleResponse(Response response, Request&lt;List&lt;Webhook&gt;&gt; request) {
<span class="nc bnc" id="L65" title="All 2 branches missed.">        if (!response.isOk()) {</span>
<span class="nc" id="L66">          request.onFailure(response);</span>
<span class="nc" id="L67">          return;</span>
        }

<span class="nc" id="L70">        JSONArray array = response.getArray();</span>
<span class="nc" id="L71">        List&lt;Webhook&gt; webhooks = new ArrayList&lt;&gt;(array.length());</span>
<span class="nc" id="L72">        EntityBuilder builder = api.getEntityBuilder();</span>

<span class="nc bnc" id="L74" title="All 2 branches missed.">        for (Object object : array) {</span>
          try {
<span class="nc" id="L76">            webhooks.add(builder.createWebhook((JSONObject) object));</span>
<span class="nc" id="L77">          } catch (JSONException | NullPointerException e) {</span>
<span class="nc" id="L78">            JDAImpl.LOG.error(&quot;Error while creating websocket from json&quot;, e);</span>
<span class="nc" id="L79">          }</span>
<span class="nc" id="L80">        }</span>

<span class="nc" id="L82">        request.onSuccess(Collections.unmodifiableList(webhooks));</span>
<span class="nc" id="L83">      }</span>
    };
  }

  @Override
  public WebhookAction createWebhook(String name) {
<span class="nc" id="L89">    Checks.notBlank(name, &quot;Webhook name&quot;);</span>
<span class="nc" id="L90">    name = name.trim();</span>
<span class="nc" id="L91">    checkPermission(Permission.MANAGE_WEBHOOKS);</span>

<span class="nc" id="L93">    Checks.check(</span>
<span class="nc bnc" id="L94" title="All 4 branches missed.">        name.length() &gt;= 2 &amp;&amp; name.length() &lt;= 100, &quot;Name must be 2-100 characters in length!&quot;);</span>

<span class="nc" id="L96">    Route.CompiledRoute route = Route.Channels.CREATE_WEBHOOK.compile(getId());</span>
<span class="nc" id="L97">    return new WebhookAction(getJDA(), route, name);</span>
  }

  @Override
  public RestAction&lt;Void&gt; deleteMessages(Collection&lt;Message&gt; messages) {
<span class="nc" id="L102">    Checks.notEmpty(messages, &quot;Messages collection&quot;);</span>

<span class="nc" id="L104">    return deleteMessagesByIds(</span>
<span class="nc" id="L105">        messages.stream().map(ISnowflake::getId).collect(Collectors.toList()));</span>
  }

  @Override
  public RestAction&lt;Void&gt; deleteMessagesByIds(Collection&lt;String&gt; messageIds) {
<span class="nc" id="L110">    checkPermission(</span>
        Permission.MESSAGE_MANAGE,
        &quot;Must have MESSAGE_MANAGE in order to bulk delete messages in this channel regardless of author.&quot;);
<span class="nc bnc" id="L113" title="All 4 branches missed.">    if (messageIds.size() &lt; 2 || messageIds.size() &gt; 100)</span>
<span class="nc" id="L114">      throw new IllegalArgumentException(</span>
          &quot;Must provide at least 2 or at most 100 messages to be deleted.&quot;);

    long twoWeeksAgo =
<span class="nc" id="L118">        ((System.currentTimeMillis() - (14 * 24 * 60 * 60 * 1000)) - MiscUtil.DISCORD_EPOCH)</span>
            &lt;&lt; MiscUtil.TIMESTAMP_OFFSET;
<span class="nc bnc" id="L120" title="All 2 branches missed.">    for (String id : messageIds) {</span>
<span class="nc" id="L121">      Checks.notEmpty(id, &quot;Message id in messageIds&quot;);</span>
<span class="nc" id="L122">      Checks.check(</span>
<span class="nc bnc" id="L123" title="All 2 branches missed.">          MiscUtil.parseSnowflake(id) &gt; twoWeeksAgo,</span>
          &quot;Message Id provided was older than 2 weeks. Id: &quot; + id);
<span class="nc" id="L125">    }</span>

<span class="nc" id="L127">    JSONObject body = new JSONObject().put(&quot;messages&quot;, messageIds);</span>
<span class="nc" id="L128">    Route.CompiledRoute route = Route.Messages.DELETE_MESSAGES.compile(getId());</span>
<span class="nc" id="L129">    return new RestAction&lt;Void&gt;(getJDA(), route, body) {</span>
      @Override
      protected void handleResponse(Response response, Request&lt;Void&gt; request) {
<span class="nc bnc" id="L132" title="All 2 branches missed.">        if (response.isOk()) request.onSuccess(null);</span>
<span class="nc" id="L133">        else request.onFailure(response);</span>
<span class="nc" id="L134">      }</span>
    };
  }

  @Override
  public AuditableRestAction&lt;Void&gt; deleteWebhookById(String id) {
<span class="nc" id="L140">    Checks.notEmpty(id, &quot;webhook id&quot;);</span>

<span class="nc bnc" id="L142" title="All 2 branches missed.">    if (!guild.getSelfMember().hasPermission(this, Permission.MANAGE_WEBHOOKS))</span>
<span class="nc" id="L143">      throw new InsufficientPermissionException(Permission.MANAGE_WEBHOOKS);</span>

<span class="nc" id="L145">    Route.CompiledRoute route = Route.Webhooks.DELETE_WEBHOOK.compile(id);</span>
<span class="nc" id="L146">    return new AuditableRestAction&lt;Void&gt;(getJDA(), route) {</span>
      @Override
      protected void handleResponse(Response response, Request&lt;Void&gt; request) {
<span class="nc bnc" id="L149" title="All 2 branches missed.">        if (response.isOk()) request.onSuccess(null);</span>
<span class="nc" id="L150">        else request.onFailure(response);</span>
<span class="nc" id="L151">      }</span>
    };
  }

  @Override
  public boolean canTalk() {
<span class="nc" id="L157">    return canTalk(guild.getSelfMember());</span>
  }

  @Override
  public boolean canTalk(Member member) {
<span class="nc bnc" id="L162" title="All 2 branches missed.">    if (!guild.equals(member.getGuild()))</span>
<span class="nc" id="L163">      throw new IllegalArgumentException(</span>
          &quot;Provided Member is not from the Guild that this TextChannel is part of.&quot;);

<span class="nc" id="L166">    return member.hasPermission(this, Permission.MESSAGE_READ, Permission.MESSAGE_WRITE);</span>
  }

  @Override
  public long getLatestMessageIdLong() {
<span class="nc" id="L171">    final long messageId = lastMessageId;</span>
<span class="nc bnc" id="L172" title="All 2 branches missed.">    if (messageId == 0) throw new IllegalStateException(&quot;No last message id found.&quot;);</span>
<span class="nc" id="L173">    return messageId;</span>
  }

  @Override
  public boolean hasLatestMessage() {
<span class="nc bnc" id="L178" title="All 2 branches missed.">    return lastMessageId != 0;</span>
  }

  @Override
  public ChannelType getType() {
<span class="nc" id="L183">    return ChannelType.TEXT;</span>
  }

  @Override
  public String getTopic() {
<span class="nc" id="L188">    return topic;</span>
  }

  @Override
  public boolean isNSFW() {
<span class="nc bnc" id="L193" title="All 6 branches missed.">    return nsfw || name.equals(&quot;nsfw&quot;) || name.startsWith(&quot;nsfw-&quot;);</span>
  }

  @Override
  public List&lt;Member&gt; getMembers() {
<span class="nc" id="L198">    return Collections.unmodifiableList(</span>
        guild
<span class="nc" id="L200">            .getMembersMap()</span>
<span class="nc" id="L201">            .valueCollection()</span>
<span class="nc" id="L202">            .stream()</span>
<span class="nc" id="L203">            .filter(m -&gt; m.hasPermission(this, Permission.MESSAGE_READ))</span>
<span class="nc" id="L204">            .collect(Collectors.toList()));</span>
  }

  @Override
  public int getPosition() {
    // We call getTextChannels instead of directly accessing the GuildImpl.getTextChannelMap because
    // getTextChannels does the sorting logic.
<span class="nc" id="L211">    List&lt;TextChannel&gt; channels = guild.getTextChannels();</span>
<span class="nc bnc" id="L212" title="All 2 branches missed.">    for (int i = 0; i &lt; channels.size(); i++) {</span>
<span class="nc bnc" id="L213" title="All 2 branches missed.">      if (channels.get(i) == this) return i;</span>
    }
<span class="nc" id="L215">    throw new AssertionError(</span>
        &quot;Somehow when determining position we never found the TextChannel in the Guild's channels? wtf?&quot;);
  }

  @Override
  public ChannelAction createCopy(Guild guild) {
<span class="nc" id="L221">    Checks.notNull(guild, &quot;Guild&quot;);</span>
<span class="nc" id="L222">    ChannelAction action =</span>
<span class="nc" id="L223">        guild.getController().createTextChannel(name).setNSFW(nsfw).setTopic(topic);</span>
<span class="nc bnc" id="L224" title="All 2 branches missed.">    if (guild.equals(getGuild())) {</span>
<span class="nc" id="L225">      Category parent = getParent();</span>
<span class="nc bnc" id="L226" title="All 2 branches missed.">      if (parent != null) action.setParent(parent);</span>
<span class="nc bnc" id="L227" title="All 2 branches missed.">      for (PermissionOverride o : overrides.valueCollection()) {</span>
<span class="nc bnc" id="L228" title="All 2 branches missed.">        if (o.isMemberOverride())</span>
<span class="nc" id="L229">          action.addPermissionOverride(o.getMember(), o.getAllowedRaw(), o.getDeniedRaw());</span>
<span class="nc" id="L230">        else action.addPermissionOverride(o.getRole(), o.getAllowedRaw(), o.getDeniedRaw());</span>
<span class="nc" id="L231">      }</span>
    }
<span class="nc" id="L233">    return action;</span>
  }

  @Override
  public MessageAction sendMessage(CharSequence text) {
<span class="nc" id="L238">    checkVerification();</span>
<span class="nc" id="L239">    checkPermission(Permission.MESSAGE_READ);</span>
<span class="nc" id="L240">    checkPermission(Permission.MESSAGE_WRITE);</span>
<span class="nc" id="L241">    return TextChannel.super.sendMessage(text);</span>
  }

  @Override
  public MessageAction sendMessage(MessageEmbed embed) {
<span class="nc" id="L246">    checkVerification();</span>
<span class="nc" id="L247">    checkPermission(Permission.MESSAGE_READ);</span>
<span class="nc" id="L248">    checkPermission(Permission.MESSAGE_WRITE);</span>
    // this is checked because you cannot send an empty message
<span class="nc" id="L250">    checkPermission(Permission.MESSAGE_EMBED_LINKS);</span>
<span class="nc" id="L251">    return TextChannel.super.sendMessage(embed);</span>
  }

  @Override
  public MessageAction sendMessage(Message msg) {
<span class="nc" id="L256">    Checks.notNull(msg, &quot;Message&quot;);</span>

<span class="nc" id="L258">    checkVerification();</span>
<span class="nc" id="L259">    checkPermission(Permission.MESSAGE_READ);</span>
<span class="nc" id="L260">    checkPermission(Permission.MESSAGE_WRITE);</span>
<span class="nc bnc" id="L261" title="All 4 branches missed.">    if (msg.getContentRaw().isEmpty() &amp;&amp; !msg.getEmbeds().isEmpty())</span>
<span class="nc" id="L262">      checkPermission(Permission.MESSAGE_EMBED_LINKS);</span>

    // Call MessageChannel's default
<span class="nc" id="L265">    return TextChannel.super.sendMessage(msg);</span>
  }

  @Override
  public MessageAction sendFile(InputStream data, String fileName, Message message) {
<span class="nc" id="L270">    checkVerification();</span>
<span class="nc" id="L271">    checkPermission(Permission.MESSAGE_READ);</span>
<span class="nc" id="L272">    checkPermission(Permission.MESSAGE_WRITE);</span>
<span class="nc" id="L273">    checkPermission(Permission.MESSAGE_ATTACH_FILES);</span>

    // Call MessageChannel's default method
<span class="nc" id="L276">    return TextChannel.super.sendFile(data, fileName, message);</span>
  }

  @Override
  public RestAction&lt;Message&gt; getMessageById(String messageId) {
<span class="nc" id="L281">    checkPermission(Permission.MESSAGE_READ);</span>
<span class="nc" id="L282">    checkPermission(Permission.MESSAGE_HISTORY);</span>

    // Call MessageChannel's default method
<span class="nc" id="L285">    return TextChannel.super.getMessageById(messageId);</span>
  }

  @Override
  public AuditableRestAction&lt;Void&gt; deleteMessageById(String messageId) {
<span class="nc" id="L290">    Checks.notEmpty(messageId, &quot;messageId&quot;);</span>
<span class="nc" id="L291">    checkPermission(Permission.MESSAGE_READ);</span>

    // Call MessageChannel's default method
<span class="nc" id="L294">    return TextChannel.super.deleteMessageById(messageId);</span>
  }

  @Override
  public RestAction&lt;Void&gt; pinMessageById(String messageId) {
<span class="nc" id="L299">    checkPermission(</span>
        Permission.MESSAGE_READ,
        &quot;You cannot pin a message in a channel you can't access. (MESSAGE_READ)&quot;);
<span class="nc" id="L302">    checkPermission(Permission.MESSAGE_MANAGE, &quot;You need MESSAGE_MANAGE to pin or unpin messages.&quot;);</span>

    // Call MessageChannel's default method
<span class="nc" id="L305">    return TextChannel.super.pinMessageById(messageId);</span>
  }

  @Override
  public RestAction&lt;Void&gt; unpinMessageById(String messageId) {
<span class="nc" id="L310">    checkPermission(</span>
        Permission.MESSAGE_READ,
        &quot;You cannot unpin a message in a channel you can't access. (MESSAGE_READ)&quot;);
<span class="nc" id="L313">    checkPermission(Permission.MESSAGE_MANAGE, &quot;You need MESSAGE_MANAGE to pin or unpin messages.&quot;);</span>

    // Call MessageChannel's default method
<span class="nc" id="L316">    return TextChannel.super.unpinMessageById(messageId);</span>
  }

  @Override
  public RestAction&lt;List&lt;Message&gt;&gt; getPinnedMessages() {
<span class="nc" id="L321">    checkPermission(</span>
        Permission.MESSAGE_READ,
        &quot;Cannot get the pinned message of a channel without MESSAGE_READ access.&quot;);

    // Call MessageChannel's default method
<span class="nc" id="L326">    return TextChannel.super.getPinnedMessages();</span>
  }

  @Override
  public RestAction&lt;Void&gt; addReactionById(String messageId, String unicode) {
<span class="nc" id="L331">    checkPermission(Permission.MESSAGE_HISTORY);</span>

    // Call MessageChannel's default method
<span class="nc" id="L334">    return TextChannel.super.addReactionById(messageId, unicode);</span>
  }

  @Override
  public RestAction&lt;Void&gt; addReactionById(String messageId, Emote emote) {
<span class="nc" id="L339">    checkPermission(Permission.MESSAGE_HISTORY);</span>

    // Call MessageChannel's default method
<span class="nc" id="L342">    return TextChannel.super.addReactionById(messageId, emote);</span>
  }

  @Override
  public RestAction&lt;Void&gt; clearReactionsById(String messageId) {
<span class="nc" id="L347">    Checks.notEmpty(messageId, &quot;Message ID&quot;);</span>

<span class="nc" id="L349">    checkPermission(Permission.MESSAGE_MANAGE);</span>
<span class="nc" id="L350">    final Route.CompiledRoute route =</span>
<span class="nc" id="L351">        Route.Messages.REMOVE_ALL_REACTIONS.compile(getId(), messageId);</span>
<span class="nc" id="L352">    return new RestAction&lt;Void&gt;(getJDA(), route) {</span>
      @Override
      protected void handleResponse(Response response, Request&lt;Void&gt; request) {
<span class="nc bnc" id="L355" title="All 2 branches missed.">        if (response.isOk()) request.onSuccess(null);</span>
<span class="nc" id="L356">        else request.onFailure(response);</span>
<span class="nc" id="L357">      }</span>
    };
  }

  @Override
  public RestAction&lt;Void&gt; removeReactionById(String messageId, String unicode, User user) {
<span class="nc" id="L363">    Checks.noWhitespace(messageId, &quot;Message ID&quot;);</span>
<span class="nc" id="L364">    Checks.noWhitespace(unicode, &quot;Unicode emoji&quot;);</span>
<span class="nc" id="L365">    Checks.notNull(user, &quot;User&quot;);</span>
<span class="nc bnc" id="L366" title="All 2 branches missed.">    if (!getJDA().getSelfUser().equals(user)) checkPermission(Permission.MESSAGE_MANAGE);</span>
<span class="nc" id="L367">    final String code = MiscUtil.encodeUTF8(unicode);</span>
    Route.CompiledRoute route;
<span class="nc bnc" id="L369" title="All 2 branches missed.">    if (user.equals(getJDA().getSelfUser()))</span>
<span class="nc" id="L370">      route = Route.Messages.REMOVE_OWN_REACTION.compile(getId(), messageId, code);</span>
<span class="nc" id="L371">    else route = Route.Messages.REMOVE_REACTION.compile(getId(), messageId, code, user.getId());</span>
<span class="nc" id="L372">    return new RestAction&lt;Void&gt;(getJDA(), route) {</span>
      @Override
      protected void handleResponse(Response response, Request&lt;Void&gt; request) {
<span class="nc bnc" id="L375" title="All 2 branches missed.">        if (!response.isOk()) request.onFailure(response);</span>
<span class="nc" id="L376">        else request.onSuccess(null);</span>
<span class="nc" id="L377">      }</span>
    };
  }

  @Override
  public MessageAction editMessageById(String messageId, CharSequence newContent) {
<span class="nc" id="L383">    checkPermission(Permission.MESSAGE_READ);</span>
<span class="nc" id="L384">    checkPermission(Permission.MESSAGE_WRITE);</span>
<span class="nc" id="L385">    return TextChannel.super.editMessageById(messageId, newContent);</span>
  }

  @Override
  public MessageAction editMessageById(String messageId, MessageEmbed newEmbed) {
<span class="nc" id="L390">    checkPermission(Permission.MESSAGE_READ);</span>
<span class="nc" id="L391">    checkPermission(Permission.MESSAGE_WRITE);</span>
<span class="nc" id="L392">    checkPermission(Permission.MESSAGE_EMBED_LINKS);</span>
<span class="nc" id="L393">    return TextChannel.super.editMessageById(messageId, newEmbed);</span>
  }

  @Override
  public MessageAction editMessageById(String id, Message newContent) {
<span class="nc" id="L398">    Checks.notNull(newContent, &quot;Message&quot;);</span>

    // checkVerification(); no verification needed to edit a message
<span class="nc" id="L401">    checkPermission(Permission.MESSAGE_READ);</span>
<span class="nc" id="L402">    checkPermission(Permission.MESSAGE_WRITE);</span>
<span class="nc bnc" id="L403" title="All 4 branches missed.">    if (newContent.getContentRaw().isEmpty() &amp;&amp; !newContent.getEmbeds().isEmpty())</span>
<span class="nc" id="L404">      checkPermission(Permission.MESSAGE_EMBED_LINKS);</span>

    // Call MessageChannel's default
<span class="nc" id="L407">    return TextChannel.super.editMessageById(id, newContent);</span>
  }

  @Override
  public String toString() {
<span class="nc" id="L412">    return &quot;TC:&quot; + getName() + '(' + id + ')';</span>
  }

  @Override
  public int compareTo(TextChannel chan) {
<span class="nc" id="L417">    Checks.notNull(chan, &quot;Other TextChannel&quot;);</span>
<span class="nc bnc" id="L418" title="All 2 branches missed.">    if (this == chan) return 0;</span>
<span class="nc" id="L419">    Checks.check(</span>
<span class="nc" id="L420">        getGuild().equals(chan.getGuild()),</span>
        &quot;Cannot compare TextChannels that aren't from the same guild!&quot;);
<span class="nc bnc" id="L422" title="All 2 branches missed.">    if (this.getPositionRaw() == chan.getPositionRaw()) return Long.compare(id, chan.getIdLong());</span>
<span class="nc" id="L423">    return Integer.compare(rawPosition, chan.getPositionRaw());</span>
  }

  // -- Setters --

  public TextChannelImpl setTopic(String topic) {
<span class="nc" id="L429">    this.topic = topic;</span>
<span class="nc" id="L430">    return this;</span>
  }

  public TextChannelImpl setLastMessageId(long id) {
<span class="nc" id="L434">    this.lastMessageId = id;</span>
<span class="nc" id="L435">    return this;</span>
  }

  public TextChannelImpl setNSFW(boolean nsfw) {
<span class="nc" id="L439">    this.nsfw = nsfw;</span>
<span class="nc" id="L440">    return this;</span>
  }

  // -- internal --

  private void checkVerification() {
<span class="nc bnc" id="L446" title="All 2 branches missed.">    if (!guild.checkVerification())</span>
<span class="nc" id="L447">      throw new VerificationLevelException(guild.getVerificationLevel());</span>
<span class="nc" id="L448">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.0.201801022044</span></div></body></html>