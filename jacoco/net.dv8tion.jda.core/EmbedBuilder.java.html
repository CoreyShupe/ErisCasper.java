<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>EmbedBuilder.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">ErisCasper.java</a> &gt; <a href="index.source.html" class="el_package">net.dv8tion.jda.core</a> &gt; <span class="el_source">EmbedBuilder.java</span></div><h1>EmbedBuilder.java</h1><pre class="source lang-java linenums">/*
 *     Copyright 2015-2018 Austin Keener &amp; Michael Ritter &amp; Florian Spie√ü
 *     Copyright 2018-2018 &quot;Princess&quot; Lana Samson
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package net.dv8tion.jda.core;

import java.awt.Color;
import java.time.*;
import java.time.temporal.TemporalAccessor;
import java.util.LinkedList;
import java.util.List;
import java.util.regex.Pattern;
import net.dv8tion.jda.core.entities.EmbedType;
import net.dv8tion.jda.core.entities.EntityBuilder;
import net.dv8tion.jda.core.entities.MessageEmbed;
import net.dv8tion.jda.core.utils.Checks;
import net.dv8tion.jda.core.utils.Helpers;

/**
 * Builder system used to build {@link net.dv8tion.jda.core.entities.MessageEmbed MessageEmbeds}.
 * &lt;br&gt;
 * A visual breakdown of an Embed and how it relates to this class is available at &lt;a
 * href=&quot;http://imgur.com/a/yOb5n&quot; target=&quot;_blank&quot;&gt;https://imgur.com/a/yOb5n&lt;/a&gt;.
 *
 * @since 3.0
 * @author John A. Grosh
 */
public class EmbedBuilder {
  public static final String ZERO_WIDTH_SPACE = &quot;\u200E&quot;;
<span class="nc" id="L42">  public static final Pattern URL_PATTERN =</span>
<span class="nc" id="L43">      Pattern.compile(&quot;\\s*(https?|attachment)://.+\\..{2,}\\s*&quot;, Pattern.CASE_INSENSITIVE);</span>

<span class="nc" id="L45">  private final List&lt;MessageEmbed.Field&gt; fields = new LinkedList&lt;&gt;();</span>
<span class="nc" id="L46">  private final StringBuilder description = new StringBuilder();</span>
  private String url, title;
  private OffsetDateTime timestamp;
  private Color color;
  private MessageEmbed.Thumbnail thumbnail;
  private MessageEmbed.AuthorInfo author;
  private MessageEmbed.Footer footer;
  private MessageEmbed.ImageInfo image;

  /**
   * Creates an EmbedBuilder to be used to creates an embed to send. &lt;br&gt;
   * Every part of an embed can be removed or cleared by providing {@code null} to the setter
   * method.
   */
<span class="nc" id="L60">  public EmbedBuilder() {}</span>

<span class="nc" id="L62">  public EmbedBuilder(EmbedBuilder builder) {</span>
<span class="nc bnc" id="L63" title="All 2 branches missed.">    if (builder != null) {</span>
<span class="nc" id="L64">      setDescription(builder.description.toString());</span>
<span class="nc" id="L65">      this.fields.addAll(builder.fields);</span>
<span class="nc" id="L66">      this.url = builder.url;</span>
<span class="nc" id="L67">      this.title = builder.title;</span>
<span class="nc" id="L68">      this.timestamp = builder.timestamp;</span>
<span class="nc" id="L69">      this.color = builder.color;</span>
<span class="nc" id="L70">      this.thumbnail = builder.thumbnail;</span>
<span class="nc" id="L71">      this.author = builder.author;</span>
<span class="nc" id="L72">      this.footer = builder.footer;</span>
<span class="nc" id="L73">      this.image = builder.image;</span>
    }
<span class="nc" id="L75">  }</span>

  /**
   * Creates an EmbedBuilder using fields in an existing embed.
   *
   * @param embed the existing embed
   */
<span class="nc" id="L82">  public EmbedBuilder(MessageEmbed embed) {</span>
<span class="nc bnc" id="L83" title="All 2 branches missed.">    if (embed != null) {</span>
<span class="nc" id="L84">      setDescription(embed.getDescription());</span>
<span class="nc" id="L85">      this.url = embed.getUrl();</span>
<span class="nc" id="L86">      this.title = embed.getTitle();</span>
<span class="nc" id="L87">      this.timestamp = embed.getTimestamp();</span>
<span class="nc" id="L88">      this.color = embed.getColor();</span>
<span class="nc" id="L89">      this.thumbnail = embed.getThumbnail();</span>
<span class="nc" id="L90">      this.author = embed.getAuthor();</span>
<span class="nc" id="L91">      this.footer = embed.getFooter();</span>
<span class="nc" id="L92">      this.image = embed.getImage();</span>
<span class="nc bnc" id="L93" title="All 2 branches missed.">      if (embed.getFields() != null) fields.addAll(embed.getFields());</span>
    }
<span class="nc" id="L95">  }</span>

  /**
   * Returns a {@link net.dv8tion.jda.core.entities.MessageEmbed MessageEmbed} that has been checked
   * as being valid for sending.
   *
   * @throws java.lang.IllegalStateException If the embed is empty. Can be checked with {@link
   *     #isEmpty()}.
   * @return the built, sendable {@link net.dv8tion.jda.core.entities.MessageEmbed}
   */
  public MessageEmbed build() {
<span class="nc bnc" id="L106" title="All 2 branches missed.">    if (isEmpty()) throw new IllegalStateException(&quot;Cannot build an empty embed!&quot;);</span>
<span class="nc bnc" id="L107" title="All 2 branches missed.">    if (description.length() &gt; MessageEmbed.TEXT_MAX_LENGTH)</span>
<span class="nc" id="L108">      throw new IllegalStateException(</span>
<span class="nc" id="L109">          String.format(</span>
              &quot;Description is longer than %d! Please limit your input!&quot;,
<span class="nc" id="L111">              MessageEmbed.TEXT_MAX_LENGTH));</span>
<span class="nc bnc" id="L112" title="All 2 branches missed.">    final String descrip = this.description.length() &lt; 1 ? null : this.description.toString();</span>

<span class="nc" id="L114">    return EntityBuilder.createMessageEmbed(</span>
        url,
        title,
        descrip,
        EmbedType.RICH,
        timestamp,
        color,
        thumbnail,
        null,
        author,
        null,
        footer,
        image,
        new LinkedList&lt;&gt;(fields));
  }

  /**
   * Resets this builder to default state. &lt;br&gt;
   * All parts will be either empty or null after this method has returned.
   *
   * @return The current EmbedBuilder with default values
   */
  public EmbedBuilder clear() {
<span class="nc" id="L137">    description.setLength(0);</span>
<span class="nc" id="L138">    fields.clear();</span>
<span class="nc" id="L139">    url = null;</span>
<span class="nc" id="L140">    title = null;</span>
<span class="nc" id="L141">    timestamp = null;</span>
<span class="nc" id="L142">    color = null;</span>
<span class="nc" id="L143">    thumbnail = null;</span>
<span class="nc" id="L144">    author = null;</span>
<span class="nc" id="L145">    footer = null;</span>
<span class="nc" id="L146">    image = null;</span>
<span class="nc" id="L147">    return this;</span>
  }

  /**
   * Checks if the given embed is empty. Empty embeds will throw an exception if built
   *
   * @return true if the embed is empty and cannot be built
   */
  public boolean isEmpty() {
<span class="nc bnc" id="L156" title="All 2 branches missed.">    return title == null</span>
<span class="nc bnc" id="L157" title="All 12 branches missed.">        &amp;&amp; description.length() == 0</span>
        &amp;&amp; timestamp == null
        // &amp;&amp; color == null color alone is not enough to send
        &amp;&amp; thumbnail == null
        &amp;&amp; author == null
        &amp;&amp; footer == null
        &amp;&amp; image == null
<span class="nc bnc" id="L164" title="All 2 branches missed.">        &amp;&amp; fields.isEmpty();</span>
  }

  /**
   * The overall length of the current EmbedBuilder in displayed characters. &lt;br&gt;
   * Represents the {@link net.dv8tion.jda.core.entities.MessageEmbed#getLength()
   * MessageEmbed.getLength()} value.
   *
   * @return length of the current builder state
   */
  public int length() {
<span class="nc" id="L175">    int length = description.length();</span>
<span class="nc" id="L176">    synchronized (fields) {</span>
<span class="nc" id="L177">      length =</span>
          fields
<span class="nc" id="L179">              .stream()</span>
<span class="nc" id="L180">              .map(f -&gt; f.getName().length() + f.getValue().length())</span>
<span class="nc" id="L181">              .reduce(length, Integer::sum);</span>
<span class="nc" id="L182">    }</span>
<span class="nc bnc" id="L183" title="All 2 branches missed.">    if (title != null) length += title.length();</span>
<span class="nc bnc" id="L184" title="All 2 branches missed.">    if (author != null) length += author.getName().length();</span>
<span class="nc bnc" id="L185" title="All 2 branches missed.">    if (footer != null) length += footer.getText().length();</span>
<span class="nc" id="L186">    return length;</span>
  }

  /**
   * Checks whether the constructed {@link net.dv8tion.jda.core.entities.MessageEmbed MessageEmbed}
   * is within the limits for the specified {@link net.dv8tion.jda.core.AccountType AccountType}
   *
   * &lt;ul&gt;
   *   &lt;li&gt;Bot: {@value MessageEmbed#EMBED_MAX_LENGTH_BOT}
   *   &lt;li&gt;Client: {@value MessageEmbed#EMBED_MAX_LENGTH_CLIENT}
   * &lt;/ul&gt;
   *
   * @param type The {@link net.dv8tion.jda.core.AccountType AccountType} to validate
   * @throws java.lang.IllegalArgumentException If provided with {@code null}
   * @return True, if the {@link #length() length} is less or equal to the specific limit
   */
  public boolean isValidLength(AccountType type) {
<span class="nc" id="L203">    Checks.notNull(type, &quot;AccountType&quot;);</span>
<span class="nc" id="L204">    final int length = length();</span>
<span class="nc bnc" id="L205" title="All 2 branches missed.">    switch (type) {</span>
      case BOT:
<span class="nc bnc" id="L207" title="All 2 branches missed.">        return length &lt;= MessageEmbed.EMBED_MAX_LENGTH_BOT;</span>
      case CLIENT:
      default:
<span class="nc bnc" id="L210" title="All 2 branches missed.">        return length &lt;= MessageEmbed.EMBED_MAX_LENGTH_CLIENT;</span>
    }
  }

  /**
   * Sets the Title of the embed. &lt;br&gt;
   * Overload for {@link #setTitle(String, String)} without URL parameter.
   *
   * &lt;p&gt;&lt;b&gt;&lt;a href=&quot;http://i.imgur.com/JgZtxIM.png&quot;&gt;Example&lt;/a&gt;&lt;/b&gt;
   *
   * @param title the title of the embed
   * @throws java.lang.IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If the provided {@code title} is an empty String.
   *       &lt;li&gt;If the length of {@code title} is greater than {@link
   *           net.dv8tion.jda.core.entities.MessageEmbed#TITLE_MAX_LENGTH}.
   *     &lt;/ul&gt;
   *
   * @return the builder after the title has been set
   */
  public EmbedBuilder setTitle(String title) {
<span class="nc" id="L231">    return setTitle(title, null);</span>
  }

  /**
   * Sets the Title of the embed. &lt;br&gt;
   * You can provide {@code null} as url if no url should be used.
   *
   * &lt;p&gt;&lt;b&gt;&lt;a href=&quot;http://i.imgur.com/JgZtxIM.png&quot;&gt;Example&lt;/a&gt;&lt;/b&gt;
   *
   * @param title the title of the embed
   * @param url Makes the title into a hyperlink pointed at this url.
   * @throws java.lang.IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If the provided {@code title} is an empty String.
   *       &lt;li&gt;If the length of {@code title} is greater than {@link
   *           net.dv8tion.jda.core.entities.MessageEmbed#TITLE_MAX_LENGTH}.
   *       &lt;li&gt;If the length of {@code url} is longer than {@link
   *           net.dv8tion.jda.core.entities.MessageEmbed#URL_MAX_LENGTH}.
   *       &lt;li&gt;If the provided {@code url} is not a properly formatted http or https url.
   *     &lt;/ul&gt;
   *
   * @return the builder after the title has been set
   */
  public EmbedBuilder setTitle(String title, String url) {
<span class="nc bnc" id="L255" title="All 2 branches missed.">    if (title == null) {</span>
<span class="nc" id="L256">      this.title = null;</span>
<span class="nc" id="L257">      this.url = null;</span>
    } else {
<span class="nc bnc" id="L259" title="All 2 branches missed.">      if (title.isEmpty()) throw new IllegalArgumentException(&quot;Title cannot be empty!&quot;);</span>
<span class="nc bnc" id="L260" title="All 2 branches missed.">      if (title.length() &gt; MessageEmbed.TITLE_MAX_LENGTH)</span>
<span class="nc" id="L261">        throw new IllegalArgumentException(</span>
            &quot;Title cannot be longer than &quot; + MessageEmbed.TITLE_MAX_LENGTH + &quot; characters.&quot;);
<span class="nc bnc" id="L263" title="All 2 branches missed.">      if (Helpers.isBlank(url)) url = null;</span>
<span class="nc" id="L264">      urlCheck(url);</span>

<span class="nc" id="L266">      this.title = title;</span>
<span class="nc" id="L267">      this.url = url;</span>
    }
<span class="nc" id="L269">    return this;</span>
  }

  /**
   * The {@link java.lang.StringBuilder StringBuilder} used to build the description for the embed.
   * &lt;br&gt;
   * Note: To reset the description use {@link #setDescription(CharSequence) setDescription(null)}
   *
   * @return StringBuilder with current description context
   */
  public StringBuilder getDescriptionBuilder() {
<span class="nc" id="L280">    return description;</span>
  }

  /**
   * Sets the Description of the embed. This is where the main chunk of text for an embed is
   * typically placed.
   *
   * &lt;p&gt;&lt;b&gt;&lt;a href=&quot;http://i.imgur.com/lbchtwk.png&quot;&gt;Example&lt;/a&gt;&lt;/b&gt;
   *
   * @param description the description of the embed, {@code null} to reset
   * @throws java.lang.IllegalArgumentException If the length of {@code description} is greater than
   *     {@link net.dv8tion.jda.core.entities.MessageEmbed#TEXT_MAX_LENGTH}
   * @return the builder after the description has been set
   */
  public final EmbedBuilder setDescription(CharSequence description) {
<span class="nc" id="L295">    this.description.setLength(0);</span>
<span class="nc bnc" id="L296" title="All 4 branches missed.">    if (description != null &amp;&amp; description.length() &gt;= 1) appendDescription(description);</span>
<span class="nc" id="L297">    return this;</span>
  }

  /**
   * Appends to the description of the embed. This is where the main chunk of text for an embed is
   * typically placed.
   *
   * &lt;p&gt;&lt;b&gt;&lt;a href=&quot;http://i.imgur.com/lbchtwk.png&quot;&gt;Example&lt;/a&gt;&lt;/b&gt;
   *
   * @param description the string to append to the description of the embed
   * @throws java.lang.IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If the provided {@code description} String is null
   *       &lt;li&gt;If the length of {@code description} is greater than {@link
   *           net.dv8tion.jda.core.entities.MessageEmbed#TEXT_MAX_LENGTH}.
   *     &lt;/ul&gt;
   *
   * @return the builder after the description has been set
   */
  public EmbedBuilder appendDescription(CharSequence description) {
<span class="nc" id="L317">    Checks.notNull(description, &quot;description&quot;);</span>
<span class="nc" id="L318">    Checks.check(</span>
<span class="nc bnc" id="L319" title="All 2 branches missed.">        this.description.length() + description.length() &lt;= MessageEmbed.TEXT_MAX_LENGTH,</span>
        &quot;Description cannot be longer than %d characters.&quot;,
<span class="nc" id="L321">        MessageEmbed.TEXT_MAX_LENGTH);</span>
<span class="nc" id="L322">    this.description.append(description);</span>
<span class="nc" id="L323">    return this;</span>
  }

  /**
   * Sets the Timestamp of the embed.
   *
   * &lt;p&gt;&lt;b&gt;&lt;a href=&quot;http://i.imgur.com/YP4NiER.png&quot;&gt;Example&lt;/a&gt;&lt;/b&gt;
   *
   * &lt;p&gt;&lt;b&gt;Hint:&lt;/b&gt; You can get the current time using {@link java.time.Instant#now()
   * Instant.now()} or convert time from a millisecond representation by using {@link
   * java.time.Instant#ofEpochMilli(long) Instant.ofEpochMilli(long)};
   *
   * @param temporal the temporal accessor of the timestamp
   * @return the builder after the timestamp has been set
   */
  public EmbedBuilder setTimestamp(TemporalAccessor temporal) {
<span class="nc bnc" id="L339" title="All 2 branches missed.">    if (temporal == null) {</span>
<span class="nc" id="L340">      this.timestamp = null;</span>
<span class="nc bnc" id="L341" title="All 2 branches missed.">    } else if (temporal instanceof OffsetDateTime) {</span>
<span class="nc" id="L342">      this.timestamp = (OffsetDateTime) temporal;</span>
    } else {
      ZoneOffset offset;
      try {
<span class="nc" id="L346">        offset = ZoneOffset.from(temporal);</span>
<span class="nc" id="L347">      } catch (DateTimeException ignore) {</span>
<span class="nc" id="L348">        offset = ZoneOffset.UTC;</span>
<span class="nc" id="L349">      }</span>
      try {
<span class="nc" id="L351">        LocalDateTime ldt = LocalDateTime.from(temporal);</span>
<span class="nc" id="L352">        this.timestamp = OffsetDateTime.of(ldt, offset);</span>
<span class="nc" id="L353">      } catch (DateTimeException ignore) {</span>
        try {
<span class="nc" id="L355">          Instant instant = Instant.from(temporal);</span>
<span class="nc" id="L356">          this.timestamp = OffsetDateTime.ofInstant(instant, offset);</span>
<span class="nc" id="L357">        } catch (DateTimeException ex) {</span>
<span class="nc" id="L358">          throw new DateTimeException(</span>
              &quot;Unable to obtain OffsetDateTime from TemporalAccessor: &quot;
                  + temporal
                  + &quot; of type &quot;
<span class="nc" id="L362">                  + temporal.getClass().getName(),</span>
              ex);
<span class="nc" id="L364">        }</span>
<span class="nc" id="L365">      }</span>
    }
<span class="nc" id="L367">    return this;</span>
  }

  /**
   * Sets the Color of the embed.
   *
   * &lt;p&gt;&lt;a href=&quot;http://i.imgur.com/2YnxnRM.png&quot; target=&quot;_blank&quot;&gt;Example&lt;/a&gt;
   *
   * @param color The {@link java.awt.Color Color} of the embed or {@code null} to use no color
   * @return the builder after the color has been set
   */
  public EmbedBuilder setColor(Color color) {
<span class="nc" id="L379">    this.color = color;</span>
<span class="nc" id="L380">    return this;</span>
  }

  /**
   * Sets the Thumbnail of the embed.
   *
   * &lt;p&gt;&lt;b&gt;&lt;a href=&quot;http://i.imgur.com/Zc3qwqB.png&quot;&gt;Example&lt;/a&gt;&lt;/b&gt;
   *
   * &lt;p&gt;&lt;b&gt;Uploading images with Embeds&lt;/b&gt; &lt;br&gt;
   * When uploading an &lt;u&gt;image&lt;/u&gt; (using {@link
   * net.dv8tion.jda.core.entities.MessageChannel#sendFile(java.io.File,
   * net.dv8tion.jda.core.entities.Message) MessageChannel.sendFile(...)}) you can reference said
   * image using the specified filename as URI {@code attachment://filename.ext}.
   *
   * &lt;p&gt;&lt;u&gt;Example&lt;/u&gt;
   *
   * &lt;pre&gt;&lt;code&gt;
   * MessageChannel channel; // = reference of a MessageChannel
   * MessageBuilder message = new MessageBuilder();
   * EmbedBuilder embed = new EmbedBuilder();
   * InputStream file = new URL(&quot;https://http.cat/500&quot;).openStream();
   * embed.setThumbnail(&quot;attachment://cat.png&quot;) // we specify this in sendFile as &quot;cat.png&quot;
   *      .setDescription(&quot;This is a cute cat :3&quot;);
   * message.setEmbed(embed.build());
   * channel.sendFile(file, &quot;cat.png&quot;, message.build()).queue();
   * &lt;/code&gt;&lt;/pre&gt;
   *
   * @param url the url of the thumbnail of the embed
   * @throws java.lang.IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If the length of {@code url} is longer than {@link
   *           net.dv8tion.jda.core.entities.MessageEmbed#URL_MAX_LENGTH}.
   *       &lt;li&gt;If the provided {@code url} is not a properly formatted http or https url.
   *     &lt;/ul&gt;
   *
   * @return the builder after the thumbnail has been set
   */
  public EmbedBuilder setThumbnail(String url) {
<span class="nc bnc" id="L418" title="All 2 branches missed.">    if (url == null) {</span>
<span class="nc" id="L419">      this.thumbnail = null;</span>
    } else {
<span class="nc" id="L421">      urlCheck(url);</span>
<span class="nc" id="L422">      this.thumbnail = new MessageEmbed.Thumbnail(url, null, 0, 0);</span>
    }
<span class="nc" id="L424">    return this;</span>
  }

  /**
   * Sets the Image of the embed.
   *
   * &lt;p&gt;&lt;b&gt;&lt;a href=&quot;http://i.imgur.com/2hzuHFJ.png&quot;&gt;Example&lt;/a&gt;&lt;/b&gt;
   *
   * &lt;p&gt;&lt;b&gt;Uploading images with Embeds&lt;/b&gt; &lt;br&gt;
   * When uploading an &lt;u&gt;image&lt;/u&gt; (using {@link
   * net.dv8tion.jda.core.entities.MessageChannel#sendFile(java.io.File,
   * net.dv8tion.jda.core.entities.Message) MessageChannel.sendFile(...)}) you can reference said
   * image using the specified filename as URI {@code attachment://filename.ext}.
   *
   * &lt;p&gt;&lt;u&gt;Example&lt;/u&gt;
   *
   * &lt;pre&gt;&lt;code&gt;
   * MessageChannel channel; // = reference of a MessageChannel
   * MessageBuilder message = new MessageBuilder();
   * EmbedBuilder embed = new EmbedBuilder();
   * InputStream file = new URL(&quot;https://http.cat/500&quot;).openStream();
   * embed.setImage(&quot;attachment://cat.png&quot;) // we specify this in sendFile as &quot;cat.png&quot;
   *      .setDescription(&quot;This is a cute cat :3&quot;);
   * message.setEmbed(embed.build());
   * channel.sendFile(file, &quot;cat.png&quot;, message.build()).queue();
   * &lt;/code&gt;&lt;/pre&gt;
   *
   * @param url the url of the image of the embed
   * @throws java.lang.IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If the length of {@code url} is longer than {@link
   *           net.dv8tion.jda.core.entities.MessageEmbed#URL_MAX_LENGTH}.
   *       &lt;li&gt;If the provided {@code url} is not a properly formatted http or https url.
   *     &lt;/ul&gt;
   *
   * @return the builder after the image has been set
   * @see net.dv8tion.jda.core.entities.MessageChannel#sendFile(java.io.File, String,
   *     net.dv8tion.jda.core.entities.Message) MessageChannel.sendFile(...)
   */
  public EmbedBuilder setImage(String url) {
<span class="nc bnc" id="L464" title="All 2 branches missed.">    if (url == null) {</span>
<span class="nc" id="L465">      this.image = null;</span>
    } else {
<span class="nc" id="L467">      urlCheck(url);</span>
<span class="nc" id="L468">      this.image = new MessageEmbed.ImageInfo(url, null, 0, 0);</span>
    }
<span class="nc" id="L470">    return this;</span>
  }

  /**
   * Sets the Author of the embed. The author appears in the top left of the embed and can have a
   * small image beside it along with the author's name being made clickable by way of providing a
   * url. This convenience method just sets the name.
   *
   * &lt;p&gt;&lt;b&gt;&lt;a href=&quot;http://i.imgur.com/JgZtxIM.png&quot;&gt;Example&lt;/a&gt;&lt;/b&gt;
   *
   * @param name the name of the author of the embed. If this is not set, the author will not appear
   *     in the embed
   * @return the builder after the author has been set
   */
  public EmbedBuilder setAuthor(String name) {
<span class="nc" id="L485">    return setAuthor(name, null, null);</span>
  }

  /**
   * Sets the Author of the embed. The author appears in the top left of the embed and can have a
   * small image beside it along with the author's name being made clickable by way of providing a
   * url. This convenience method just sets the name and the url.
   *
   * &lt;p&gt;&lt;b&gt;&lt;a href=&quot;http://i.imgur.com/JgZtxIM.png&quot;&gt;Example&lt;/a&gt;&lt;/b&gt;
   *
   * @param name the name of the author of the embed. If this is not set, the author will not appear
   *     in the embed
   * @param url the url of the author of the embed
   * @throws java.lang.IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If the length of {@code url} is longer than {@link
   *           net.dv8tion.jda.core.entities.MessageEmbed#URL_MAX_LENGTH}.
   *       &lt;li&gt;If the provided {@code url} is not a properly formatted http or https url.
   *     &lt;/ul&gt;
   *
   * @return the builder after the author has been set
   */
  public EmbedBuilder setAuthor(String name, String url) {
<span class="nc" id="L508">    return setAuthor(name, url, null);</span>
  }

  /**
   * Sets the Author of the embed. The author appears in the top left of the embed and can have a
   * small image beside it along with the author's name being made clickable by way of providing a
   * url.
   *
   * &lt;p&gt;&lt;b&gt;&lt;a href=&quot;http://i.imgur.com/JgZtxIM.png&quot;&gt;Example&lt;/a&gt;&lt;/b&gt;
   *
   * &lt;p&gt;&lt;b&gt;Uploading images with Embeds&lt;/b&gt; &lt;br&gt;
   * When uploading an &lt;u&gt;image&lt;/u&gt; (using {@link
   * net.dv8tion.jda.core.entities.MessageChannel#sendFile(java.io.File,
   * net.dv8tion.jda.core.entities.Message) MessageChannel.sendFile(...)}) you can reference said
   * image using the specified filename as URI {@code attachment://filename.ext}.
   *
   * &lt;p&gt;&lt;u&gt;Example&lt;/u&gt;
   *
   * &lt;pre&gt;&lt;code&gt;
   * MessageChannel channel; // = reference of a MessageChannel
   * MessageBuilder message = new MessageBuilder();
   * EmbedBuilder embed = new EmbedBuilder();
   * InputStream file = new URL(&quot;https://http.cat/500&quot;).openStream();
   * embed.setAuthor(&quot;Minn&quot;, null, &quot;attachment://cat.png&quot;) // we specify this in sendFile as &quot;cat.png&quot;
   *      .setDescription(&quot;This is a cute cat :3&quot;);
   * message.setEmbed(embed.build());
   * channel.sendFile(file, &quot;cat.png&quot;, message.build()).queue();
   * &lt;/code&gt;&lt;/pre&gt;
   *
   * @param name the name of the author of the embed. If this is not set, the author will not appear
   *     in the embed
   * @param url the url of the author of the embed
   * @param iconUrl the url of the icon for the author
   * @throws java.lang.IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If the length of {@code url} is longer than {@link
   *           net.dv8tion.jda.core.entities.MessageEmbed#URL_MAX_LENGTH}.
   *       &lt;li&gt;If the provided {@code url} is not a properly formatted http or https url.
   *       &lt;li&gt;If the length of {@code iconUrl} is longer than {@link
   *           net.dv8tion.jda.core.entities.MessageEmbed#URL_MAX_LENGTH}.
   *       &lt;li&gt;If the provided {@code iconUrl} is not a properly formatted http or https url.
   *     &lt;/ul&gt;
   *
   * @return the builder after the author has been set
   */
  public EmbedBuilder setAuthor(String name, String url, String iconUrl) {
    // We only check if the name is null because its presence is what determines if the
    // the author will appear in the embed.
<span class="nc bnc" id="L556" title="All 2 branches missed.">    if (name == null) {</span>
<span class="nc" id="L557">      this.author = null;</span>
    } else {
<span class="nc" id="L559">      urlCheck(url);</span>
<span class="nc" id="L560">      urlCheck(iconUrl);</span>
<span class="nc" id="L561">      this.author = new MessageEmbed.AuthorInfo(name, url, iconUrl, null);</span>
    }
<span class="nc" id="L563">    return this;</span>
  }

  /**
   * Sets the Footer of the embed.
   *
   * &lt;p&gt;&lt;b&gt;&lt;a href=&quot;http://i.imgur.com/jdf4sbi.png&quot;&gt;Example&lt;/a&gt;&lt;/b&gt;
   *
   * &lt;p&gt;&lt;b&gt;Uploading images with Embeds&lt;/b&gt; &lt;br&gt;
   * When uploading an &lt;u&gt;image&lt;/u&gt; (using {@link
   * net.dv8tion.jda.core.entities.MessageChannel#sendFile(java.io.File,
   * net.dv8tion.jda.core.entities.Message) MessageChannel.sendFile(...)}) you can reference said
   * image using the specified filename as URI {@code attachment://filename.ext}.
   *
   * &lt;p&gt;&lt;u&gt;Example&lt;/u&gt;
   *
   * &lt;pre&gt;&lt;code&gt;
   * MessageChannel channel; // = reference of a MessageChannel
   * MessageBuilder message = new MessageBuilder();
   * EmbedBuilder embed = new EmbedBuilder();
   * InputStream file = new URL(&quot;https://http.cat/500&quot;).openStream();
   * embed.setFooter(&quot;Cool footer!&quot;, &quot;attachment://cat.png&quot;) // we specify this in sendFile as &quot;cat.png&quot;
   *      .setDescription(&quot;This is a cute cat :3&quot;);
   * message.setEmbed(embed.build());
   * channel.sendFile(file, &quot;cat.png&quot;, message.build()).queue();
   * &lt;/code&gt;&lt;/pre&gt;
   *
   * @param text the text of the footer of the embed. If this is not set, the footer will not appear
   *     in the embed.
   * @param iconUrl the url of the icon for the footer
   * @throws java.lang.IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If the length of {@code text} is longer than {@link
   *           net.dv8tion.jda.core.entities.MessageEmbed#TEXT_MAX_LENGTH}.
   *       &lt;li&gt;If the length of {@code iconUrl} is longer than {@link
   *           net.dv8tion.jda.core.entities.MessageEmbed#URL_MAX_LENGTH}.
   *       &lt;li&gt;If the provided {@code iconUrl} is not a properly formatted http or https url.
   *     &lt;/ul&gt;
   *
   * @return the builder after the footer has been set
   */
  public EmbedBuilder setFooter(String text, String iconUrl) {
    // We only check if the text is null because its presence is what determines if the
    // footer will appear in the embed.
<span class="nc bnc" id="L607" title="All 2 branches missed.">    if (text == null) {</span>
<span class="nc" id="L608">      this.footer = null;</span>
    } else {
<span class="nc bnc" id="L610" title="All 2 branches missed.">      if (text.length() &gt; MessageEmbed.TEXT_MAX_LENGTH)</span>
<span class="nc" id="L611">        throw new IllegalArgumentException(</span>
            &quot;Text cannot be longer than &quot; + MessageEmbed.TEXT_MAX_LENGTH + &quot; characters.&quot;);
<span class="nc" id="L613">      urlCheck(iconUrl);</span>
<span class="nc" id="L614">      this.footer = new MessageEmbed.Footer(text, iconUrl, null);</span>
    }
<span class="nc" id="L616">    return this;</span>
  }

  /**
   * Copies the provided Field into a new Field for this builder. &lt;br&gt;
   * For additional documentation, see {@link #addField(String, String, boolean)}
   *
   * @param field the field object to add
   * @return the builder after the field has been added
   */
  public EmbedBuilder addField(MessageEmbed.Field field) {
<span class="nc bnc" id="L627" title="All 2 branches missed.">    return field == null ? this : addField(field.getName(), field.getValue(), field.isInline());</span>
  }

  /**
   * Adds a Field to the embed.
   *
   * &lt;p&gt;Note: If a blank string is provided to either {@code name} or {@code value}, the blank
   * string is replaced with {@link net.dv8tion.jda.core.EmbedBuilder#ZERO_WIDTH_SPACE}.
   *
   * &lt;p&gt;&lt;b&gt;&lt;a href=&quot;http://i.imgur.com/gnjzCoo.png&quot;&gt;Example of Inline&lt;/a&gt;&lt;/b&gt;
   *
   * &lt;p&gt;&lt;b&gt;&lt;a href=&quot;http://i.imgur.com/Ky0KlsT.png&quot;&gt;Example if Non-inline&lt;/a&gt;&lt;/b&gt;
   *
   * @param name the name of the Field, displayed in bold above the {@code value}.
   * @param value the contents of the field.
   * @param inline whether or not this field should display inline.
   * @throws java.lang.IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If only {@code name} or {@code value} is set. Both must be set.
   *       &lt;li&gt;If the length of {@code name} is greater than {@link
   *           net.dv8tion.jda.core.entities.MessageEmbed#TITLE_MAX_LENGTH}.
   *       &lt;li&gt;If the length of {@code value} is greater than {@link
   *           net.dv8tion.jda.core.entities.MessageEmbed#VALUE_MAX_LENGTH}.
   *     &lt;/ul&gt;
   *
   * @return the builder after the field has been added
   */
  public EmbedBuilder addField(String name, String value, boolean inline) {
<span class="nc bnc" id="L655" title="All 4 branches missed.">    if (name == null &amp;&amp; value == null) return this;</span>
<span class="nc" id="L656">    this.fields.add(new MessageEmbed.Field(name, value, inline));</span>
<span class="nc" id="L657">    return this;</span>
  }

  /**
   * Adds a blank (empty) Field to the embed.
   *
   * &lt;p&gt;&lt;b&gt;&lt;a href=&quot;http://i.imgur.com/tB6tYWy.png&quot;&gt;Example of Inline&lt;/a&gt;&lt;/b&gt;
   *
   * &lt;p&gt;&lt;b&gt;&lt;a href=&quot;http://i.imgur.com/lQqgH3H.png&quot;&gt;Example of Non-inline&lt;/a&gt;&lt;/b&gt;
   *
   * @param inline whether or not this field should display inline
   * @return the builder after the field has been added
   */
  public EmbedBuilder addBlankField(boolean inline) {
<span class="nc" id="L671">    this.fields.add(new MessageEmbed.Field(ZERO_WIDTH_SPACE, ZERO_WIDTH_SPACE, inline));</span>
<span class="nc" id="L672">    return this;</span>
  }

  /**
   * Clears all fields from the embed, such as those created with the {@link
   * net.dv8tion.jda.core.EmbedBuilder#EmbedBuilder(net.dv8tion.jda.core.entities.MessageEmbed)
   * EmbedBuilder(MessageEmbed)} constructor or via the {@link
   * net.dv8tion.jda.core.EmbedBuilder#addField(net.dv8tion.jda.core.entities.MessageEmbed.Field)
   * addField} methods.
   *
   * @return the builder after the field has been added
   */
  public EmbedBuilder clearFields() {
<span class="nc" id="L685">    this.fields.clear();</span>
<span class="nc" id="L686">    return this;</span>
  }

  /**
   * &lt;b&gt;Modifiable&lt;/b&gt; list of {@link net.dv8tion.jda.core.entities.MessageEmbed MessageEmbed}
   * Fields that the builder will use for {@link #build()}. &lt;br&gt;
   * You can add/remove Fields and restructure this {@link java.util.List List} and it will then be
   * applied in the built MessageEmbed. These fields will be available again through {@link
   * net.dv8tion.jda.core.entities.MessageEmbed#getFields() MessageEmbed.getFields()}.
   *
   * @return Mutable List of {@link net.dv8tion.jda.core.entities.MessageEmbed.Field Fields}
   */
  public List&lt;MessageEmbed.Field&gt; getFields() {
<span class="nc" id="L699">    return fields;</span>
  }

  private void urlCheck(String url) {
<span class="nc bnc" id="L703" title="All 2 branches missed.">    if (url == null) return;</span>
<span class="nc bnc" id="L704" title="All 2 branches missed.">    else if (url.length() &gt; MessageEmbed.URL_MAX_LENGTH)</span>
<span class="nc" id="L705">      throw new IllegalArgumentException(</span>
          &quot;URL cannot be longer than &quot; + MessageEmbed.URL_MAX_LENGTH + &quot; characters.&quot;);
<span class="nc bnc" id="L707" title="All 2 branches missed.">    else if (!URL_PATTERN.matcher(url).matches())</span>
<span class="nc" id="L708">      throw new IllegalArgumentException(&quot;URL must be a valid http or https url.&quot;);</span>
<span class="nc" id="L709">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.0.201801022044</span></div></body></html>