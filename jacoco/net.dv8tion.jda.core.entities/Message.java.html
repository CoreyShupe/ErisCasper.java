<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Message.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">ErisCasper.java</a> &gt; <a href="index.source.html" class="el_package">net.dv8tion.jda.core.entities</a> &gt; <span class="el_source">Message.java</span></div><h1>Message.java</h1><pre class="source lang-java linenums">/*
 *     Copyright 2015-2018 Austin Keener &amp; Michael Ritter &amp; Florian Spie√ü
 *     Copyright 2018-2018 &quot;Princess&quot; Lana Samson
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package net.dv8tion.jda.core.entities;

import com.google.common.io.ByteStreams;
import java.io.ByteArrayInputStream;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.time.OffsetDateTime;
import java.util.Formattable;
import java.util.List;
import java.util.concurrent.atomic.AtomicReference;
import java.util.regex.Pattern;
import net.dv8tion.jda.client.entities.Group;
import net.dv8tion.jda.core.JDA;
import net.dv8tion.jda.core.entities.impl.JDAImpl;
import net.dv8tion.jda.core.requests.Requester;
import net.dv8tion.jda.core.requests.RestAction;
import net.dv8tion.jda.core.requests.restaction.AuditableRestAction;
import net.dv8tion.jda.core.requests.restaction.MessageAction;
import net.dv8tion.jda.core.utils.Checks;
import net.dv8tion.jda.core.utils.IOConsumer;
import okhttp3.OkHttpClient;
import okhttp3.Request;
import okhttp3.Response;

/**
 * Represents a Text message received from Discord. &lt;br&gt;
 * This represents messages received from {@link net.dv8tion.jda.core.entities.MessageChannel
 * MessageChannels}.
 *
 * &lt;p&gt;&lt;b&gt;This type is not updated. JDA does not keep track of changes to messages, it is advised to
 * do this via events such as {@link net.dv8tion.jda.core.events.message.MessageUpdateEvent
 * MessageUpdateEvent} and similar.&lt;/b&gt;
 *
 * &lt;h2&gt;Message Differences&lt;/h2&gt;
 *
 * There are 3 implementations of this interface in JDA.
 *
 * &lt;ol&gt;
 *   &lt;li&gt;&lt;b&gt;Received Message&lt;/b&gt; &lt;br&gt;
 *       Messages received through events or history query. These messages hold information of
 *       &lt;b&gt;existing&lt;/b&gt; messages and can be modified or deleted.
 *   &lt;li&gt;&lt;b&gt;System Message&lt;/b&gt; &lt;br&gt;
 *       Specification of &lt;b&gt;Received Messages&lt;/b&gt; that are generated by Discord on certain events.
 *       Commonly this is used in groups or to indicate a pin within a MessageChannel. The different
 *       types can be found in the {@link net.dv8tion.jda.core.entities.MessageType MessageType}
 *       enum.
 *   &lt;li&gt;&lt;b&gt;Data Message&lt;/b&gt; &lt;br&gt;
 *       This type is produced by {@link net.dv8tion.jda.core.MessageBuilder MessageBuilder} and
 *       only holds sendable information such as content or nonce. These messages do not allow any
 *       modifications via RestActions or information that is generated when sent such as the id to
 *       be used.
 * &lt;/ol&gt;
 *
 * &lt;p&gt;When a feature is not available it will throw an {@link
 * java.lang.UnsupportedOperationException UnsupportedOperationException} as per interface
 * specifications. &lt;br&gt;
 * Specific operations may have specified information available in the {@code throws} javadoc.
 *
 * &lt;h1&gt;Formattable&lt;/h1&gt;
 *
 * This interface extends {@link java.util.Formattable Formattable} and can be used with a {@link
 * java.util.Formatter Formatter} such as used by {@link String#format(String, Object...)
 * String.format(String, Object...)} or {@link java.io.PrintStream#printf(String, Object...)
 * PrintStream.printf(String, Object...)}.
 *
 * &lt;p&gt;This will use {@link #getContentDisplay()} rather than {@link Object#toString()}! &lt;br&gt;
 * Supported Features:
 *
 * &lt;ul&gt;
 *   &lt;li&gt;&lt;b&gt;Alternative&lt;/b&gt; &lt;br&gt;
 *       - Using {@link #getContentRaw()} (Example: {@code %#s} - uses {@link #getContentDisplay()})
 *   &lt;li&gt;&lt;b&gt;Width/Left-Justification&lt;/b&gt; &lt;br&gt;
 *       - Ensures the size of a format (Example: {@code %20s} - uses at minimum 20 chars; {@code
 *       %-10s} - uses left-justified padding)
 *   &lt;li&gt;&lt;b&gt;Precision&lt;/b&gt; &lt;br&gt;
 *       - Cuts the content to the specified size (replacing last 3 chars with {@code ...}; Example:
 *       {@code %.20s})
 * &lt;/ul&gt;
 *
 * &lt;p&gt;More information on formatting syntax can be found in the {@link java.util.Formatter format
 * syntax documentation}!
 */
public interface Message extends ISnowflake, Formattable {
  /**
   * The maximum sendable file size (8 MiB)
   *
   * @see net.dv8tion.jda.core.requests.restaction.MessageAction#addFile(java.io.File)
   *     MessageAction.addFile(...)
   */
  int MAX_FILE_SIZE = 8 &lt;&lt; 20;

  /**
   * The maximum sendable file size for nitro (50 MiB)
   *
   * @see net.dv8tion.jda.core.requests.restaction.MessageAction#addFile(java.io.File)
   *     MessageAction.addFile(...)
   */
  int MAX_FILE_SIZE_NITRO = 50 &lt;&lt; 20;

  /**
   * The maximum amount of files sendable within a single message ({@value})
   *
   * @see net.dv8tion.jda.core.requests.restaction.MessageAction#addFile(java.io.File)
   *     MessageAction.addFile(...)
   */
  int MAX_FILE_AMOUNT = 10;

  /**
   * The maximum amount of characters sendable in one message. ({@value}) &lt;br&gt;
   * This only applies to the raw content and not embeds!
   *
   * @see net.dv8tion.jda.core.requests.restaction.MessageAction#append(CharSequence)
   *     MessageAction.append(...)
   */
  int MAX_CONTENT_LENGTH = 2000;

  /**
   * Pattern used to find instant invites in messages.
   *
   * @see #getInvites() getInvites()
   */
<span class="nc" id="L141">  Pattern INVITE_PATTERN =</span>
<span class="nc" id="L142">      Pattern.compile(</span>
          &quot;(?:https?://)?discord(?:app\\.com/invite|\\.gg)/(\\S+)&quot;, Pattern.CASE_INSENSITIVE);

  /**
   * An immutable list of all mentioned {@link net.dv8tion.jda.core.entities.User Users}. &lt;br&gt;
   * If no user was mentioned, this list is empty.
   *
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @return immutable list of mentioned users
   */
  List&lt;User&gt; getMentionedUsers();

  /**
   * A immutable list of all mentioned {@link net.dv8tion.jda.core.entities.TextChannel
   * TextChannels}. &lt;br&gt;
   * If none were mentioned, this list is empty.
   *
   * &lt;p&gt;&lt;b&gt;This may include TextChannels from other {@link net.dv8tion.jda.core.entities.Guild
   * Guilds}&lt;/b&gt;
   *
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @return immutable list of mentioned TextChannels
   */
  List&lt;TextChannel&gt; getMentionedChannels();

  /**
   * A immutable list of all mentioned {@link net.dv8tion.jda.core.entities.Role Roles}. &lt;br&gt;
   * If none were mentioned, this list is empty.
   *
   * &lt;p&gt;&lt;b&gt;This may include Roles from other {@link net.dv8tion.jda.core.entities.Guild Guilds}&lt;/b&gt;
   *
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @return immutable list of mentioned Roles
   */
  List&lt;Role&gt; getMentionedRoles();

  /**
   * Creates an immutable list of {@link net.dv8tion.jda.core.entities.Member Members} representing
   * the users of {@link #getMentionedUsers()} in the specified {@link
   * net.dv8tion.jda.core.entities.Guild Guild}. &lt;br&gt;
   * This is only a convenience method and will skip all users that are not in the specified Guild.
   *
   * @param guild Non-null {@link net.dv8tion.jda.core.entities.Guild Guild} that will be used to
   *     retrieve Members.
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @throws java.lang.IllegalArgumentException If the specified Guild is {@code null}
   * @return Immutable list of mentioned Members
   * @since 3.4.0
   */
  List&lt;Member&gt; getMentionedMembers(Guild guild);

  /**
   * Creates an immutable list of {@link net.dv8tion.jda.core.entities.Member Members} representing
   * the users of {@link #getMentionedUsers()} in the {@link net.dv8tion.jda.core.entities.Guild
   * Guild} this Message was sent in. &lt;br&gt;
   * This is only a convenience method and will skip all users that are not in the specified Guild.
   * &lt;br&gt;
   * It will provide the {@link #getGuild()} output Guild to {@link #getMentionedMembers(Guild)}.
   *
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @throws java.lang.IllegalStateException If this message was not sent in a {@link
   *     net.dv8tion.jda.core.entities.TextChannel TextChannel}
   * @return Immutable list of mentioned Members
   * @since 3.4.0
   */
  List&lt;Member&gt; getMentionedMembers();

  /**
   * Combines all instances of {@link net.dv8tion.jda.core.entities.IMentionable IMentionable}
   * filtered by the specified {@link net.dv8tion.jda.core.entities.Message.MentionType MentionType}
   * values. &lt;br&gt;
   * This does not include {@link #getMentionedMembers()} to avoid duplicates.
   *
   * &lt;p&gt;If no MentionType values are given this will fallback to all types.
   *
   * @param types Amount of {@link net.dv8tion.jda.core.entities.Message.MentionType MentionTypes}
   *     to include in the list of mentions
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @throws java.lang.IllegalArgumentException If provided with {@code null}
   * @return Immutable list of filtered {@link net.dv8tion.jda.core.entities.IMentionable
   *     IMentionable} instances
   * @since 3.4.0
   */
  List&lt;IMentionable&gt; getMentions(MentionType... types);

  /**
   * Checks if given {@link net.dv8tion.jda.core.entities.IMentionable IMentionable} was mentioned
   * in this message in any way (@User, @everyone, @here, @Role). &lt;br&gt;
   * If no filtering {@link net.dv8tion.jda.core.entities.Message.MentionType MentionTypes} are
   * specified this will fallback to all mention types.
   *
   * &lt;p&gt;{@link Message.MentionType#HERE MentionType.HERE} and {@link Message.MentionType#EVERYONE
   * MentionType.EVERYONE} will only be checked, if the given {@link
   * net.dv8tion.jda.core.entities.IMentionable IMentionable} is of type {@link
   * net.dv8tion.jda.core.entities.User User} or {@link net.dv8tion.jda.core.entities.Member
   * Member}. &lt;br&gt;
   * Online status of Users/Members is &lt;b&gt;NOT&lt;/b&gt; considered when checking {@link
   * Message.MentionType#HERE MentionType.HERE}.
   *
   * @param mentionable The mentionable entity to check on.
   * @param types The types to include when checking whether this type was mentioned. This will be
   *     used with {@link #getMentions(Message.MentionType...) getMentions(MentionType...)}
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @return True, if the given mentionable was mentioned in this message
   */
  boolean isMentioned(IMentionable mentionable, MentionType... types);

  /**
   * Indicates if this Message mentions everyone using @everyone or @here.
   *
   * @return True, if message is mentioning everyone
   */
  boolean mentionsEveryone();

  /**
   * Returns whether or not this Message has been edited before.
   *
   * @return True if this message has been edited.
   */
  boolean isEdited();

  /**
   * Provides the {@link java.time.OffsetDateTime OffsetDateTime} defining when this Message was
   * last edited. If this Message has not been edited ({@link #isEdited()} is {@code false}), then
   * this method will return {@code null}.
   *
   * @return Time of the most recent edit, or {@code null} if the Message has never been edited.
   */
  OffsetDateTime getEditedTime();

  /**
   * The author of this Message
   *
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @return Message author
   */
  User getAuthor();

  /**
   * Returns the author of this Message as a {@link net.dv8tion.jda.core.entities.Member member}.
   * &lt;br&gt;
   * This is just a shortcut to {@link #getGuild()}{@link
   * net.dv8tion.jda.core.entities.Guild#getMember(User) .getMember(getAuthor())}. &lt;br&gt;
   * &lt;b&gt;This is only valid if the Message was actually sent in a TextChannel.&lt;/b&gt; This will return
   * {@code null} if it was not sent from a TextChannel. &lt;br&gt;
   * You can check the type of channel this message was sent from using {@link
   * #isFromType(ChannelType)} or {@link #getChannelType()}.
   *
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @return Message author, or {@code null} if the message was not sent from a TextChannel.
   */
  Member getMember();

  /**
   * The textual content of this message in the format that would be shown to the Discord client.
   * All {@link net.dv8tion.jda.core.entities.IMentionable IMentionable} entities will be resolved
   * to the format shown by the Discord client instead of the {@literal &lt;id&gt;} format.
   *
   * &lt;p&gt;This includes resolving: &lt;br&gt;
   * {@link net.dv8tion.jda.core.entities.User Users} / {@link net.dv8tion.jda.core.entities.Member
   * Members} to their @Username/@Nickname format, &lt;br&gt;
   * {@link net.dv8tion.jda.core.entities.TextChannel TextChannels} to their #ChannelName format,
   * &lt;br&gt;
   * {@link net.dv8tion.jda.core.entities.Role Roles} to their @RoleName format &lt;br&gt;
   * {@link net.dv8tion.jda.core.entities.Emote Emotes} (not emojis!) to their {@code :name:}
   * format.
   *
   * &lt;p&gt;If you want the actual Content (mentions as {@literal &lt;@id&gt;}), use {@link #getContentRaw()}
   * instead
   *
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @return The textual content of the message with mentions resolved to be visually like the
   *     Discord client.
   */
  String getContentDisplay();

  /**
   * The raw textual content of this message. Does not resolve {@link
   * net.dv8tion.jda.core.entities.IMentionable IMentionable} entities like {@link
   * #getContentDisplay()} does. This means that this is the completely raw textual content of the
   * message received from Discord and can contain mentions specified by &lt;a
   * href=&quot;https://discordapp.com/developers/docs/resources/channel#message-formatting&quot;
   * target=&quot;_blank&quot;&gt;Discord's Message Formatting&lt;/a&gt;.
   *
   * @return The raw textual content of the message, containing unresolved Discord message
   *     formatting.
   */
  String getContentRaw();

  /**
   * Gets the textual content of this message using {@link #getContentDisplay()} and then strips it
   * of all markdown characters like {@literal *, **, __, ~~} that provide text formatting. Any
   * characters that match these but are not being used for formatting are escaped to prevent
   * possible formatting.
   *
   * @return The textual content from {@link #getContentDisplay()} with all text formatting
   *     characters removed or escaped.
   */
  String getContentStripped();

  /**
   * Creates an immutable List of {@link net.dv8tion.jda.core.entities.Invite Invite} codes that are
   * included in this Message. &lt;br&gt;
   * This will use the {@link java.util.regex.Pattern Pattern} provided under {@link
   * #INVITE_PATTERN} to construct a {@link java.util.regex.Matcher Matcher} that will parse the
   * {@link #getContentRaw()} output and include all codes it finds in a list.
   *
   * &lt;p&gt;You can use the codes to retrieve/validate invites via {@link
   * net.dv8tion.jda.core.entities.Invite#resolve(JDA, String) Invite.resolve(JDA, String)}
   *
   * @return Immutable list of invite codes
   */
  List&lt;String&gt; getInvites();

  /**
   * Validation &lt;a href=&quot;https://en.wikipedia.org/wiki/Cryptographic_nonce&quot; target=&quot;_blank&quot;
   * &gt;nonce&lt;/a&gt; for this Message &lt;br&gt;
   * This can be used to validate that a Message was properly sent to the Discord Service. &lt;br&gt;
   * To set a nonce before sending you may use {@link
   * net.dv8tion.jda.core.MessageBuilder#setNonce(String) MessageBuilder.setNonce(String)}!
   *
   * @return The validation nonce
   * @since 3.4.0
   * @see net.dv8tion.jda.core.MessageBuilder#setNonce(String)
   * @see &lt;a href=&quot;https://en.wikipedia.org/wiki/Cryptographic_nonce&quot; target=&quot;_blank&quot;&gt;Cryptographic
   *     Nonce - Wikipedia&lt;/a&gt;
   */
  String getNonce();

  /**
   * Used to determine if this Message was received from a {@link
   * net.dv8tion.jda.core.entities.MessageChannel MessageChannel} of the {@link
   * net.dv8tion.jda.core.entities.ChannelType ChannelType} specified. &lt;br&gt;
   * This will always be false for {@link net.dv8tion.jda.core.entities.ChannelType#VOICE} as
   * Messages can't be sent to {@link net.dv8tion.jda.core.entities.VoiceChannel VoiceChannels}.
   *
   * &lt;p&gt;Useful for restricting functionality to a certain type of channels.
   *
   * @param type The {@link net.dv8tion.jda.core.entities.ChannelType ChannelType} to check against.
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @return True if the {@link net.dv8tion.jda.core.entities.ChannelType ChannelType} which this
   *     message was received from is the same as the one specified by {@code type}.
   */
  boolean isFromType(ChannelType type);

  /**
   * Gets the {@link net.dv8tion.jda.core.entities.ChannelType ChannelType} that this message was
   * received from. &lt;br&gt;
   * This will never be {@link net.dv8tion.jda.core.entities.ChannelType#VOICE} as Messages can't be
   * sent to {@link net.dv8tion.jda.core.entities.VoiceChannel VoiceChannels}.
   *
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @return The ChannelType which this message was received from.
   */
  ChannelType getChannelType();

  /**
   * Indicates if this Message was sent by a {@link net.dv8tion.jda.core.entities.Webhook Webhook}
   * instead of a {@link net.dv8tion.jda.core.entities.User User}. &lt;br&gt;
   * Useful if you want to ignore non-users.
   *
   * @return True if this message was sent by a {@link net.dv8tion.jda.core.entities.Webhook
   *     Webhook}.
   */
  boolean isWebhookMessage();

  /**
   * Returns the {@link net.dv8tion.jda.core.entities.MessageChannel MessageChannel} that this
   * message was sent in.
   *
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @return The MessageChannel of this Message
   */
  MessageChannel getChannel();

  /**
   * Returns the {@link net.dv8tion.jda.core.entities.PrivateChannel PrivateChannel} that this
   * message was sent in. &lt;br&gt;
   * &lt;b&gt;This is only valid if the Message was actually sent in a PrivateChannel.&lt;/b&gt; This will
   * return {@code null} if it was not sent from a PrivateChannel. &lt;br&gt;
   * You can check the type of channel this message was sent from using {@link
   * #isFromType(ChannelType)} or {@link #getChannelType()}.
   *
   * &lt;p&gt;Use {@link #getChannel()} for an ambiguous {@link
   * net.dv8tion.jda.core.entities.MessageChannel MessageChannel} if you do not need functionality
   * specific to {@link net.dv8tion.jda.core.entities.PrivateChannel PrivateChannel}.
   *
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @return The PrivateChannel this message was sent in, or {@code null} if it was not sent from a
   *     PrivateChannel.
   */
  PrivateChannel getPrivateChannel();

  /**
   * Returns the {@link net.dv8tion.jda.client.entities.Group Group} that this message was sent in.
   * &lt;br&gt;
   * &lt;b&gt;This is only valid if the Message was actually sent in a Group.&lt;/b&gt; This will return {@code
   * null} if it was not sent from a Group. &lt;br&gt;
   * You can check the type of channel this message was sent from using {@link
   * #isFromType(ChannelType)} or {@link #getChannelType()}.
   *
   * &lt;p&gt;Use {@link #getChannel()} for an ambiguous {@link
   * net.dv8tion.jda.core.entities.MessageChannel MessageChannel} if you do not need functionality
   * specific to {@link net.dv8tion.jda.client.entities.Group Group}.
   *
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @return The Group this message was sent in, or {@code null} if it was not sent from a Group.
   */
  Group getGroup();

  /**
   * Returns the {@link net.dv8tion.jda.core.entities.TextChannel TextChannel} that this message was
   * sent in. &lt;br&gt;
   * &lt;b&gt;This is only valid if the Message was actually sent in a TextChannel.&lt;/b&gt; This will return
   * {@code null} if it was not sent from a TextChannel. &lt;br&gt;
   * You can check the type of channel this message was sent from using {@link
   * #isFromType(ChannelType)} or {@link #getChannelType()}.
   *
   * &lt;p&gt;Use {@link #getChannel()} for an ambiguous {@link
   * net.dv8tion.jda.core.entities.MessageChannel MessageChannel} if you do not need functionality
   * specific to {@link net.dv8tion.jda.core.entities.TextChannel TextChannel}.
   *
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @return The TextChannel this message was sent in, or {@code null} if it was not sent from a
   *     TextChannel.
   */
  TextChannel getTextChannel();

  /**
   * The {@link net.dv8tion.jda.core.entities.Category Category} this message was sent in. This will
   * always be {@code null} for DMs and Groups. &lt;br&gt;
   * Equivalent to {@code getTextChannel().getParent()}.
   *
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @return {@link net.dv8tion.jda.core.entities.Category Category} for this message
   */
  Category getCategory();

  /**
   * Returns the {@link net.dv8tion.jda.core.entities.Guild Guild} that this message was sent in.
   * &lt;br&gt;
   * This is just a shortcut to {@link #getTextChannel()}{@link
   * net.dv8tion.jda.core.entities.TextChannel#getGuild() .getGuild()}. &lt;br&gt;
   * &lt;b&gt;This is only valid if the Message was actually sent in a TextChannel.&lt;/b&gt; This will return
   * {@code null} if it was not sent from a TextChannel. &lt;br&gt;
   * You can check the type of channel this message was sent from using {@link
   * #isFromType(ChannelType)} or {@link #getChannelType()}.
   *
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @return The Guild this message was sent in, or {@code null} if it was not sent from a
   *     TextChannel.
   */
  Guild getGuild();

  /**
   * An unmodifiable list of {@link net.dv8tion.jda.core.entities.Message.Attachment Attachments}
   * that are attached to this message. &lt;br&gt;
   * Most likely this will only ever be 1 {@link net.dv8tion.jda.core.entities.Message.Attachment
   * Attachment} at most.
   *
   * @return Unmodifiable list of {@link net.dv8tion.jda.core.entities.Message.Attachment
   *     Attachments}.
   */
  List&lt;Attachment&gt; getAttachments();

  /**
   * An unmodifiable list of {@link net.dv8tion.jda.core.entities.MessageEmbed MessageEmbeds} that
   * are part of this Message.
   *
   * @return Unmodifiable list of all given MessageEmbeds.
   */
  List&lt;MessageEmbed&gt; getEmbeds();

  /**
   * All {@link net.dv8tion.jda.core.entities.Emote Emotes} used in this Message. &lt;br&gt;
   * &lt;b&gt;This only includes Custom Emotes, not UTF8 Emojis.&lt;/b&gt; JDA classifies Emotes as the Custom
   * Emojis uploaded to a Guild and retrievable with {@link
   * net.dv8tion.jda.core.entities.Guild#getEmotes()}. These are not the same as the UTF8 emojis
   * that Discord also supports.
   *
   * &lt;p&gt;&lt;b&gt;This may or may not contain fake Emotes which means they can be displayed but not used by
   * the logged in account.&lt;/b&gt; To check whether an Emote is fake you can test if {@link
   * Emote#isFake()} returns true.
   *
   * &lt;p&gt;&lt;b&gt;&lt;u&gt;Unicode emojis are not included as {@link net.dv8tion.jda.core.entities.Emote
   * Emote}!&lt;/u&gt;&lt;/b&gt;
   *
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @return An immutable list of the Emotes used in this message (example match {@literal
   *     &lt;:jda:230988580904763393&gt;})
   */
  List&lt;Emote&gt; getEmotes();

  /**
   * All {@link net.dv8tion.jda.core.entities.MessageReaction MessageReactions} that are on this
   * Message.
   *
   * @return immutable list of all MessageReactions on this message.
   */
  List&lt;MessageReaction&gt; getReactions();

  /**
   * Defines whether or not this Message triggers TTS (Text-To-Speech).
   *
   * @return If this message is TTS.
   */
  boolean isTTS();

  /**
   * Edits this Message's content to the provided String. &lt;br&gt;
   * &lt;b&gt;Messages can only be edited by the account that sent them!&lt;/b&gt;.
   *
   * &lt;p&gt;This message instance will not be updated by this operation, please use the response message
   * instead.
   *
   * &lt;p&gt;The following {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} are
   * possible:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       The edit was attempted after the account lost access to the {@link
   *       net.dv8tion.jda.core.entities.Guild Guild} or {@link
   *       net.dv8tion.jda.client.entities.Group Group} typically due to being kicked or removed.
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The edit was attempted after the account lost {@link
   *       net.dv8tion.jda.core.Permission#MESSAGE_WRITE Permission.MESSAGE_WRITE} in the {@link
   *       net.dv8tion.jda.core.entities.TextChannel TextChannel}.
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MESSAGE UNKNOWN_MESSAGE} &lt;br&gt;
   *       The edit was attempted after the Message had been deleted.
   * &lt;/ul&gt;
   *
   * @param newContent the new content of the Message
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @throws java.lang.IllegalStateException If the message attempting to be edited was not created
   *     by the currently logged in account, or if {@code newContent}'s length is 0 or greater than
   *     2000.
   * @return {@link net.dv8tion.jda.core.requests.restaction.MessageAction MessageAction} &lt;br&gt;
   *     The {@link net.dv8tion.jda.core.entities.Message Message} with the updated content
   */
  MessageAction editMessage(CharSequence newContent);

  /**
   * Edits this Message's content to the provided {@link net.dv8tion.jda.core.entities.MessageEmbed
   * MessageEmbed}. &lt;br&gt;
   * &lt;b&gt;Messages can only be edited by the account that sent them!&lt;/b&gt;.
   *
   * &lt;p&gt;This message instance will not be updated by this operation, please use the response message
   * instead.
   *
   * &lt;p&gt;The following {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} are
   * possible:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       The edit was attempted after the account lost access to the {@link
   *       net.dv8tion.jda.core.entities.Guild Guild} or {@link
   *       net.dv8tion.jda.client.entities.Group Group} typically due to being kicked or removed.
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The edit was attempted after the account lost {@link
   *       net.dv8tion.jda.core.Permission#MESSAGE_WRITE Permission.MESSAGE_WRITE} in the {@link
   *       net.dv8tion.jda.core.entities.TextChannel TextChannel}.
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MESSAGE UNKNOWN_MESSAGE} &lt;br&gt;
   *       The edit was attempted after the Message had been deleted.
   * &lt;/ul&gt;
   *
   * @param newContent the new content of the Message
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @throws java.lang.IllegalStateException If the message attempting to be edited was not created
   *     by the currently logged in account, or if the passed-in embed is {@code null} or not {@link
   *     net.dv8tion.jda.core.entities.MessageEmbed#isSendable(net.dv8tion.jda.core.AccountType)
   *     sendable}
   * @return {@link net.dv8tion.jda.core.requests.restaction.MessageAction MessageAction} &lt;br&gt;
   *     The {@link net.dv8tion.jda.core.entities.Message Message} with the updated content
   */
  MessageAction editMessage(MessageEmbed newContent);

  /**
   * Edits this Message's content to the provided format. &lt;br&gt;
   * Shortcut for {@link net.dv8tion.jda.core.MessageBuilder#appendFormat(String, Object...)}. &lt;br&gt;
   * &lt;b&gt;Messages can only be edited by the account that sent them!&lt;/b&gt;.
   *
   * &lt;p&gt;This message instance will not be updated by this operation, please use the response message
   * instead.
   *
   * &lt;p&gt;The following {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} are
   * possible:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       The edit was attempted after the account lost access to the {@link
   *       net.dv8tion.jda.core.entities.Guild Guild} or {@link
   *       net.dv8tion.jda.client.entities.Group Group} typically due to being kicked or removed.
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The edit was attempted after the account lost {@link
   *       net.dv8tion.jda.core.Permission#MESSAGE_WRITE Permission.MESSAGE_WRITE} in the {@link
   *       net.dv8tion.jda.core.entities.TextChannel TextChannel}.
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MESSAGE UNKNOWN_MESSAGE} &lt;br&gt;
   *       The edit was attempted after the Message had been deleted.
   * &lt;/ul&gt;
   *
   * @param format Format String used to generate the Message's content via {@link
   *     net.dv8tion.jda.core.MessageBuilder#appendFormat(String, Object...)} specification
   * @param args The arguments to use in order to be converted in the format string
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @throws IllegalArgumentException If the provided format String is {@code null} or blank, or if
   *     the created message exceeds the 2000 character limit
   * @throws java.util.IllegalFormatException If a format string contains an illegal syntax, a
   *     format specifier that is incompatible with the given arguments, insufficient arguments
   *     given the format string, or other illegal conditions. For specification of all possible
   *     formatting errors, see the &lt;a href=&quot;../util/Formatter.html#detail&quot;&gt;Details&lt;/a&gt; section of
   *     the formatter class specification.
   * @throws IllegalStateException If the message attempting to be edited was not created by the
   *     currently logged in account
   * @return {@link net.dv8tion.jda.core.requests.restaction.MessageAction MessageAction} &lt;br&gt;
   *     The {@link net.dv8tion.jda.core.entities.Message Message} with the updated content
   */
  MessageAction editMessageFormat(String format, Object... args);

  /**
   * Edits this Message's content to the provided {@link net.dv8tion.jda.core.entities.Message
   * Message}. &lt;br&gt;
   * &lt;b&gt;Messages can only be edited by the account that sent them!&lt;/b&gt;.
   *
   * &lt;p&gt;This message instance will not be updated by this operation, please use the response message
   * instead.
   *
   * &lt;p&gt;The following {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} are
   * possible:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       The edit was attempted after the account lost access to the {@link
   *       net.dv8tion.jda.core.entities.Guild Guild} or {@link
   *       net.dv8tion.jda.client.entities.Group Group} typically due to being kicked or removed.
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The edit was attempted after the account lost {@link
   *       net.dv8tion.jda.core.Permission#MESSAGE_WRITE Permission.MESSAGE_WRITE} in the {@link
   *       net.dv8tion.jda.core.entities.TextChannel TextChannel}.
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MESSAGE UNKNOWN_MESSAGE} &lt;br&gt;
   *       The edit was attempted after the Message had been deleted.
   * &lt;/ul&gt;
   *
   * @param newContent the new content of the Message
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @throws java.lang.IllegalStateException
   *     &lt;ul&gt;
   *       &lt;li&gt;If the message attempting to be edited was not created by the currently logged in
   *           account
   *       &lt;li&gt;If the message contains a MessageEmebd that is not {@link
   *           net.dv8tion.jda.core.entities.MessageEmbed#isSendable(net.dv8tion.jda.core.AccountType)
   *           sendable}
   *     &lt;/ul&gt;
   *
   * @return {@link net.dv8tion.jda.core.requests.restaction.MessageAction MessageAction} &lt;br&gt;
   *     The {@link net.dv8tion.jda.core.entities.Message Message} with the updated content
   */
  MessageAction editMessage(Message newContent);

  /**
   * Deletes this Message from Discord. &lt;br&gt;
   * If this Message was not sent by the currently logged in account, then this will fail unless the
   * Message is from a {@link net.dv8tion.jda.core.entities.TextChannel TextChannel} and the current
   * account has {@link net.dv8tion.jda.core.Permission#MESSAGE_MANAGE Permission.MESSAGE_MANAGE} in
   * the channel.
   *
   * &lt;p&gt;The following {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} are
   * possible:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       The delete was attempted after the account lost access to the {@link
   *       net.dv8tion.jda.core.entities.TextChannel TextChannel} due to {@link
   *       net.dv8tion.jda.core.Permission#MESSAGE_READ Permission.MESSAGE_READ} being revoked, or
   *       the account lost access to the {@link net.dv8tion.jda.core.entities.Guild Guild} or
   *       {@link net.dv8tion.jda.client.entities.Group Group} typically due to being kicked or
   *       removed.
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The delete was attempted after the account lost {@link
   *       net.dv8tion.jda.core.Permission#MESSAGE_MANAGE Permission.MESSAGE_MANAGE} in the {@link
   *       net.dv8tion.jda.core.entities.TextChannel TextChannel} when deleting another Member's
   *       message or lost {@link net.dv8tion.jda.core.Permission#MESSAGE_MANAGE}.
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MESSAGE UNKNOWN_MESSAGE} The
   *       pin was attempted after the Message had been deleted.
   * &lt;/ul&gt;
   *
   * @throws java.lang.UnsupportedOperationException If this is a Data Message (output of {@link
   *     net.dv8tion.jda.core.MessageBuilder MessageBuilder})
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If this Message was not
   *     sent by the currently logged in account, the Message was sent in a {@link
   *     net.dv8tion.jda.core.entities.TextChannel TextChannel}, and the currently logged in account
   *     does not have {@link net.dv8tion.jda.core.Permission#MESSAGE_MANAGE
   *     Permission.MESSAGE_MANAGE} in the channel.
   * @throws java.lang.IllegalStateException If this Message was not sent by the currently logged in
   *     account and it was &lt;b&gt;not&lt;/b&gt; sent in a {@link net.dv8tion.jda.core.entities.TextChannel
   *     TextChannel}.
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   */
  AuditableRestAction&lt;Void&gt; delete();

  /**
   * Returns the {@link net.dv8tion.jda.core.JDA JDA} instance related to this Message.
   *
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @return the corresponding JDA instance
   */
  JDA getJDA();

  /**
   * Whether or not this Message has been pinned in its parent channel.
   *
   * @return True - if this message has been pinned.
   */
  boolean isPinned();

  /**
   * Used to add the Message to the {@link #getChannel() MessageChannel's} pinned message list. &lt;br&gt;
   * This is a shortcut method to {@link MessageChannel#pinMessageById(String)}.
   *
   * &lt;p&gt;The success or failure of this action will not affect the return of {@link #isPinned()}.
   *
   * &lt;p&gt;The following {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} are
   * possible:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       The pin request was attempted after the account lost access to the {@link
   *       net.dv8tion.jda.core.entities.TextChannel TextChannel} due to {@link
   *       net.dv8tion.jda.core.Permission#MESSAGE_READ Permission.MESSAGE_READ} being revoked, or
   *       the account lost access to the {@link net.dv8tion.jda.core.entities.Guild Guild} or
   *       {@link net.dv8tion.jda.client.entities.Group Group} typically due to being kicked or
   *       removed.
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The pin request was attempted after the account lost {@link
   *       net.dv8tion.jda.core.Permission#MESSAGE_MANAGE Permission.MESSAGE_MANAGE} in the {@link
   *       net.dv8tion.jda.core.entities.TextChannel TextChannel}.
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MESSAGE UNKNOWN_MESSAGE} The
   *       pin request was attempted after the Message had been deleted.
   * &lt;/ul&gt;
   *
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If this Message is from
   *     a {@link net.dv8tion.jda.core.entities.TextChannel TextChannel} and: &lt;br&gt;
   *     &lt;ul&gt;
   *       &lt;li&gt;Missing {@link net.dv8tion.jda.core.Permission#MESSAGE_READ Permission.MESSAGE_READ}.
   *           &lt;br&gt;
   *           The account needs access the the channel to pin a message in it.
   *       &lt;li&gt;Missing {@link net.dv8tion.jda.core.Permission#MESSAGE_MANAGE
   *           Permission.MESSAGE_MANAGE}. &lt;br&gt;
   *           Required to actually pin the Message.
   *     &lt;/ul&gt;
   *
   * @return {@link net.dv8tion.jda.core.requests.RestAction RestAction} - Type: {@link
   *     java.lang.Void}
   */
  RestAction&lt;Void&gt; pin();

  /**
   * Used to remove the Message from the {@link #getChannel() MessageChannel's} pinned message list.
   * &lt;br&gt;
   * This is a shortcut method to {@link MessageChannel#unpinMessageById(String)}.
   *
   * &lt;p&gt;The success or failure of this action will not affect the return of {@link #isPinned()}.
   *
   * &lt;p&gt;The following {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} are
   * possible:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       The unpin request was attempted after the account lost access to the {@link
   *       net.dv8tion.jda.core.entities.TextChannel TextChannel} due to {@link
   *       net.dv8tion.jda.core.Permission#MESSAGE_READ Permission.MESSAGE_READ} being revoked, or
   *       the account lost access to the {@link net.dv8tion.jda.core.entities.Guild Guild} or
   *       {@link net.dv8tion.jda.client.entities.Group Group} typically due to being kicked or
   *       removed.
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The unpin request was attempted after the account lost {@link
   *       net.dv8tion.jda.core.Permission#MESSAGE_MANAGE Permission.MESSAGE_MANAGE} in the {@link
   *       net.dv8tion.jda.core.entities.TextChannel TextChannel}.
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MESSAGE UNKNOWN_MESSAGE} The
   *       unpin request was attempted after the Message had been deleted.
   * &lt;/ul&gt;
   *
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If this Message is from
   *     a {@link net.dv8tion.jda.core.entities.TextChannel TextChannel} and: &lt;br&gt;
   *     &lt;ul&gt;
   *       &lt;li&gt;Missing {@link net.dv8tion.jda.core.Permission#MESSAGE_READ Permission.MESSAGE_READ}.
   *           &lt;br&gt;
   *           The account needs access the the channel to pin a message in it.
   *       &lt;li&gt;Missing {@link net.dv8tion.jda.core.Permission#MESSAGE_MANAGE
   *           Permission.MESSAGE_MANAGE}. &lt;br&gt;
   *           Required to actually pin the Message.
   *     &lt;/ul&gt;
   *
   * @return {@link net.dv8tion.jda.core.requests.RestAction RestAction} - Type: {@link
   *     java.lang.Void}
   */
  RestAction&lt;Void&gt; unpin();

  /**
   * Adds a reaction to this Message using an {@link net.dv8tion.jda.core.entities.Emote Emote}.
   *
   * &lt;p&gt;This message instance will not be updated by this operation.
   *
   * &lt;p&gt;Reactions are the small emoji/emotes below a message that have a counter beside them showing
   * how many users have reacted with same emoji/emote.
   *
   * &lt;p&gt;&lt;b&gt;Neither success nor failure of this request will affect this Message's {@link
   * #getReactions()} return as Message is immutable.&lt;/b&gt;
   *
   * &lt;p&gt;&lt;b&gt;&lt;u&gt;Unicode emojis are not included as {@link net.dv8tion.jda.core.entities.Emote
   * Emote}!&lt;/u&gt;&lt;/b&gt;
   *
   * &lt;p&gt;The following {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} are
   * possible:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       The reaction request was attempted after the account lost access to the {@link
   *       net.dv8tion.jda.core.entities.TextChannel TextChannel} due to {@link
   *       net.dv8tion.jda.core.Permission#MESSAGE_READ Permission.MESSAGE_READ} being revoked, or
   *       the account lost access to the {@link net.dv8tion.jda.core.entities.Guild Guild} or
   *       {@link net.dv8tion.jda.client.entities.Group Group} typically due to being kicked or
   *       removed. &lt;br&gt;
   *       Also can happen if the account lost the {@link
   *       net.dv8tion.jda.core.Permission#MESSAGE_HISTORY Permission.MESSAGE_HISTORY}
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The reaction request was attempted after the account lost {@link
   *       net.dv8tion.jda.core.Permission#MESSAGE_ADD_REACTION Permission.MESSAGE_ADD_REACTION} in
   *       the {@link net.dv8tion.jda.core.entities.TextChannel TextChannel} when adding the
   *       reaction.
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MESSAGE UNKNOWN_MESSAGE} The
   *       reaction request was attempted after the Message had been deleted.
   * &lt;/ul&gt;
   *
   * @param emote The {@link net.dv8tion.jda.core.entities.Emote Emote} to add as a reaction to this
   *     Message.
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the MessageChannel
   *     this message was sent in was a {@link net.dv8tion.jda.core.entities.TextChannel
   *     TextChannel} and the logged in account does not have
   *     &lt;ul&gt;
   *       &lt;li&gt;{@link net.dv8tion.jda.core.Permission#MESSAGE_ADD_REACTION
   *           Permission.MESSAGE_ADD_REACTION}
   *       &lt;li&gt;{@link net.dv8tion.jda.core.Permission#MESSAGE_HISTORY Permission.MESSAGE_HISTORY}
   *     &lt;/ul&gt;
   *
   * @throws java.lang.IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If the provided {@link net.dv8tion.jda.core.entities.Emote Emote} is null.
   *       &lt;li&gt;If the provided {@link net.dv8tion.jda.core.entities.Emote Emote} is fake {@link
   *           net.dv8tion.jda.core.entities.Emote#isFake() Emote.isFake()}.
   *       &lt;li&gt;If the provided {@link net.dv8tion.jda.core.entities.Emote Emote} cannot be used in
   *           the current channel. See {@link Emote#canInteract(User, MessageChannel)} or {@link
   *           Emote#canInteract(Member)} for more information.
   *     &lt;/ul&gt;
   *
   * @return {@link net.dv8tion.jda.core.requests.RestAction RestAction} - Type: {@link
   *     java.lang.Void}
   */
  RestAction&lt;Void&gt; addReaction(Emote emote);

  /**
   * Adds a reaction to this Message using a UTF8 emoji. &lt;br&gt;
   * A reference of UTF8 emojis can be found here: &lt;a
   * href=&quot;http://unicode.org/emoji/charts/full-emoji-list.html&quot; target=&quot;_blank&quot;&gt;Emoji Table&lt;/a&gt;.
   *
   * &lt;p&gt;This message instance will not be updated by this operation.
   *
   * &lt;p&gt;Reactions are the small emoji/emotes below a message that have a counter beside them showing
   * how many users have reacted with same emoji/emote.
   *
   * &lt;p&gt;&lt;b&gt;Neither success nor failure of this request will affect this Message's {@link
   * #getReactions()} return as Message is immutable.&lt;/b&gt;
   *
   * &lt;p&gt;The following {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} are
   * possible:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       The reaction request was attempted after the account lost access to the {@link
   *       net.dv8tion.jda.core.entities.TextChannel TextChannel} due to {@link
   *       net.dv8tion.jda.core.Permission#MESSAGE_READ Permission.MESSAGE_READ} being revoked, or
   *       the account lost access to the {@link net.dv8tion.jda.core.entities.Guild Guild} or
   *       {@link net.dv8tion.jda.client.entities.Group Group} typically due to being kicked or
   *       removed. &lt;br&gt;
   *       Also can happen if the account lost the {@link
   *       net.dv8tion.jda.core.Permission#MESSAGE_HISTORY Permission.MESSAGE_HISTORY}
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The reaction request was attempted after the account lost {@link
   *       net.dv8tion.jda.core.Permission#MESSAGE_ADD_REACTION Permission.MESSAGE_ADD_REACTION} in
   *       the {@link net.dv8tion.jda.core.entities.TextChannel TextChannel} when adding the
   *       reaction.
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MESSAGE UNKNOWN_MESSAGE} The
   *       reaction request was attempted after the Message had been deleted.
   * &lt;/ul&gt;
   *
   * @param unicode The UTF8 emoji to add as a reaction to this Message.
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the MessageChannel
   *     this message was sent in was a {@link net.dv8tion.jda.core.entities.TextChannel
   *     TextChannel} and the logged in account does not have
   *     &lt;ul&gt;
   *       &lt;li&gt;{@link net.dv8tion.jda.core.Permission#MESSAGE_ADD_REACTION
   *           Permission.MESSAGE_ADD_REACTION}
   *       &lt;li&gt;{@link net.dv8tion.jda.core.Permission#MESSAGE_HISTORY Permission.MESSAGE_HISTORY}
   *     &lt;/ul&gt;
   *
   * @throws java.lang.IllegalArgumentException If the provided unicode emoji is null or empty.
   * @return {@link net.dv8tion.jda.core.requests.RestAction RestAction} - Type: {@link
   *     java.lang.Void}
   */
  RestAction&lt;Void&gt; addReaction(String unicode);

  /**
   * Removes all reactions from this Message. &lt;br&gt;
   * This is useful for moderator commands that wish to remove all reactions at once from a specific
   * message.
   *
   * &lt;p&gt;&lt;b&gt;Neither success nor failure of this request will affect this Message's {@link
   * #getReactions()} return as Message is immutable.&lt;/b&gt;
   *
   * &lt;p&gt;The following {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} are
   * possible:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       The clear-reactions request was attempted after the account lost access to the {@link
   *       net.dv8tion.jda.core.entities.TextChannel TextChannel} due to {@link
   *       net.dv8tion.jda.core.Permission#MESSAGE_READ Permission.MESSAGE_READ} being revoked, or
   *       the account lost access to the {@link net.dv8tion.jda.core.entities.Guild Guild} or
   *       {@link net.dv8tion.jda.client.entities.Group Group} typically due to being kicked or
   *       removed.
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The clear-reactions request was attempted after the account lost {@link
   *       net.dv8tion.jda.core.Permission#MESSAGE_MANAGE Permission.MESSAGE_MANAGE} in the {@link
   *       net.dv8tion.jda.core.entities.TextChannel TextChannel} when adding the reaction.
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MESSAGE UNKNOWN_MESSAGE} The
   *       clear-reactions request was attempted after the Message had been deleted.
   * &lt;/ul&gt;
   *
   * @throws java.lang.UnsupportedOperationException If this is not a Received Message from {@link
   *     net.dv8tion.jda.core.entities.MessageType#DEFAULT MessageType.DEFAULT}
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the MessageChannel
   *     this message was sent in was a {@link net.dv8tion.jda.core.entities.TextChannel
   *     TextChannel} and the currently logged in account does not have {@link
   *     net.dv8tion.jda.core.Permission#MESSAGE_MANAGE Permission.MESSAGE_MANAGE} in the channel.
   * @throws java.lang.IllegalStateException If this message was &lt;b&gt;not&lt;/b&gt; sent in a {@link
   *     net.dv8tion.jda.core.entities.TextChannel TextChannel}.
   * @return {@link net.dv8tion.jda.core.requests.RestAction RestAction} - Type: {@link
   *     java.lang.Void}
   */
  RestAction&lt;Void&gt; clearReactions();

  /**
   * This specifies the {@link net.dv8tion.jda.core.entities.MessageType MessageType} of this
   * Message.
   *
   * &lt;p&gt;Messages can represent more than just simple text sent by Users, they can also be special
   * messages that inform about events occurs. A few examples are the system message informing that
   * a message has been pinned. Another would be the system message informing that a call has been
   * started or ended in a group.
   *
   * @return The {@link net.dv8tion.jda.core.entities.MessageType MessageType} of this message.
   */
  MessageType getType();

  /** Mention formatting constants, useful for use with {@link java.util.regex.Pattern Patterns} */
<span class="nc" id="L1049">  enum MentionType {</span>
    /**
     * Represents a mention for a {@link net.dv8tion.jda.core.entities.User User}/{@link
     * net.dv8tion.jda.core.entities.Member Member}
     */
<span class="nc" id="L1054">    USER(&quot;&lt;@!?(\\d+)&gt;&quot;),</span>
    /** Represents a mention for a {@link net.dv8tion.jda.core.entities.Role Role} */
<span class="nc" id="L1056">    ROLE(&quot;&lt;@&amp;(\\d+)&gt;&quot;),</span>
    /** Represents a mention for a {@link net.dv8tion.jda.core.entities.TextChannel TextChannel} */
<span class="nc" id="L1058">    CHANNEL(&quot;&lt;#(\\d+)&gt;&quot;),</span>
    /** Represents a mention for a {@link net.dv8tion.jda.core.entities.Emote Emote} */
<span class="nc" id="L1060">    EMOTE(&quot;&lt;a?:([a-zA-Z0-9_]+):([0-9]+)&gt;&quot;),</span>
    /** Represents a mention for all active users, literal {@code @here} */
<span class="nc" id="L1062">    HERE(&quot;@here&quot;),</span>
    /**
     * Represents a mention for all users in a server, literal {@code @everyone}.
     *
     * &lt;p&gt;This is not the same as {@code guild.getPublicRole().getAsMention()}!
     */
<span class="nc" id="L1068">    EVERYONE(&quot;@everyone&quot;);</span>

    private final Pattern pattern;

<span class="nc" id="L1072">    MentionType(String regex) {</span>
<span class="nc" id="L1073">      this.pattern = Pattern.compile(regex);</span>
<span class="nc" id="L1074">    }</span>

    public Pattern getPattern() {
<span class="nc" id="L1077">      return pattern;</span>
    }
  }

  /** Represents a {@link net.dv8tion.jda.core.entities.Message Message} file attachment. */
  class Attachment implements ISnowflake {
    private final long id;
    private final String url;
    private final String proxyUrl;
    private final String fileName;
    private final int size;
    private final int height;
    private final int width;

    private final JDAImpl jda;

    public Attachment(
        long id,
        String url,
        String proxyUrl,
        String fileName,
        int size,
        int height,
        int width,
<span class="nc" id="L1101">        JDAImpl jda) {</span>
<span class="nc" id="L1102">      this.id = id;</span>
<span class="nc" id="L1103">      this.url = url;</span>
<span class="nc" id="L1104">      this.proxyUrl = proxyUrl;</span>
<span class="nc" id="L1105">      this.fileName = fileName;</span>
<span class="nc" id="L1106">      this.size = size;</span>
<span class="nc" id="L1107">      this.height = height;</span>
<span class="nc" id="L1108">      this.width = width;</span>
<span class="nc" id="L1109">      this.jda = jda;</span>
<span class="nc" id="L1110">    }</span>

    /**
     * The corresponding JDA instance for this Attachment
     *
     * @return The corresponding JDA instance for this Attachment
     */
    public JDA getJDA() {
<span class="nc" id="L1118">      return jda;</span>
    }

    @Override
    public long getIdLong() {
<span class="nc" id="L1123">      return id;</span>
    }

    /**
     * The url of the Attachment, most likely on the Discord servers.
     *
     * @return Non-null String containing the Attachment URL.
     */
    public String getUrl() {
<span class="nc" id="L1132">      return url;</span>
    }

    /**
     * The url of the Attachment, proxied by Discord. &lt;br&gt;
     * Url to the resource proxied by https://images.discordapp.net &lt;br&gt;
     * &lt;b&gt;Note: &lt;/b&gt; This URL will most likely only work for images. ({@link #isImage()})
     *
     * @return Non-null String containing the proxied Attachment url.
     */
    public String getProxyUrl() {
<span class="nc" id="L1143">      return proxyUrl;</span>
    }

    /**
     * The file name of the Attachment when it was first uploaded.
     *
     * @return Non-null String containing the Attachment file name.
     */
    public String getFileName() {
<span class="nc" id="L1152">      return fileName;</span>
    }

    /**
     * Creates an {@link net.dv8tion.jda.core.entities.Icon Icon} instance for this attachment if
     * {@link #isImage() isImage()} is {@code true}! &lt;br&gt;
     * This is a convenience method that can be used to retrieve an Icon from an attachment image
     * link which requires a set user-agent to be loaded.
     *
     * &lt;p&gt;When a global proxy was specified via {@link net.dv8tion.jda.core.JDABuilder JDABuilder}
     * this will use the specified proxy to create an {@link java.io.InputStream InputStream}
     * otherwise it will use a normal {@link java.net.URLConnection URLConnection} with the
     * User-Agent for the currently logged in account.
     *
     * @throws IOException If an IOError occurs while reading the image
     * @throws java.lang.IllegalStateException If this is not an image attachment
     * @return {@link net.dv8tion.jda.core.entities.Icon Icon} for this image attachment
     * @since 3.4.0
     */
    public Icon getAsIcon() throws IOException {
<span class="nc bnc" id="L1172" title="All 2 branches missed.">      if (!isImage())</span>
<span class="nc" id="L1173">        throw new IllegalStateException(</span>
            &quot;Cannot create an Icon out of this attachment. This is not an image.&quot;);
<span class="nc" id="L1175">      AtomicReference&lt;Icon&gt; icon = new AtomicReference&lt;&gt;();</span>
<span class="nc" id="L1176">      withInputStream((in) -&gt; icon.set(Icon.from(in)));</span>
<span class="nc" id="L1177">      return icon.get();</span>
    }

    /**
     * Downloads this attachment to given File
     *
     * @param file The file, where the attachment will get downloaded to
     * @return boolean true, if successful, otherwise false
     */
    public boolean download(File file) {
      try {
<span class="nc" id="L1188">        withInputStream((in) -&gt; Files.copy(in, Paths.get(file.getAbsolutePath())));</span>
<span class="nc" id="L1189">        return true;</span>
<span class="nc" id="L1190">      } catch (Exception e) {</span>
<span class="nc" id="L1191">        JDAImpl.LOG.error(&quot;Error while downloading an attachment&quot;, e);</span>
      }
<span class="nc" id="L1193">      return false;</span>
    }

    /**
     * Creates a copy of the {@link java.io.InputStream InputStream} that is created using an {@link
     * okhttp3.OkHttpClient OkHttpClient}.
     *
     * &lt;p&gt;You can access the input stream directly using {@link
     * #withInputStream(net.dv8tion.jda.core.utils.IOConsumer) withInputStream(IOConsumer)} which
     * will have an open input stream available within the consumer scope. The stream will be closed
     * once that method returns.
     *
     * @throws java.io.IOException If an IO error occurs trying to read from the opened HTTP channel
     * @return InputStream copy of the response body for this Attachment
     * @since 3.4.0
     */
    public InputStream getInputStream() throws IOException {
<span class="nc" id="L1210">      try (Response response = openConnection()) {</span>
        // creates a copy in order to properly close the response
<span class="nc" id="L1212">        InputStream in = Requester.getBody(response);</span>
<span class="nc" id="L1213">        return new ByteArrayInputStream(ByteStreams.toByteArray(in));</span>
      }
    }

    /**
     * Allows to access the InputStream that is available from the HTTP {@link okhttp3.Response
     * Response} to be used without having to copy it. &lt;br&gt;
     * Unlike {@link #getInputStream()} this does not return a full copy of the input stream.
     * Instead this method will provide the InputStream data in the specified consumer in which it
     * is still accessible.
     *
     * &lt;p&gt;&lt;b&gt;When this method returns the InputStream will be closed accordingly!&lt;/b&gt;
     *
     * @param then Not-null {@link net.dv8tion.jda.core.utils.IOConsumer IOConsumer} to accept the
     *     InputStream
     * @throws java.lang.IllegalArgumentException If the provided IOConsumer is {@code null}
     * @throws IOException If an IOException occurs within the IOConsumer or while opening an HTTP
     *     channel
     * @since 3.4.0
     */
    public void withInputStream(IOConsumer&lt;InputStream&gt; then) throws IOException {
<span class="nc" id="L1234">      Checks.notNull(then, &quot;Consumer&quot;);</span>
<span class="nc" id="L1235">      try (Response response = openConnection()) {</span>
<span class="nc" id="L1236">        then.accept(Requester.getBody(response));</span>
      }
<span class="nc" id="L1238">    }</span>

    protected Response openConnection() throws IOException {
<span class="nc" id="L1241">      final OkHttpClient client = jda.getRequester().getHttpClient();</span>
<span class="nc" id="L1242">      final Request request =</span>
          new Request.Builder()
<span class="nc" id="L1244">              .url(getUrl())</span>
<span class="nc" id="L1245">              .addHeader(&quot;user-agent&quot;, Requester.USER_AGENT)</span>
<span class="nc" id="L1246">              .addHeader(&quot;accept-encoding&quot;, &quot;gzip&quot;)</span>
<span class="nc" id="L1247">              .build();</span>
<span class="nc" id="L1248">      return client.newCall(request).execute();</span>
    }

    /**
     * The size of the attachment in bytes. &lt;br&gt;
     * Example: if {@link #getSize() getSize()} returns 1024, then the attachment is 1024 bytes, or
     * 1KB, in size.
     *
     * @return Positive int containing the size of the Attachment.
     */
    public int getSize() {
<span class="nc" id="L1259">      return size;</span>
    }

    /**
     * The height of the Attachment if this Attachment is an image. &lt;br&gt;
     * If this Attachment is not an image, this returns 0.
     *
     * @return Never-negative int containing image Attachment height.
     */
    public int getHeight() {
<span class="nc" id="L1269">      return height;</span>
    }

    /**
     * The width of the Attachment if this Attachment is an image. &lt;br&gt;
     * If this Attachment is not an image, this returns 0.
     *
     * @return Never-negative int containing image Attachment width.
     */
    public int getWidth() {
<span class="nc" id="L1279">      return width;</span>
    }

    /**
     * Whether or not this attachment is an Image. &lt;br&gt;
     * Based on the values of getHeight and getWidth being larger than zero.
     *
     * @return True if width and height are greater than zero.
     */
    public boolean isImage() {
<span class="nc bnc" id="L1289" title="All 4 branches missed.">      return height &gt; 0 &amp;&amp; width &gt; 0;</span>
    }
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.0.201801022044</span></div></body></html>