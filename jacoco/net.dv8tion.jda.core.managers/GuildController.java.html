<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>GuildController.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">ErisCasper.java</a> &gt; <a href="index.source.html" class="el_package">net.dv8tion.jda.core.managers</a> &gt; <span class="el_source">GuildController.java</span></div><h1>GuildController.java</h1><pre class="source lang-java linenums">/*
 *     Copyright 2015-2018 Austin Keener &amp; Michael Ritter &amp; Florian Spie√ü
 *     Copyright 2018-2018 &quot;Princess&quot; Lana Samson
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package net.dv8tion.jda.core.managers;

import java.util.*;
import java.util.stream.Collectors;
import java.util.stream.Stream;
import net.dv8tion.jda.core.JDA;
import net.dv8tion.jda.core.Permission;
import net.dv8tion.jda.core.entities.*;
import net.dv8tion.jda.core.entities.impl.EmoteImpl;
import net.dv8tion.jda.core.entities.impl.GuildImpl;
import net.dv8tion.jda.core.entities.impl.MemberImpl;
import net.dv8tion.jda.core.exceptions.GuildUnavailableException;
import net.dv8tion.jda.core.exceptions.HierarchyException;
import net.dv8tion.jda.core.exceptions.InsufficientPermissionException;
import net.dv8tion.jda.core.exceptions.PermissionException;
import net.dv8tion.jda.core.requests.Request;
import net.dv8tion.jda.core.requests.Response;
import net.dv8tion.jda.core.requests.RestAction;
import net.dv8tion.jda.core.requests.Route;
import net.dv8tion.jda.core.requests.restaction.AuditableRestAction;
import net.dv8tion.jda.core.requests.restaction.ChannelAction;
import net.dv8tion.jda.core.requests.restaction.RoleAction;
import net.dv8tion.jda.core.requests.restaction.order.CategoryOrderAction;
import net.dv8tion.jda.core.requests.restaction.order.ChannelOrderAction;
import net.dv8tion.jda.core.requests.restaction.order.RoleOrderAction;
import net.dv8tion.jda.core.utils.Checks;
import net.dv8tion.jda.core.utils.Helpers;
import net.dv8tion.jda.core.utils.MiscUtil;
import net.dv8tion.jda.core.utils.PermissionUtil;
import org.json.JSONArray;
import org.json.JSONObject;

/**
 * A controller that allows to utilize moderation permissions and create new channels and roles.
 *
 * @since 3.0
 */
public class GuildController {
  protected final GuildImpl guild;

  /**
   * Creates a new GuildController instance for the specified Guild instance
   *
   * @param guild The {@link net.dv8tion.jda.core.entities.Guild Guild} that will be modified
   */
<span class="nc" id="L62">  public GuildController(Guild guild) {</span>
<span class="nc" id="L63">    this.guild = (GuildImpl) guild;</span>
<span class="nc" id="L64">  }</span>

  /**
   * The underlying {@link net.dv8tion.jda.core.entities.Guild Guild} instance
   *
   * @return The underlying {@link net.dv8tion.jda.core.entities.Guild Guild} instance
   */
  public Guild getGuild() {
<span class="nc" id="L72">    return guild;</span>
  }

  /**
   * The {@link net.dv8tion.jda.core.JDA JDA} instance of this GuildController
   *
   * @return the corresponding JDA instance
   */
  public JDA getJDA() {
<span class="nc" id="L81">    return guild.getJDA();</span>
  }

  /**
   * Used to move a {@link net.dv8tion.jda.core.entities.Member Member} from one {@link
   * net.dv8tion.jda.core.entities.VoiceChannel VoiceChannel} to another {@link
   * net.dv8tion.jda.core.entities.VoiceChannel VoiceChannel}. &lt;br&gt;
   * As a note, you cannot move a Member that isn't already in a VoiceChannel. Also they must be in
   * a VoiceChannel in the same Guild as the one that you are moving them to.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The target Member cannot be moved due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The specified Member was removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_CHANNEL UNKNOWN_CHANNEL} &lt;br&gt;
   *       The specified channel was deleted before finishing the task
   * &lt;/ul&gt;
   *
   * @param member The {@link net.dv8tion.jda.core.entities.Member Member} that you are moving.
   * @param voiceChannel The destination {@link net.dv8tion.jda.core.entities.VoiceChannel
   *     VoiceChannel} to which the member is being moved to.
   * @throws IllegalStateException If the Member isn't currently in a VoiceChannel in this Guild.
   * @throws IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If any of the provided arguments is {@code null}
   *       &lt;li&gt;If the provided Member isn't part of this {@link net.dv8tion.jda.core.entities.Guild
   *           Guild}
   *       &lt;li&gt;If the provided VoiceChannel isn't part of this {@link
   *           net.dv8tion.jda.core.entities.Guild Guild}
   *     &lt;/ul&gt;
   *
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException
   *     &lt;ul&gt;
   *       &lt;li&gt;If this account doesn't have {@link
   *           net.dv8tion.jda.core.Permission#VOICE_MOVE_OTHERS} in the VoiceChannel that the
   *           Member is currently in.
   *       &lt;li&gt;If this account &lt;b&gt;AND&lt;/b&gt; the Member being moved don't have {@link
   *           net.dv8tion.jda.core.Permission#VOICE_CONNECT} for the destination VoiceChannel.
   *     &lt;/ul&gt;
   *
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @return {@link net.dv8tion.jda.core.requests.RestAction RestAction}
   */
  public RestAction&lt;Void&gt; moveVoiceMember(Member member, VoiceChannel voiceChannel) {
<span class="nc" id="L133">    checkAvailable();</span>
<span class="nc" id="L134">    Checks.notNull(member, &quot;Member&quot;);</span>
<span class="nc" id="L135">    Checks.notNull(voiceChannel, &quot;VoiceChannel&quot;);</span>
<span class="nc" id="L136">    checkGuild(member.getGuild(), &quot;Member&quot;);</span>
<span class="nc" id="L137">    checkGuild(voiceChannel.getGuild(), &quot;VoiceChannel&quot;);</span>

<span class="nc" id="L139">    GuildVoiceState vState = member.getVoiceState();</span>
<span class="nc bnc" id="L140" title="All 2 branches missed.">    if (!vState.inVoiceChannel())</span>
<span class="nc" id="L141">      throw new IllegalStateException(&quot;You cannot move a Member who isn't in a VoiceChannel!&quot;);</span>

<span class="nc bnc" id="L143" title="All 2 branches missed.">    if (!PermissionUtil.checkPermission(</span>
<span class="nc" id="L144">        vState.getChannel(), guild.getSelfMember(), Permission.VOICE_MOVE_OTHERS))</span>
<span class="nc" id="L145">      throw new InsufficientPermissionException(</span>
          Permission.VOICE_MOVE_OTHERS,
          &quot;This account does not have Permission to MOVE_OTHERS out of the channel that the Member is currently in.&quot;);

<span class="nc bnc" id="L149" title="All 2 branches missed.">    if (!PermissionUtil.checkPermission(</span>
<span class="nc" id="L150">            voiceChannel, guild.getSelfMember(), Permission.VOICE_CONNECT)</span>
<span class="nc bnc" id="L151" title="All 2 branches missed.">        &amp;&amp; !PermissionUtil.checkPermission(voiceChannel, member, Permission.VOICE_CONNECT))</span>
<span class="nc" id="L152">      throw new InsufficientPermissionException(</span>
          Permission.VOICE_CONNECT,
          &quot;Neither this account nor the Member that is attempting to be moved have the VOICE_CONNECT permission &quot;
              + &quot;for the destination VoiceChannel, so the move cannot be done.&quot;);

<span class="nc" id="L157">    JSONObject body = new JSONObject().put(&quot;channel_id&quot;, voiceChannel.getId());</span>
<span class="nc" id="L158">    Route.CompiledRoute route =</span>
<span class="nc" id="L159">        Route.Guilds.MODIFY_MEMBER.compile(guild.getId(), member.getUser().getId());</span>

<span class="nc" id="L161">    return new RestAction&lt;Void&gt;(guild.getJDA(), route, body) {</span>
      @Override
      protected void handleResponse(Response response, Request&lt;Void&gt; request) {
<span class="nc bnc" id="L164" title="All 2 branches missed.">        if (response.isOk()) request.onSuccess(null);</span>
<span class="nc" id="L165">        else request.onFailure(response);</span>
<span class="nc" id="L166">      }</span>
    };
  }

  /**
   * Changes a Member's nickname in this guild. The nickname is visible to all members of this
   * guild.
   *
   * &lt;p&gt;To change the nickname for the currently logged in account only the Permission {@link
   * net.dv8tion.jda.core.Permission#NICKNAME_CHANGE NICKNAME_CHANGE} is required. &lt;br&gt;
   * To change the nickname of &lt;b&gt;any&lt;/b&gt; {@link net.dv8tion.jda.core.entities.Member Member} for
   * this {@link net.dv8tion.jda.core.entities.Guild Guild} the Permission {@link
   * net.dv8tion.jda.core.Permission#NICKNAME_MANAGE NICKNAME_MANAGE} is required.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The nickname of the target Member is not modifiable due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The specified Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param member The {@link net.dv8tion.jda.core.entities.Member Member} for which the nickname
   *     should be changed.
   * @param nickname The new nickname of the {@link net.dv8tion.jda.core.entities.Member Member},
   *     provide {@code null} or an empty String to reset the nickname
   * @throws IllegalArgumentException If the specified {@link net.dv8tion.jda.core.entities.Member
   *     Member} is not from the same {@link net.dv8tion.jda.core.entities.Guild Guild}. Or if the
   *     provided member is {@code null}
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException
   *     &lt;ul&gt;
   *       &lt;li&gt;If attempting to set nickname for self and the logged in account has neither {@link
   *           net.dv8tion.jda.core.Permission#NICKNAME_CHANGE} or {@link
   *           net.dv8tion.jda.core.Permission#NICKNAME_MANAGE}
   *       &lt;li&gt;If attempting to set nickname for another member and the logged in account does not
   *           have {@link net.dv8tion.jda.core.Permission#NICKNAME_MANAGE}
   *     &lt;/ul&gt;
   *
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If attempting to set nickname for
   *     another member and the logged in account cannot manipulate the other user due to permission
   *     hierarchy position. &lt;br&gt;
   *     See {@link net.dv8tion.jda.core.utils.PermissionUtil#canInteract(Member, Member)
   *     PermissionUtil.canInteract(Member, Member)}
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   */
  public AuditableRestAction&lt;Void&gt; setNickname(Member member, String nickname) {
<span class="nc" id="L220">    checkAvailable();</span>
<span class="nc" id="L221">    Checks.notNull(member, &quot;Member&quot;);</span>
<span class="nc" id="L222">    checkGuild(member.getGuild(), &quot;Member&quot;);</span>

<span class="nc bnc" id="L224" title="All 2 branches missed.">    if (member.equals(guild.getSelfMember())) {</span>
<span class="nc bnc" id="L225" title="All 2 branches missed.">      if (!member.hasPermission(Permission.NICKNAME_CHANGE)</span>
<span class="nc bnc" id="L226" title="All 2 branches missed.">          &amp;&amp; !member.hasPermission(Permission.NICKNAME_MANAGE))</span>
<span class="nc" id="L227">        throw new InsufficientPermissionException(</span>
            Permission.NICKNAME_CHANGE,
            &quot;You neither have NICKNAME_CHANGE nor NICKNAME_MANAGE permission!&quot;);
    } else {
<span class="nc" id="L231">      checkPermission(Permission.NICKNAME_MANAGE);</span>
<span class="nc" id="L232">      checkPosition(member);</span>
    }

<span class="nc bnc" id="L235" title="All 2 branches missed.">    if (Objects.equals(nickname, member.getNickname()))</span>
<span class="nc" id="L236">      return new AuditableRestAction.EmptyRestAction&lt;&gt;(getJDA(), null);</span>

<span class="nc bnc" id="L238" title="All 2 branches missed.">    if (nickname == null) nickname = &quot;&quot;;</span>

<span class="nc" id="L240">    JSONObject body = new JSONObject().put(&quot;nick&quot;, nickname);</span>

    Route.CompiledRoute route;
<span class="nc bnc" id="L243" title="All 2 branches missed.">    if (member.equals(guild.getSelfMember()))</span>
<span class="nc" id="L244">      route = Route.Guilds.MODIFY_SELF_NICK.compile(guild.getId());</span>
<span class="nc" id="L245">    else route = Route.Guilds.MODIFY_MEMBER.compile(guild.getId(), member.getUser().getId());</span>

<span class="nc" id="L247">    return new AuditableRestAction&lt;Void&gt;(guild.getJDA(), route, body) {</span>
      @Override
      protected void handleResponse(Response response, Request&lt;Void&gt; request) {
<span class="nc bnc" id="L250" title="All 2 branches missed.">        if (response.isOk()) request.onSuccess(null);</span>
<span class="nc" id="L251">        else request.onFailure(response);</span>
<span class="nc" id="L252">      }</span>
    };
  }

  /**
   * This method will prune (kick) all members who were offline for at least &lt;i&gt;days&lt;/i&gt; days. &lt;br&gt;
   * The RestAction returned from this method will return the amount of Members that were pruned.
   * &lt;br&gt;
   * You can use {@link Guild#getPrunableMemberCount(int)} to determine how many Members would be
   * pruned if you were to call this method.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The prune cannot finished due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param days Minimum number of days since a member has been offline to get affected.
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the account doesn't
   *     have {@link net.dv8tion.jda.core.Permission#KICK_MEMBERS KICK_MEMBER} Permission.
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @throws IllegalArgumentException If the provided days are less than {@code 1}
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction} - Type: Integer &lt;br&gt;
   *     The amount of Members that were pruned from the Guild.
   */
  public AuditableRestAction&lt;Integer&gt; prune(int days) {
<span class="nc" id="L285">    checkAvailable();</span>
<span class="nc" id="L286">    checkPermission(Permission.KICK_MEMBERS);</span>

<span class="nc bnc" id="L288" title="All 2 branches missed.">    Checks.check(days &gt;= 1, &quot;Days amount must be at minimum 1 day.&quot;);</span>

<span class="nc" id="L290">    Route.CompiledRoute route =</span>
        Route.Guilds.PRUNE_MEMBERS
<span class="nc" id="L292">            .compile(guild.getId())</span>
<span class="nc" id="L293">            .withQueryParams(&quot;days&quot;, Integer.toString(days));</span>
<span class="nc" id="L294">    return new AuditableRestAction&lt;Integer&gt;(guild.getJDA(), route) {</span>
      @Override
      protected void handleResponse(Response response, Request&lt;Integer&gt; request) {
<span class="nc bnc" id="L297" title="All 2 branches missed.">        if (response.isOk()) request.onSuccess(response.getObject().getInt(&quot;pruned&quot;));</span>
<span class="nc" id="L298">        else request.onFailure(response);</span>
<span class="nc" id="L299">      }</span>
    };
  }

  /**
   * Kicks a {@link net.dv8tion.jda.core.entities.Member Member} from the {@link
   * net.dv8tion.jda.core.entities.Guild Guild}.
   *
   * &lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; {@link net.dv8tion.jda.core.entities.Guild#getMembers()} will still contain the
   * {@link net.dv8tion.jda.core.entities.User User} until Discord sends the {@link
   * net.dv8tion.jda.core.events.guild.member.GuildMemberLeaveEvent GuildMemberLeaveEvent}.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The target Member cannot be kicked due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The specified Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param member The {@link net.dv8tion.jda.core.entities.Member Member} to kick from the from the
   *     {@link net.dv8tion.jda.core.entities.Guild Guild}.
   * @param reason The reason for this action or {@code null} if there is no specified reason
   * @throws java.lang.IllegalArgumentException If the provided member is not a Member of this Guild
   *     or is {@code null}
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the logged in
   *     account does not have the {@link net.dv8tion.jda.core.Permission#KICK_MEMBERS} permission.
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the logged in account cannot kick
   *     the other member due to permission hierarchy position. &lt;br&gt;
   *     See {@link net.dv8tion.jda.core.utils.PermissionUtil#canInteract(Member, Member)
   *     PermissionUtil.canInteract(Member, Member)}
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction} Kicks the provided Member from the current Guild
   */
  public AuditableRestAction&lt;Void&gt; kick(Member member, String reason) {
<span class="nc" id="L341">    checkAvailable();</span>
<span class="nc" id="L342">    Checks.notNull(member, &quot;member&quot;);</span>
<span class="nc" id="L343">    checkGuild(member.getGuild(), &quot;member&quot;);</span>
<span class="nc" id="L344">    checkPermission(Permission.KICK_MEMBERS);</span>
<span class="nc" id="L345">    checkPosition(member);</span>

<span class="nc" id="L347">    final String userId = member.getUser().getId();</span>
<span class="nc" id="L348">    final String guildId = guild.getId();</span>

<span class="nc" id="L350">    Route.CompiledRoute route = Route.Guilds.KICK_MEMBER.compile(guildId, userId);</span>
<span class="nc bnc" id="L351" title="All 4 branches missed.">    if (reason != null &amp;&amp; !reason.isEmpty())</span>
<span class="nc" id="L352">      route = route.withQueryParams(&quot;reason&quot;, MiscUtil.encodeUTF8(reason));</span>

<span class="nc" id="L354">    return new AuditableRestAction&lt;Void&gt;(guild.getJDA(), route) {</span>
      @Override
      protected void handleResponse(Response response, Request&lt;Void&gt; request) {
<span class="nc bnc" id="L357" title="All 2 branches missed.">        if (response.isOk()) request.onSuccess(null);</span>
<span class="nc" id="L358">        else request.onFailure(response);</span>
<span class="nc" id="L359">      }</span>
    };
  }

  /**
   * Kicks the {@link net.dv8tion.jda.core.entities.Member Member} specified by the userId from the
   * from the {@link net.dv8tion.jda.core.entities.Guild Guild}.
   *
   * &lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; {@link net.dv8tion.jda.core.entities.Guild#getMembers()} will still contain the
   * {@link net.dv8tion.jda.core.entities.User User} until Discord sends the {@link
   * net.dv8tion.jda.core.events.guild.member.GuildMemberLeaveEvent GuildMemberLeaveEvent}.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The target Member cannot be kicked due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The specified Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param userId The id of the {@link net.dv8tion.jda.core.entities.User User} to kick from the
   *     from the {@link net.dv8tion.jda.core.entities.Guild Guild}.
   * @param reason The reason for this action or {@code null} if there is no specified reason
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the logged in
   *     account does not have the {@link net.dv8tion.jda.core.Permission#KICK_MEMBERS} permission.
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the logged in account cannot kick
   *     the other member due to permission hierarchy position. &lt;br&gt;
   *     See {@link net.dv8tion.jda.core.utils.PermissionUtil#canInteract(Member, Member)
   *     PermissionUtil.canInteract(Member, Member)}
   * @throws java.lang.IllegalArgumentException If the userId provided does not correspond to a
   *     Member in this Guild or the provided {@code userId} is blank/null.
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   */
  public AuditableRestAction&lt;Void&gt; kick(String userId, String reason) {
<span class="nc" id="L401">    Checks.notBlank(userId, &quot;userId&quot;);</span>

<span class="nc" id="L403">    Member member = guild.getMemberById(userId);</span>
<span class="nc bnc" id="L404" title="All 2 branches missed.">    Checks.check(</span>
        member != null,
        &quot;The provided userId does not correspond to a member in this guild! Provided userId: %s&quot;,
        userId);

<span class="nc" id="L409">    return kick(member, reason);</span>
  }

  /**
   * Kicks a {@link net.dv8tion.jda.core.entities.Member Member} from the {@link
   * net.dv8tion.jda.core.entities.Guild Guild}.
   *
   * &lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; {@link net.dv8tion.jda.core.entities.Guild#getMembers()} will still contain the
   * {@link net.dv8tion.jda.core.entities.User User} until Discord sends the {@link
   * net.dv8tion.jda.core.events.guild.member.GuildMemberLeaveEvent GuildMemberLeaveEvent}.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The target Member cannot be kicked due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The specified Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param member The {@link net.dv8tion.jda.core.entities.Member Member} to kick from the from the
   *     {@link net.dv8tion.jda.core.entities.Guild Guild}.
   * @throws java.lang.IllegalArgumentException If the provided member is not a Member of this Guild
   *     or is {@code null}
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the logged in
   *     account does not have the {@link net.dv8tion.jda.core.Permission#KICK_MEMBERS} permission.
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the logged in account cannot kick
   *     the other member due to permission hierarchy position. &lt;br&gt;
   *     See {@link net.dv8tion.jda.core.utils.PermissionUtil#canInteract(Member, Member)
   *     PermissionUtil.canInteract(Member, Member)}
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction} Kicks the provided Member from the current Guild
   */
  public AuditableRestAction&lt;Void&gt; kick(Member member) {
<span class="nc" id="L449">    return kick(member, null);</span>
  }

  /**
   * Kicks the {@link net.dv8tion.jda.core.entities.Member Member} specified by the userId from the
   * from the {@link net.dv8tion.jda.core.entities.Guild Guild}.
   *
   * &lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; {@link net.dv8tion.jda.core.entities.Guild#getMembers()} will still contain the
   * {@link net.dv8tion.jda.core.entities.User User} until Discord sends the {@link
   * net.dv8tion.jda.core.events.guild.member.GuildMemberLeaveEvent GuildMemberLeaveEvent}.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The target Member cannot be kicked due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The specified Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param userId The id of the {@link net.dv8tion.jda.core.entities.User User} to kick from the
   *     from the {@link net.dv8tion.jda.core.entities.Guild Guild}.
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the logged in
   *     account does not have the {@link net.dv8tion.jda.core.Permission#KICK_MEMBERS} permission.
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the logged in account cannot kick
   *     the other member due to permission hierarchy position. &lt;br&gt;
   *     See {@link net.dv8tion.jda.core.utils.PermissionUtil#canInteract(Member, Member)
   *     PermissionUtil.canInteract(Member, Member)}
   * @throws java.lang.IllegalArgumentException If the userId provided does not correspond to a
   *     Member in this Guild or the provided {@code userId} is blank/null.
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   */
  public AuditableRestAction&lt;Void&gt; kick(String userId) {
<span class="nc" id="L489">    return kick(userId, null);</span>
  }

  /**
   * Bans a {@link net.dv8tion.jda.core.entities.Member Member} and deletes messages sent by the
   * user based on the amount of delDays. &lt;br&gt;
   * If you wish to ban a member without deleting any messages, provide delDays with a value of 0.
   * This change will be applied immediately.
   *
   * &lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; {@link net.dv8tion.jda.core.entities.Guild#getMembers()} will still contain the
   * {@link net.dv8tion.jda.core.entities.Member Member} until Discord sends the {@link
   * net.dv8tion.jda.core.events.guild.member.GuildMemberLeaveEvent GuildMemberLeaveEvent}.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The target Member cannot be banned due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The specified Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param member The {@link net.dv8tion.jda.core.entities.Member Member} to ban.
   * @param delDays The history of messages, in days, that will be deleted.
   * @param reason The reason for this action or {@code null} if there is no specified reason
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the logged in
   *     account does not have the {@link net.dv8tion.jda.core.Permission#BAN_MEMBERS} permission.
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the logged in account cannot ban
   *     the other user due to permission hierarchy position. &lt;br&gt;
   *     See {@link net.dv8tion.jda.core.utils.PermissionUtil#canInteract(Member, Member)
   *     PermissionUtil.canInteract(Member, Member)}
   * @throws java.lang.IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If the provided amount of days (delDays) is less than 0.
   *       &lt;li&gt;If the provided member is {@code null}
   *     &lt;/ul&gt;
   *
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   */
  public AuditableRestAction&lt;Void&gt; ban(Member member, int delDays, String reason) {
<span class="nc" id="L536">    checkAvailable();</span>
<span class="nc" id="L537">    Checks.notNull(member, &quot;Member&quot;);</span>
    // Don't check if the provided member is from this guild. It doesn't matter if they are or
    // aren't.

<span class="nc" id="L541">    return ban(member.getUser(), delDays, reason);</span>
  }

  /**
   * Bans a {@link net.dv8tion.jda.core.entities.User User} and deletes messages sent by the user
   * based on the amount of delDays. &lt;br&gt;
   * If you wish to ban a user without deleting any messages, provide delDays with a value of 0.
   * This change will be applied immediately.
   *
   * &lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; {@link net.dv8tion.jda.core.entities.Guild#getMembers()} will still contain the
   * {@link net.dv8tion.jda.core.entities.User User's} {@link net.dv8tion.jda.core.entities.Member
   * Member} object (if the User was in the Guild) until Discord sends the {@link
   * net.dv8tion.jda.core.events.guild.member.GuildMemberLeaveEvent GuildMemberLeaveEvent}.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The target Member cannot be banned due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The specified Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param user The {@link net.dv8tion.jda.core.entities.User User} to ban.
   * @param delDays The history of messages, in days, that will be deleted.
   * @param reason The reason for this action or {@code null} if there is no specified reason
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the logged in
   *     account does not have the {@link net.dv8tion.jda.core.Permission#BAN_MEMBERS} permission.
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the logged in account cannot ban
   *     the other user due to permission hierarchy position. &lt;br&gt;
   *     See {@link net.dv8tion.jda.core.utils.PermissionUtil#canInteract(Member, Member)
   *     PermissionUtil.canInteract(Member, Member)}
   * @throws java.lang.IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If the provided amount of days (delDays) is less than 0.
   *       &lt;li&gt;If the provided user is null
   *     &lt;/ul&gt;
   *
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   */
  public AuditableRestAction&lt;Void&gt; ban(User user, int delDays, String reason) {
<span class="nc" id="L589">    checkAvailable();</span>
<span class="nc" id="L590">    Checks.notNull(user, &quot;User&quot;);</span>
<span class="nc" id="L591">    checkPermission(Permission.BAN_MEMBERS);</span>

<span class="nc bnc" id="L593" title="All 2 branches missed.">    if (guild.isMember(user)) // If user is in guild. Check if we are able to ban.</span>
<span class="nc" id="L594">    checkPosition(guild.getMember(user));</span>

<span class="nc" id="L596">    Checks.notNegative(delDays, &quot;Deletion Days&quot;);</span>

<span class="nc" id="L598">    final String userId = user.getId();</span>

<span class="nc" id="L600">    Route.CompiledRoute route = Route.Guilds.BAN.compile(guild.getId(), userId);</span>
<span class="nc bnc" id="L601" title="All 4 branches missed.">    if (reason != null &amp;&amp; !reason.isEmpty())</span>
<span class="nc" id="L602">      route = route.withQueryParams(&quot;reason&quot;, MiscUtil.encodeUTF8(reason));</span>
<span class="nc bnc" id="L603" title="All 2 branches missed.">    if (delDays &gt; 0)</span>
<span class="nc" id="L604">      route = route.withQueryParams(&quot;delete-message-days&quot;, Integer.toString(delDays));</span>

<span class="nc" id="L606">    return new AuditableRestAction&lt;Void&gt;(guild.getJDA(), route) {</span>
      @Override
      protected void handleResponse(Response response, Request&lt;Void&gt; request) {
<span class="nc bnc" id="L609" title="All 2 branches missed.">        if (response.isOk()) request.onSuccess(null);</span>
<span class="nc" id="L610">        else request.onFailure(response);</span>
<span class="nc" id="L611">      }</span>
    };
  }

  /**
   * Bans the a user specified by the userId and deletes messages sent by the user based on the
   * amount of delDays. &lt;br&gt;
   * If you wish to ban a user without deleting any messages, provide delDays with a value of 0.
   * This change will be applied immediately.
   *
   * &lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; {@link net.dv8tion.jda.core.entities.Guild#getMembers()} will still contain the
   * {@link net.dv8tion.jda.core.entities.User User's} {@link net.dv8tion.jda.core.entities.Member
   * Member} object (if the User was in the Guild) until Discord sends the {@link
   * net.dv8tion.jda.core.events.guild.member.GuildMemberLeaveEvent GuildMemberLeaveEvent}.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The target Member cannot be banned due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The specified Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param userId The id of the {@link net.dv8tion.jda.core.entities.User User} to ban.
   * @param delDays The history of messages, in days, that will be deleted.
   * @param reason The reason for this action or {@code null} if there is no specified reason
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the logged in
   *     account does not have the {@link net.dv8tion.jda.core.Permission#BAN_MEMBERS} permission.
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the logged in account cannot ban
   *     the other user due to permission hierarchy position. &lt;br&gt;
   *     See {@link net.dv8tion.jda.core.utils.PermissionUtil#canInteract(Member, Member)
   *     PermissionUtil.canInteract(Member, Member)}
   * @throws IllegalArgumentException If the provided amount of days (delDays) is less than 0.
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   */
  public AuditableRestAction&lt;Void&gt; ban(String userId, int delDays, String reason) {
<span class="nc" id="L655">    checkAvailable();</span>
<span class="nc" id="L656">    Checks.notBlank(userId, &quot;User ID&quot;);</span>
<span class="nc" id="L657">    checkPermission(Permission.BAN_MEMBERS);</span>

<span class="nc" id="L659">    User user = guild.getJDA().getUserById(userId);</span>
<span class="nc bnc" id="L660" title="All 2 branches missed.">    if (user != null) // If we have the user cached then we should use the additional information</span>
    // available to use during the ban process.
    {
<span class="nc" id="L663">      return ban(user, delDays, reason);</span>
    }

<span class="nc" id="L666">    Route.CompiledRoute route = Route.Guilds.BAN.compile(guild.getId(), userId);</span>
<span class="nc bnc" id="L667" title="All 4 branches missed.">    if (reason != null &amp;&amp; !reason.isEmpty())</span>
<span class="nc" id="L668">      route = route.withQueryParams(&quot;reason&quot;, MiscUtil.encodeUTF8(reason));</span>
<span class="nc bnc" id="L669" title="All 2 branches missed.">    if (delDays &gt; 0)</span>
<span class="nc" id="L670">      route = route.withQueryParams(&quot;delete-message-days&quot;, Integer.toString(delDays));</span>

<span class="nc" id="L672">    return new AuditableRestAction&lt;Void&gt;(guild.getJDA(), route) {</span>
      @Override
      protected void handleResponse(Response response, Request&lt;Void&gt; request) {
<span class="nc bnc" id="L675" title="All 2 branches missed.">        if (response.isOk()) request.onSuccess(null);</span>
<span class="nc bnc" id="L676" title="All 2 branches missed.">        else if (response.code == 404)</span>
<span class="nc" id="L677">          request.onFailure(</span>
              new IllegalArgumentException(
                  &quot;User with provided id \&quot;&quot;
                      + userId
                      + &quot;\&quot; does not exist! Cannot ban a non-existent user!&quot;));
<span class="nc" id="L682">        else request.onFailure(response);</span>
<span class="nc" id="L683">      }</span>
    };
  }

  /**
   * Bans a {@link net.dv8tion.jda.core.entities.Member Member} and deletes messages sent by the
   * user based on the amount of delDays. &lt;br&gt;
   * If you wish to ban a member without deleting any messages, provide delDays with a value of 0.
   * This change will be applied immediately.
   *
   * &lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; {@link net.dv8tion.jda.core.entities.Guild#getMembers()} will still contain the
   * {@link net.dv8tion.jda.core.entities.Member Member} until Discord sends the {@link
   * net.dv8tion.jda.core.events.guild.member.GuildMemberLeaveEvent GuildMemberLeaveEvent}.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The target Member cannot be banned due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The specified Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param member The {@link net.dv8tion.jda.core.entities.Member Member} to ban.
   * @param delDays The history of messages, in days, that will be deleted.
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the logged in
   *     account does not have the {@link net.dv8tion.jda.core.Permission#BAN_MEMBERS} permission.
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the logged in account cannot ban
   *     the other user due to permission hierarchy position. &lt;br&gt;
   *     See {@link net.dv8tion.jda.core.utils.PermissionUtil#canInteract(Member, Member)
   *     PermissionUtil.canInteract(Member, Member)}
   * @throws java.lang.IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If the provided amount of days (delDays) is less than 0.
   *       &lt;li&gt;If the provided member is {@code null}
   *     &lt;/ul&gt;
   *
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   */
  public AuditableRestAction&lt;Void&gt; ban(Member member, int delDays) {
<span class="nc" id="L730">    return ban(member, delDays, null);</span>
  }

  /**
   * Bans a {@link net.dv8tion.jda.core.entities.Member Member} and deletes messages sent by the
   * user based on the amount of delDays. &lt;br&gt;
   * If you wish to ban a member without deleting any messages, provide delDays with a value of 0.
   * This change will be applied immediately.
   *
   * &lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; {@link net.dv8tion.jda.core.entities.Guild#getMembers()} will still contain the
   * {@link net.dv8tion.jda.core.entities.Member Member} until Discord sends the {@link
   * net.dv8tion.jda.core.events.guild.member.GuildMemberLeaveEvent GuildMemberLeaveEvent}.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The target Member cannot be banned due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The specified Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param user The {@link net.dv8tion.jda.core.entities.User User} to ban.
   * @param delDays The history of messages, in days, that will be deleted.
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the logged in
   *     account does not have the {@link net.dv8tion.jda.core.Permission#BAN_MEMBERS} permission.
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the logged in account cannot ban
   *     the other user due to permission hierarchy position. &lt;br&gt;
   *     See {@link net.dv8tion.jda.core.utils.PermissionUtil#canInteract(Member, Member)
   *     PermissionUtil.canInteract(Member, Member)}
   * @throws java.lang.IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If the provided amount of days (delDays) is less than 0.
   *       &lt;li&gt;If the provided member is {@code null}
   *     &lt;/ul&gt;
   *
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   */
  public AuditableRestAction&lt;Void&gt; ban(User user, int delDays) {
<span class="nc" id="L776">    return ban(user, delDays, null);</span>
  }

  /**
   * Bans the a user specified by the userId and deletes messages sent by the user based on the
   * amount of delDays. &lt;br&gt;
   * If you wish to ban a user without deleting any messages, provide delDays with a value of 0.
   * This change will be applied immediately.
   *
   * &lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; {@link net.dv8tion.jda.core.entities.Guild#getMembers()} will still contain the
   * {@link net.dv8tion.jda.core.entities.User User's} {@link net.dv8tion.jda.core.entities.Member
   * Member} object (if the User was in the Guild) until Discord sends the {@link
   * net.dv8tion.jda.core.events.guild.member.GuildMemberLeaveEvent GuildMemberLeaveEvent}.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The target Member cannot be banned due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The specified Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param userId The id of the {@link net.dv8tion.jda.core.entities.User User} to ban.
   * @param delDays The history of messages, in days, that will be deleted.
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the logged in
   *     account does not have the {@link net.dv8tion.jda.core.Permission#BAN_MEMBERS} permission.
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the logged in account cannot ban
   *     the other user due to permission hierarchy position. &lt;br&gt;
   *     See {@link net.dv8tion.jda.core.utils.PermissionUtil#canInteract(Member, Member)
   *     PermissionUtil.canInteract(Member, Member)}
   * @throws IllegalArgumentException If the provided amount of days (delDays) is less than 0.
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   */
  public AuditableRestAction&lt;Void&gt; ban(String userId, int delDays) {
<span class="nc" id="L818">    return ban(userId, delDays, null);</span>
  }

  /**
   * Unbans the specified {@link net.dv8tion.jda.core.entities.User User} from this Guild.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The target Member cannot be unbanned due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_USER UNKNOWN_USER} &lt;br&gt;
   *       The specified User is invalid
   * &lt;/ul&gt;
   *
   * @param user The id of the {@link net.dv8tion.jda.core.entities.User User} to unban.
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the logged in
   *     account does not have the {@link net.dv8tion.jda.core.Permission#BAN_MEMBERS} permission.
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @throws IllegalArgumentException If the provided user is null
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   */
  public AuditableRestAction&lt;Void&gt; unban(User user) {
<span class="nc" id="L847">    Checks.notNull(user, &quot;User&quot;);</span>

<span class="nc" id="L849">    return unban(user.getId());</span>
  }

  /**
   * Unbans the a user specified by the userId from this Guild.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The target Member cannot be unbanned due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_USER UNKNOWN_USER} &lt;br&gt;
   *       The specified User is invalid
   * &lt;/ul&gt;
   *
   * @param userId The id of the {@link net.dv8tion.jda.core.entities.User User} to unban.
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the logged in
   *     account does not have the {@link net.dv8tion.jda.core.Permission#BAN_MEMBERS} permission.
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @throws IllegalArgumentException If the provided id is null or blank
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   */
  public AuditableRestAction&lt;Void&gt; unban(String userId) {
<span class="nc" id="L878">    checkAvailable();</span>
<span class="nc" id="L879">    Checks.notBlank(userId, &quot;User ID&quot;);</span>
<span class="nc" id="L880">    checkPermission(Permission.BAN_MEMBERS);</span>

<span class="nc" id="L882">    Route.CompiledRoute route = Route.Guilds.UNBAN.compile(guild.getId(), userId);</span>

<span class="nc" id="L884">    return new AuditableRestAction&lt;Void&gt;(guild.getJDA(), route) {</span>
      @Override
      protected void handleResponse(Response response, Request&lt;Void&gt; request) {
<span class="nc bnc" id="L887" title="All 2 branches missed.">        if (response.isOk()) request.onSuccess(null);</span>
<span class="nc bnc" id="L888" title="All 2 branches missed.">        else if (response.code == 404)</span>
<span class="nc" id="L889">          request.onFailure(</span>
              new IllegalArgumentException(
                  &quot;User with provided id \&quot;&quot;
                      + userId
                      + &quot;\&quot; is not banned! Cannot unban a user who is not currently banned!&quot;));
<span class="nc" id="L894">        else request.onFailure(response);</span>
<span class="nc" id="L895">      }</span>
    };
  }

  /**
   * Sets the Guild Deafened state state of the {@link net.dv8tion.jda.core.entities.Member Member}
   * based on the provided boolean.
   *
   * &lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; The Member's {@link
   * net.dv8tion.jda.core.entities.GuildVoiceState#isGuildDeafened()
   * GuildVoiceState.isGuildDeafened()} value won't change until JDA receives the {@link
   * net.dv8tion.jda.core.events.guild.voice.GuildVoiceGuildDeafenEvent GuildVoiceGuildDeafenEvent}
   * event related to this change.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The target Member cannot be deafened due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The specified Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param member The {@link net.dv8tion.jda.core.entities.Member Member} who's {@link
   *     GuildVoiceState VoiceState} is being changed.
   * @param deafen Whether this {@link net.dv8tion.jda.core.entities.Member Member} should be
   *     deafened or undeafened.
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the logged in
   *     account does not have the {@link net.dv8tion.jda.core.Permission#VOICE_DEAF_OTHERS}
   *     permission.
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the provided member is the
   *     Guild's owner. You cannot modify the owner of a Guild.
   * @throws IllegalArgumentException If the provided member is not from this Guild or null.
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   */
  public AuditableRestAction&lt;Void&gt; setDeafen(Member member, boolean deafen) {
<span class="nc" id="L938">    checkAvailable();</span>
<span class="nc" id="L939">    Checks.notNull(member, &quot;Member&quot;);</span>
<span class="nc" id="L940">    checkGuild(member.getGuild(), &quot;Member&quot;);</span>
<span class="nc" id="L941">    checkPermission(Permission.VOICE_DEAF_OTHERS);</span>

    // We check the owner instead of Position because, apparently, Discord doesn't care about
    // position for
    // muting and deafening, only whether the affected Member is the owner.
<span class="nc bnc" id="L946" title="All 2 branches missed.">    if (guild.getOwner().equals(member))</span>
<span class="nc" id="L947">      throw new HierarchyException(&quot;Cannot modify Guild Deafen status the Owner of the Guild&quot;);</span>

<span class="nc bnc" id="L949" title="All 2 branches missed.">    if (member.getVoiceState().isGuildDeafened() == deafen)</span>
<span class="nc" id="L950">      return new AuditableRestAction.EmptyRestAction&lt;&gt;(getJDA(), null);</span>

<span class="nc" id="L952">    JSONObject body = new JSONObject().put(&quot;deaf&quot;, deafen);</span>
<span class="nc" id="L953">    Route.CompiledRoute route =</span>
<span class="nc" id="L954">        Route.Guilds.MODIFY_MEMBER.compile(guild.getId(), member.getUser().getId());</span>
<span class="nc" id="L955">    return new AuditableRestAction&lt;Void&gt;(guild.getJDA(), route, body) {</span>
      @Override
      protected void handleResponse(Response response, Request&lt;Void&gt; request) {
<span class="nc bnc" id="L958" title="All 2 branches missed.">        if (response.isOk()) request.onSuccess(null);</span>
<span class="nc" id="L959">        else request.onFailure(response);</span>
<span class="nc" id="L960">      }</span>
    };
  }

  /**
   * Sets the Guild Muted state state of the {@link net.dv8tion.jda.core.entities.Member Member}
   * based on the provided boolean.
   *
   * &lt;p&gt;&lt;b&gt;Note:&lt;/b&gt; The Member's {@link
   * net.dv8tion.jda.core.entities.GuildVoiceState#isGuildMuted() GuildVoiceState.isGuildMuted()}
   * value won't change until JDA receives the {@link
   * net.dv8tion.jda.core.events.guild.voice.GuildVoiceGuildMuteEvent GuildVoiceGuildMuteEvent}
   * event related to this change.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The target Member cannot be muted due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The specified Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param member The {@link net.dv8tion.jda.core.entities.Member Member} who's {@link
   *     GuildVoiceState VoiceState} is being changed.
   * @param mute Whether this {@link net.dv8tion.jda.core.entities.Member Member} should be muted or
   *     unmuted.
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the logged in
   *     account does not have the {@link net.dv8tion.jda.core.Permission#VOICE_DEAF_OTHERS}
   *     permission.
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the provided member is the
   *     Guild's owner. You cannot modify the owner of a Guild.
   * @throws java.lang.IllegalArgumentException If the provided member is not from this Guild or
   *     null.
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   */
  public AuditableRestAction&lt;Void&gt; setMute(Member member, boolean mute) {
<span class="nc" id="L1004">    checkAvailable();</span>
<span class="nc" id="L1005">    Checks.notNull(member, &quot;Member&quot;);</span>
<span class="nc" id="L1006">    checkGuild(member.getGuild(), &quot;Member&quot;);</span>
<span class="nc" id="L1007">    checkPermission(Permission.VOICE_MUTE_OTHERS);</span>

    // We check the owner instead of Position because, apparently, Discord doesn't care about
    // position for
    // muting and deafening, only whether the affected Member is the owner.
<span class="nc bnc" id="L1012" title="All 2 branches missed.">    if (guild.getOwner().equals(member))</span>
<span class="nc" id="L1013">      throw new HierarchyException(&quot;Cannot modify Guild Mute status the Owner of the Guild&quot;);</span>

<span class="nc bnc" id="L1015" title="All 2 branches missed.">    if (member.getVoiceState().isGuildMuted() == mute)</span>
<span class="nc" id="L1016">      return new AuditableRestAction.EmptyRestAction&lt;&gt;(getJDA(), null);</span>

<span class="nc" id="L1018">    JSONObject body = new JSONObject().put(&quot;mute&quot;, mute);</span>
<span class="nc" id="L1019">    Route.CompiledRoute route =</span>
<span class="nc" id="L1020">        Route.Guilds.MODIFY_MEMBER.compile(guild.getId(), member.getUser().getId());</span>
<span class="nc" id="L1021">    return new AuditableRestAction&lt;Void&gt;(guild.getJDA(), route, body) {</span>
      @Override
      protected void handleResponse(Response response, Request&lt;Void&gt; request) {
<span class="nc bnc" id="L1024" title="All 2 branches missed.">        if (response.isOk()) request.onSuccess(null);</span>
<span class="nc" id="L1025">        else request.onFailure(response);</span>
<span class="nc" id="L1026">      }</span>
    };
  }

  /**
   * Atomically assigns the provided {@link net.dv8tion.jda.core.entities.Role Role} to the
   * specified {@link net.dv8tion.jda.core.entities.Member Member}. &lt;br&gt;
   * &lt;b&gt;This can be used together with other role modification methods as it does not require an
   * updated cache!&lt;/b&gt;
   *
   * &lt;p&gt;If multiple roles should be added/removed (efficiently) in one request you may use {@link
   * #modifyMemberRoles(Member, Collection, Collection) modifyMemberRoles(Member, Collection,
   * Collection)} or similar methods.
   *
   * &lt;p&gt;If the specified role is already present in the member's set of roles this does nothing.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The Members Roles could not be modified due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The target Member was removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_ROLE UNKNOWN_ROLE} &lt;br&gt;
   *       If the specified Role does not exist
   * &lt;/ul&gt;
   *
   * @param member The target member who will receive the new role
   * @param role The role which should be assigned atomically
   * @throws java.lang.IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If the specified member/role are not from the current Guild
   *       &lt;li&gt;Either member or role are {@code null}
   *     &lt;/ul&gt;
   *
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the currently logged
   *     in account does not have {@link net.dv8tion.jda.core.Permission#MANAGE_ROLES
   *     Permission.MANAGE_ROLES}
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the provided roles are higher in
   *     the Guild's hierarchy and thus cannot be modified by the currently logged in account
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   */
  public AuditableRestAction&lt;Void&gt; addSingleRoleToMember(Member member, Role role) {
<span class="nc" id="L1074">    Checks.notNull(member, &quot;Member&quot;);</span>
<span class="nc" id="L1075">    Checks.notNull(role, &quot;Role&quot;);</span>
<span class="nc" id="L1076">    checkGuild(member.getGuild(), &quot;Member&quot;);</span>
<span class="nc" id="L1077">    checkGuild(role.getGuild(), &quot;Role&quot;);</span>
<span class="nc" id="L1078">    checkPermission(Permission.MANAGE_ROLES);</span>
<span class="nc" id="L1079">    checkPosition(role);</span>

<span class="nc" id="L1081">    Route.CompiledRoute route =</span>
<span class="nc" id="L1082">        Route.Guilds.ADD_MEMBER_ROLE.compile(guild.getId(), member.getUser().getId(), role.getId());</span>
<span class="nc" id="L1083">    return new AuditableRestAction&lt;Void&gt;(getJDA(), route) {</span>
      @Override
      protected void handleResponse(Response response, Request&lt;Void&gt; request) {
<span class="nc bnc" id="L1086" title="All 2 branches missed.">        if (response.isOk()) request.onSuccess(null);</span>
<span class="nc" id="L1087">        else request.onFailure(response);</span>
<span class="nc" id="L1088">      }</span>
    };
  }

  /**
   * Atomically removes the provided {@link net.dv8tion.jda.core.entities.Role Role} from the
   * specified {@link net.dv8tion.jda.core.entities.Member Member}. &lt;br&gt;
   * &lt;b&gt;This can be used together with other role modification methods as it does not require an
   * updated cache!&lt;/b&gt;
   *
   * &lt;p&gt;If multiple roles should be added/removed (efficiently) in one request you may use {@link
   * #modifyMemberRoles(Member, Collection, Collection) modifyMemberRoles(Member, Collection,
   * Collection)} or similar methods.
   *
   * &lt;p&gt;If the specified role is not present in the member's set of roles this does nothing.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The Members Roles could not be modified due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The target Member was removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_ROLE UNKNOWN_ROLE} &lt;br&gt;
   *       If the specified Role does not exist
   * &lt;/ul&gt;
   *
   * @param member The target member who will lose the specified role
   * @param role The role which should be removed atomically
   * @throws java.lang.IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If the specified member/role are not from the current Guild
   *       &lt;li&gt;Either member or role are {@code null}
   *     &lt;/ul&gt;
   *
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the currently logged
   *     in account does not have {@link net.dv8tion.jda.core.Permission#MANAGE_ROLES
   *     Permission.MANAGE_ROLES}
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the provided roles are higher in
   *     the Guild's hierarchy and thus cannot be modified by the currently logged in account
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   */
  public AuditableRestAction&lt;Void&gt; removeSingleRoleFromMember(Member member, Role role) {
<span class="nc" id="L1136">    Checks.notNull(member, &quot;Member&quot;);</span>
<span class="nc" id="L1137">    Checks.notNull(role, &quot;Role&quot;);</span>
<span class="nc" id="L1138">    checkGuild(member.getGuild(), &quot;Member&quot;);</span>
<span class="nc" id="L1139">    checkGuild(role.getGuild(), &quot;Role&quot;);</span>
<span class="nc" id="L1140">    checkPermission(Permission.MANAGE_ROLES);</span>
<span class="nc" id="L1141">    checkPosition(role);</span>

<span class="nc" id="L1143">    Route.CompiledRoute route =</span>
<span class="nc" id="L1144">        Route.Guilds.REMOVE_MEMBER_ROLE.compile(</span>
<span class="nc" id="L1145">            guild.getId(), member.getUser().getId(), role.getId());</span>
<span class="nc" id="L1146">    return new AuditableRestAction&lt;Void&gt;(getJDA(), route) {</span>
      @Override
      protected void handleResponse(Response response, Request&lt;Void&gt; request) {
<span class="nc bnc" id="L1149" title="All 2 branches missed.">        if (response.isOk()) request.onSuccess(null);</span>
<span class="nc" id="L1150">        else request.onFailure(response);</span>
<span class="nc" id="L1151">      }</span>
    };
  }

  /**
   * Adds all provided {@link net.dv8tion.jda.core.entities.Role Roles} to the specified {@link
   * net.dv8tion.jda.core.entities.Member Member}
   *
   * &lt;h1&gt;Warning&lt;/h1&gt;
   *
   * &lt;b&gt;This may &lt;u&gt;not&lt;/u&gt; be used together with any other role add/remove/modify methods for the
   * same Member within one event listener cycle! The changes made by this require cache updates
   * which are triggered by lifecycle events which are received later. This may only be called again
   * once the specific Member has been updated by a {@link
   * net.dv8tion.jda.core.events.guild.member.GuildMemberRoleAddEvent GuildMemberRoleAddEvent}. &lt;br&gt;
   * To add &lt;u&gt;and&lt;/u&gt; remove Roles from a Member you should use {@link #modifyMemberRoles(Member,
   * Collection, Collection)}&lt;/b&gt;
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The Members Roles could not be modified due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The target Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param member Not-null {@link net.dv8tion.jda.core.entities.Member Member} that will receive
   *     all provided roles
   * @param roles Not-null Roles that should be added to the specified Member
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the currently logged
   *     in account does not have {@link net.dv8tion.jda.core.Permission#MANAGE_ROLES
   *     Permission.MANAGE_ROLES}
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the provided roles are higher in
   *     the Guild's hierarchy and thus cannot be modified by the currently logged in account
   * @throws IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If any or the provided entities is null
   *       &lt;li&gt;If any of the provided entities is not in this Guild
   *       &lt;li&gt;If any of the provided {@link net.dv8tion.jda.core.entities.Role Roles} is the {@code
   *           Public Role} of the Guild
   *       &lt;li&gt;If any of the provided {@link net.dv8tion.jda.core.entities.Role Roles} are {@code
   *           managed} &lt;br&gt;
   *           Managed Roles can only be applied by the applications that manage them (e.g. Twitch
   *           Subscriber Roles)
   *     &lt;/ul&gt;
   *
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   * @see #addRolesToMember(Member, Collection)
   * @see #modifyMemberRoles(Member, Role...)
   */
  public AuditableRestAction&lt;Void&gt; addRolesToMember(Member member, Role... roles) {
<span class="nc" id="L1210">    return modifyMemberRoles(member, Arrays.asList(roles), Collections.emptyList());</span>
  }

  /**
   * Adds all provided {@link net.dv8tion.jda.core.entities.Role Roles} to the specified {@link
   * net.dv8tion.jda.core.entities.Member Member}
   *
   * &lt;h1&gt;Warning&lt;/h1&gt;
   *
   * &lt;b&gt;This may &lt;u&gt;not&lt;/u&gt; be used together with any other role add/remove/modify methods for the
   * same Member within one event listener cycle! The changes made by this require cache updates
   * which are triggered by lifecycle events which are received later. This may only be called again
   * once the specific Member has been updated by a {@link
   * net.dv8tion.jda.core.events.guild.member.GuildMemberRoleAddEvent GuildMemberRoleAddEvent}. &lt;br&gt;
   * To add &lt;u&gt;and&lt;/u&gt; remove Roles from a Member you should use {@link #modifyMemberRoles(Member,
   * Collection, Collection)}&lt;/b&gt;
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The Members Roles could not be modified due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The target Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param member Not-null {@link net.dv8tion.jda.core.entities.Member Member} that will receive
   *     all provided roles
   * @param roles Not-null Roles that should be added to the specified Member
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the currently logged
   *     in account does not have {@link net.dv8tion.jda.core.Permission#MANAGE_ROLES
   *     Permission.MANAGE_ROLES}
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the provided roles are higher in
   *     the Guild's hierarchy and thus cannot be modified by the currently logged in account
   * @throws IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If any or the provided entities is null
   *       &lt;li&gt;If any of the provided entities is not in this Guild
   *       &lt;li&gt;If any of the provided {@link net.dv8tion.jda.core.entities.Role Roles} is the {@code
   *           Public Role} of the Guild
   *       &lt;li&gt;If any of the provided {@link net.dv8tion.jda.core.entities.Role Roles} are {@code
   *           managed} &lt;br&gt;
   *           Managed Roles can only be applied by the applications that manage them (e.g. Twitch
   *           Subscriber Roles)
   *     &lt;/ul&gt;
   *
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   * @see #addRolesToMember(Member, Role...)
   * @see #modifyMemberRoles(Member, Collection)
   */
  public AuditableRestAction&lt;Void&gt; addRolesToMember(Member member, Collection&lt;Role&gt; roles) {
<span class="nc" id="L1268">    return modifyMemberRoles(member, roles, Collections.emptyList());</span>
  }

  /**
   * Removes all provided {@link net.dv8tion.jda.core.entities.Role Roles} from the specified {@link
   * net.dv8tion.jda.core.entities.Member Member}
   *
   * &lt;h1&gt;Warning&lt;/h1&gt;
   *
   * &lt;b&gt;This may &lt;u&gt;not&lt;/u&gt; be used together with any other role add/remove/modify methods for the
   * same Member within one event listener cycle! The changes made by this require cache updates
   * which are triggered by lifecycle events which are received later. This may only be called again
   * once the specific Member has been updated by a {@link
   * net.dv8tion.jda.core.events.guild.member.GuildMemberRoleRemoveEvent
   * GuildMemberRoleRemoveEvent}. &lt;br&gt;
   * To add &lt;u&gt;and&lt;/u&gt; remove Roles from a Member you should use {@link #modifyMemberRoles(Member,
   * Collection, Collection)}&lt;/b&gt;
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The Members Roles could not be modified due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The target Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param member Not-null {@link net.dv8tion.jda.core.entities.Member Member} from which to remove
   *     the {@link net.dv8tion.jda.core.entities.Role Roles}
   * @param roles Not-null Roles that should be removed from the specified Member
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the currently logged
   *     in account does not have {@link net.dv8tion.jda.core.Permission#MANAGE_ROLES
   *     Permission.MANAGE_ROLES}
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the provided roles are higher in
   *     the Guild's hierarchy and thus cannot be modified by the currently logged in account
   * @throws IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If any or the provided entities is null
   *       &lt;li&gt;If any of the provided entities is not in this Guild
   *       &lt;li&gt;If any of the provided {@link net.dv8tion.jda.core.entities.Role Roles} is the {@code
   *           Public Role} of the Guild
   *       &lt;li&gt;If any of the provided {@link net.dv8tion.jda.core.entities.Role Roles} are {@code
   *           managed} &lt;br&gt;
   *           Managed Roles can only be applied by the applications that manage them (e.g. Twitch
   *           Subscriber Roles)
   *     &lt;/ul&gt;
   *
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   * @see #addRolesToMember(Member, Collection)
   * @see #modifyMemberRoles(Member, Role...)
   */
  public AuditableRestAction&lt;Void&gt; removeRolesFromMember(Member member, Role... roles) {
<span class="nc" id="L1327">    return modifyMemberRoles(member, Collections.emptyList(), Arrays.asList(roles));</span>
  }

  /**
   * Removes all provided {@link net.dv8tion.jda.core.entities.Role Roles} from the specified {@link
   * net.dv8tion.jda.core.entities.Member Member}
   *
   * &lt;h1&gt;Warning&lt;/h1&gt;
   *
   * &lt;b&gt;This may &lt;u&gt;not&lt;/u&gt; be used together with any other role add/remove/modify methods for the
   * same Member within one event listener cycle! The changes made by this require cache updates
   * which are triggered by lifecycle events which are received later. This may only be called again
   * once the specific Member has been updated by a {@link
   * net.dv8tion.jda.core.events.guild.member.GuildMemberRoleRemoveEvent
   * GuildMemberRoleRemoveEvent}. &lt;br&gt;
   * To add &lt;u&gt;and&lt;/u&gt; remove Roles from a Member you should use {@link #modifyMemberRoles(Member,
   * Collection, Collection)}&lt;/b&gt;
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The Members Roles could not be modified due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The target Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param member Not-null {@link net.dv8tion.jda.core.entities.Member Member} from which to remove
   *     the {@link net.dv8tion.jda.core.entities.Role Roles}
   * @param roles Not-null Roles that should be removed from the specified Member
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the currently logged
   *     in account does not have {@link net.dv8tion.jda.core.Permission#MANAGE_ROLES
   *     Permission.MANAGE_ROLES}
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the provided roles are higher in
   *     the Guild's hierarchy and thus cannot be modified by the currently logged in account
   * @throws IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If any or the provided entities is null
   *       &lt;li&gt;If any of the provided entities is not in this Guild
   *       &lt;li&gt;If any of the provided {@link net.dv8tion.jda.core.entities.Role Roles} is the {@code
   *           Public Role} of the Guild
   *       &lt;li&gt;If any of the provided {@link net.dv8tion.jda.core.entities.Role Roles} are {@code
   *           managed} &lt;br&gt;
   *           Managed Roles can only be applied by the applications that manage them (e.g. Twitch
   *           Subscriber Roles)
   *     &lt;/ul&gt;
   *
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   * @see #addRolesToMember(Member, Role...)
   * @see #modifyMemberRoles(Member, Collection)
   */
  public AuditableRestAction&lt;Void&gt; removeRolesFromMember(Member member, Collection&lt;Role&gt; roles) {
<span class="nc" id="L1386">    return modifyMemberRoles(member, Collections.emptyList(), roles);</span>
  }

  /**
   * Modifies the {@link net.dv8tion.jda.core.entities.Role Roles} of the specified {@link
   * net.dv8tion.jda.core.entities.Member Member} by adding and removing a collection of roles. &lt;br&gt;
   * None of the provided roles may be the &lt;u&gt;Public Role&lt;/u&gt; of the current Guild. &lt;br&gt;
   * If a role is both in {@code rolesToAdd} and {@code rolesToRemove} it will be removed.
   *
   * &lt;p&gt;None of the provided collections may be null &lt;br&gt;
   * To only add or remove roles use either {@link #removeRolesFromMember(Member, Collection)} or
   * {@link #addRolesToMember(Member, Collection)}
   *
   * &lt;h1&gt;Warning&lt;/h1&gt;
   *
   * &lt;b&gt;This may &lt;u&gt;not&lt;/u&gt; be used together with any other role add/remove/modify methods for the
   * same Member within one event listener cycle! The changes made by this require cache updates
   * which are triggered by lifecycle events which are received later. This may only be called again
   * once the specific Member has been updated by a {@link
   * net.dv8tion.jda.core.events.guild.member.GenericGuildMemberEvent GenericGuildMemberEvent}
   * targeting the same Member.&lt;/b&gt;
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The Members Roles could not be modified due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The target Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param member The {@link net.dv8tion.jda.core.entities.Member Member} that should be modified
   * @param rolesToAdd A {@link java.util.Collection Collection} of {@link
   *     net.dv8tion.jda.core.entities.Role Roles} to add to the current Roles the specified {@link
   *     net.dv8tion.jda.core.entities.Member Member} already has
   * @param rolesToRemove A {@link java.util.Collection Collection} of {@link
   *     net.dv8tion.jda.core.entities.Role Roles} to remove from the current Roles the specified
   *     {@link net.dv8tion.jda.core.entities.Member Member} already has
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the currently logged
   *     in account does not have {@link net.dv8tion.jda.core.Permission#MANAGE_ROLES
   *     Permission.MANAGE_ROLES}
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the provided roles are higher in
   *     the Guild's hierarchy and thus cannot be modified by the currently logged in account
   * @throws IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If any of the provided arguments is {@code null}
   *       &lt;li&gt;If any of the specified Roles is managed or is the {@code Public Role} of the Guild
   *     &lt;/ul&gt;
   *
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   */
  public AuditableRestAction&lt;Void&gt; modifyMemberRoles(
      Member member, Collection&lt;Role&gt; rolesToAdd, Collection&lt;Role&gt; rolesToRemove) {
<span class="nc" id="L1446">    checkAvailable();</span>
<span class="nc" id="L1447">    Checks.notNull(member, &quot;Member&quot;);</span>
<span class="nc" id="L1448">    Checks.notNull(rolesToAdd, &quot;Collection containing roles to be added to the member&quot;);</span>
<span class="nc" id="L1449">    Checks.notNull(rolesToRemove, &quot;Collection containing roles to be removed from the member&quot;);</span>
<span class="nc" id="L1450">    checkGuild(member.getGuild(), &quot;Member&quot;);</span>
<span class="nc" id="L1451">    checkPermission(Permission.MANAGE_ROLES);</span>
<span class="nc" id="L1452">    rolesToAdd.forEach(</span>
        role -&gt; {
<span class="nc" id="L1454">          Checks.notNull(role, &quot;Role in rolesToAdd&quot;);</span>
<span class="nc" id="L1455">          checkGuild(role.getGuild(), &quot;Role: &quot; + role.toString());</span>
<span class="nc" id="L1456">          checkPosition(role);</span>
<span class="nc" id="L1457">          Checks.check(</span>
<span class="nc bnc" id="L1458" title="All 2 branches missed.">              !role.isManaged(),</span>
              &quot;Cannot add a Managed role to a Member. Role: %s&quot;,
<span class="nc" id="L1460">              role.toString());</span>
<span class="nc" id="L1461">        });</span>
<span class="nc" id="L1462">    rolesToRemove.forEach(</span>
        role -&gt; {
<span class="nc" id="L1464">          Checks.notNull(role, &quot;Role in rolesToRemove&quot;);</span>
<span class="nc" id="L1465">          checkGuild(role.getGuild(), &quot;Role: &quot; + role.toString());</span>
<span class="nc" id="L1466">          checkPosition(role);</span>
<span class="nc" id="L1467">          Checks.check(</span>
<span class="nc bnc" id="L1468" title="All 2 branches missed.">              !role.isManaged(),</span>
              &quot;Cannot remove a Managed role from a Member. Role: %s&quot;,
<span class="nc" id="L1470">              role.toString());</span>
<span class="nc" id="L1471">        });</span>

<span class="nc" id="L1473">    Set&lt;Role&gt; currentRoles = new HashSet&lt;&gt;(((MemberImpl) member).getRoleSet());</span>
<span class="nc" id="L1474">    Set&lt;Role&gt; newRolesToAdd = new HashSet&lt;&gt;(rolesToAdd);</span>
<span class="nc" id="L1475">    newRolesToAdd.removeAll(rolesToRemove);</span>

    // If no changes have been made we return an EmptyRestAction instead
<span class="nc bnc" id="L1478" title="All 2 branches missed.">    if (currentRoles.addAll(newRolesToAdd)) currentRoles.removeAll(rolesToRemove);</span>
<span class="nc bnc" id="L1479" title="All 2 branches missed.">    else if (!currentRoles.removeAll(rolesToRemove))</span>
<span class="nc" id="L1480">      return new AuditableRestAction.EmptyRestAction&lt;&gt;(guild.getJDA());</span>

<span class="nc" id="L1482">    Checks.check(</span>
<span class="nc bnc" id="L1483" title="All 2 branches missed.">        !currentRoles.contains(guild.getPublicRole()),</span>
        &quot;Cannot add the PublicRole of a Guild to a Member. All members have this role by default!&quot;);

<span class="nc" id="L1486">    JSONObject body =</span>
        new JSONObject()
<span class="nc" id="L1488">            .put(&quot;roles&quot;, currentRoles.stream().map(Role::getId).collect(Collectors.toList()));</span>
<span class="nc" id="L1489">    Route.CompiledRoute route =</span>
<span class="nc" id="L1490">        Route.Guilds.MODIFY_MEMBER.compile(guild.getId(), member.getUser().getId());</span>

<span class="nc" id="L1492">    return new AuditableRestAction&lt;Void&gt;(guild.getJDA(), route, body) {</span>
      @Override
      protected void handleResponse(Response response, Request&lt;Void&gt; request) {
<span class="nc bnc" id="L1495" title="All 2 branches missed.">        if (response.isOk()) request.onSuccess(null);</span>
<span class="nc" id="L1496">        else request.onFailure(response);</span>
<span class="nc" id="L1497">      }</span>
    };
  }

  /**
   * Modifies the complete {@link net.dv8tion.jda.core.entities.Role Role} set of the specified
   * {@link net.dv8tion.jda.core.entities.Member Member} &lt;br&gt;
   * The provided roles will replace all current Roles of the specified Member.
   *
   * &lt;h1&gt;Warning&lt;/h1&gt;
   *
   * &lt;b&gt;This may &lt;u&gt;not&lt;/u&gt; be used together with any other role add/remove/modify methods for the
   * same Member within one event listener cycle! The changes made by this require cache updates
   * which are triggered by lifecycle events which are received later. This may only be called again
   * once the specific Member has been updated by a {@link
   * net.dv8tion.jda.core.events.guild.member.GenericGuildMemberEvent GenericGuildMemberEvent}
   * targeting the same Member.&lt;/b&gt;
   *
   * &lt;p&gt;&lt;b&gt;The new roles &lt;u&gt;must not&lt;/u&gt; contain the Public Role of the Guild&lt;/b&gt;
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The Members Roles could not be modified due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The target Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param member A {@link net.dv8tion.jda.core.entities.Member Member} of which to override the
   *     Roles of
   * @param roles New collection of {@link net.dv8tion.jda.core.entities.Role Roles} for the
   *     specified Member
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the currently logged
   *     in account does not have {@link net.dv8tion.jda.core.Permission#MANAGE_ROLES
   *     Permission.MANAGE_ROLES}
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the provided roles are higher in
   *     the Guild's hierarchy and thus cannot be modified by the currently logged in account
   * @throws IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If any of the provided arguments is {@code null}
   *       &lt;li&gt;If any of the provided arguments is not from this Guild
   *       &lt;li&gt;If any of the specified {@link net.dv8tion.jda.core.entities.Role Roles} is managed
   *       &lt;li&gt;If any of the specified {@link net.dv8tion.jda.core.entities.Role Roles} is the
   *           {@code Public Role} of this Guild
   *     &lt;/ul&gt;
   *
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   * @see #modifyMemberRoles(Member, Collection)
   */
  public AuditableRestAction&lt;Void&gt; modifyMemberRoles(Member member, Role... roles) {
<span class="nc" id="L1555">    return modifyMemberRoles(member, Arrays.asList(roles));</span>
  }

  /**
   * Modifies the complete {@link net.dv8tion.jda.core.entities.Role Role} set of the specified
   * {@link net.dv8tion.jda.core.entities.Member Member} &lt;br&gt;
   * The provided roles will replace all current Roles of the specified Member.
   *
   * &lt;p&gt;&lt;u&gt;The new roles &lt;b&gt;must not&lt;/b&gt; contain the Public Role of the Guild&lt;/u&gt;
   *
   * &lt;h1&gt;Warning&lt;/h1&gt;
   *
   * &lt;b&gt;This may &lt;u&gt;not&lt;/u&gt; be used together with any other role add/remove/modify methods for the
   * same Member within one event listener cycle! The changes made by this require cache updates
   * which are triggered by lifecycle events which are received later. This may only be called again
   * once the specific Member has been updated by a {@link
   * net.dv8tion.jda.core.events.guild.member.GenericGuildMemberEvent GenericGuildMemberEvent}
   * targeting the same Member.&lt;/b&gt;
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The Members Roles could not be modified due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The target Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param member A {@link net.dv8tion.jda.core.entities.Member Member} of which to override the
   *     Roles of
   * @param roles New collection of {@link net.dv8tion.jda.core.entities.Role Roles} for the
   *     specified Member
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the currently logged
   *     in account does not have {@link net.dv8tion.jda.core.Permission#MANAGE_ROLES
   *     Permission.MANAGE_ROLES}
   * @throws net.dv8tion.jda.core.exceptions.HierarchyException If the provided roles are higher in
   *     the Guild's hierarchy and thus cannot be modified by the currently logged in account
   * @throws IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If any of the provided arguments is {@code null}
   *       &lt;li&gt;If any of the provided arguments is not from this Guild
   *       &lt;li&gt;If any of the specified {@link net.dv8tion.jda.core.entities.Role Roles} is managed
   *       &lt;li&gt;If any of the specified {@link net.dv8tion.jda.core.entities.Role Roles} is the
   *           {@code Public Role} of this Guild
   *     &lt;/ul&gt;
   *
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   * @see #modifyMemberRoles(Member, Collection)
   */
  public AuditableRestAction&lt;Void&gt; modifyMemberRoles(Member member, Collection&lt;Role&gt; roles) {
<span class="nc" id="L1612">    checkAvailable();</span>
<span class="nc" id="L1613">    Checks.notNull(member, &quot;Member&quot;);</span>
<span class="nc" id="L1614">    Checks.notNull(roles, &quot;Roles&quot;);</span>
<span class="nc" id="L1615">    checkGuild(member.getGuild(), &quot;Member&quot;);</span>
<span class="nc" id="L1616">    roles.forEach(</span>
        role -&gt; {
<span class="nc" id="L1618">          Checks.notNull(role, &quot;Role in collection&quot;);</span>
<span class="nc" id="L1619">          checkGuild(role.getGuild(), &quot;Role: &quot; + role.toString());</span>
<span class="nc" id="L1620">          checkPosition(role);</span>
<span class="nc" id="L1621">        });</span>

<span class="nc" id="L1623">    Checks.check(</span>
<span class="nc bnc" id="L1624" title="All 2 branches missed.">        !roles.contains(guild.getPublicRole()),</span>
        &quot;Cannot add the PublicRole of a Guild to a Member. All members have this role by default!&quot;);

    // Return an empty rest action if there were no changes
<span class="nc" id="L1628">    final List&lt;Role&gt; memberRoles = member.getRoles();</span>
<span class="nc bnc" id="L1629" title="All 4 branches missed.">    if (memberRoles.size() == roles.size() &amp;&amp; memberRoles.containsAll(roles))</span>
<span class="nc" id="L1630">      return new AuditableRestAction.EmptyRestAction&lt;&gt;(guild.getJDA());</span>

    // Make sure that the current managed roles are preserved and no new ones are added.
<span class="nc" id="L1633">    List&lt;Role&gt; currentManaged =</span>
<span class="nc" id="L1634">        memberRoles.stream().filter(Role::isManaged).collect(Collectors.toList());</span>
<span class="nc" id="L1635">    List&lt;Role&gt; newManaged = roles.stream().filter(Role::isManaged).collect(Collectors.toList());</span>
<span class="nc bnc" id="L1636" title="All 4 branches missed.">    if (!currentManaged.isEmpty() || !newManaged.isEmpty()) {</span>
<span class="nc bnc" id="L1637" title="All 2 branches missed.">      if (!newManaged.containsAll(currentManaged)) {</span>
<span class="nc" id="L1638">        currentManaged.removeAll(newManaged);</span>
<span class="nc" id="L1639">        throw new IllegalArgumentException(</span>
<span class="nc" id="L1640">            &quot;Cannot remove managed roles from a member! Roles: &quot; + currentManaged.toString());</span>
      }
<span class="nc bnc" id="L1642" title="All 2 branches missed.">      if (!currentManaged.containsAll(newManaged)) {</span>
<span class="nc" id="L1643">        newManaged.removeAll(currentManaged);</span>
<span class="nc" id="L1644">        throw new IllegalArgumentException(</span>
<span class="nc" id="L1645">            &quot;Cannot add managed roles to a member! Roles: &quot; + newManaged.toString());</span>
      }
    }

    // This is identical to the rest action stuff in #modifyMemberRoles(Member, Collection&lt;Role&gt;,
    // Collection&lt;Role&gt;)
<span class="nc" id="L1651">    JSONObject body =</span>
<span class="nc" id="L1652">        new JSONObject().put(&quot;roles&quot;, roles.stream().map(Role::getId).collect(Collectors.toList()));</span>
<span class="nc" id="L1653">    Route.CompiledRoute route =</span>
<span class="nc" id="L1654">        Route.Guilds.MODIFY_MEMBER.compile(guild.getId(), member.getUser().getId());</span>

<span class="nc" id="L1656">    return new AuditableRestAction&lt;Void&gt;(guild.getJDA(), route, body) {</span>
      @Override
      protected void handleResponse(Response response, Request&lt;Void&gt; request) {
<span class="nc bnc" id="L1659" title="All 2 branches missed.">        if (response.isOk()) request.onSuccess(null);</span>
<span class="nc" id="L1660">        else request.onFailure(response);</span>
<span class="nc" id="L1661">      }</span>
    };
  }

  /**
   * Transfers the Guild ownership to the specified {@link net.dv8tion.jda.core.entities.Member
   * Member} &lt;br&gt;
   * Only available if the currently logged in account is the owner of this Guild
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The currently logged in account lost ownership before completing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_MEMBER UNKNOWN_MEMBER} &lt;br&gt;
   *       The target Member was removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param newOwner Not-null Member to transfer ownership to
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @throws net.dv8tion.jda.core.exceptions.PermissionException If the currently logged in account
   *     is not the owner of this Guild
   * @throws IllegalArgumentException
   *     &lt;ul&gt;
   *       &lt;li&gt;If the specified Member is {@code null} or not from the same Guild
   *       &lt;li&gt;If the specified Member already is the Guild owner
   *       &lt;li&gt;If the specified Member is a bot account ({@link net.dv8tion.jda.core.AccountType#BOT
   *           AccountType.BOT})
   *     &lt;/ul&gt;
   *
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction}
   */
  public AuditableRestAction&lt;Void&gt; transferOwnership(Member newOwner) {
<span class="nc" id="L1700">    checkAvailable();</span>
<span class="nc" id="L1701">    Checks.notNull(newOwner, &quot;Member&quot;);</span>
<span class="nc" id="L1702">    checkGuild(newOwner.getGuild(), &quot;Member&quot;);</span>
<span class="nc bnc" id="L1703" title="All 2 branches missed.">    if (!guild.getOwner().equals(guild.getSelfMember()))</span>
<span class="nc" id="L1704">      throw new PermissionException(</span>
          &quot;The logged in account must be the owner of this Guild to be able to transfer ownership&quot;);

<span class="nc" id="L1707">    Checks.check(</span>
<span class="nc bnc" id="L1708" title="All 2 branches missed.">        !guild.getSelfMember().equals(newOwner),</span>
        &quot;The member provided as the newOwner is the currently logged in account. Provide a different member to give ownership to.&quot;);

<span class="nc bnc" id="L1711" title="All 2 branches missed.">    Checks.check(!newOwner.getUser().isBot(), &quot;Cannot transfer ownership of a Guild to a Bot!&quot;);</span>

<span class="nc" id="L1713">    JSONObject body = new JSONObject().put(&quot;owner_id&quot;, newOwner.getUser().getId());</span>
<span class="nc" id="L1714">    Route.CompiledRoute route = Route.Guilds.MODIFY_GUILD.compile(guild.getId());</span>
<span class="nc" id="L1715">    return new AuditableRestAction&lt;Void&gt;(guild.getJDA(), route, body) {</span>
      @Override
      protected void handleResponse(Response response, Request&lt;Void&gt; request) {
<span class="nc bnc" id="L1718" title="All 2 branches missed.">        if (response.isOk()) request.onSuccess(null);</span>
<span class="nc" id="L1719">        else request.onFailure(response);</span>
<span class="nc" id="L1720">      }</span>
    };
  }

  /**
   * Creates a new {@link net.dv8tion.jda.core.entities.TextChannel TextChannel} in this Guild. For
   * this to be successful, the logged in account has to have the {@link
   * net.dv8tion.jda.core.Permission#MANAGE_CHANNEL MANAGE_CHANNEL} Permission
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The channel could not be created due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param name The name of the TextChannel to create
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the logged in
   *     account does not have the {@link net.dv8tion.jda.core.Permission#MANAGE_CHANNEL} permission
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @throws IllegalArgumentException If the provided name is {@code null} or less than 2 characters
   *     or greater than 100 characters in length
   * @return A specific {@link net.dv8tion.jda.core.requests.restaction.ChannelAction ChannelAction}
   *     &lt;br&gt;
   *     This action allows to set fields for the new TextChannel before creating it
   */
  public ChannelAction createTextChannel(String name) {
<span class="nc" id="L1752">    checkAvailable();</span>
<span class="nc" id="L1753">    checkPermission(Permission.MANAGE_CHANNEL);</span>
<span class="nc" id="L1754">    Checks.notBlank(name, &quot;Name&quot;);</span>
<span class="nc" id="L1755">    name = name.trim();</span>

<span class="nc" id="L1757">    Checks.check(</span>
<span class="nc bnc" id="L1758" title="All 4 branches missed.">        name.length() &gt;= 2 &amp;&amp; name.length() &lt;= 100,</span>
        &quot;Provided name must be 2 - 100 characters in length&quot;);

<span class="nc" id="L1761">    Route.CompiledRoute route = Route.Guilds.CREATE_CHANNEL.compile(guild.getId());</span>
<span class="nc" id="L1762">    return new ChannelAction(route, name, guild, ChannelType.TEXT);</span>
  }

  /**
   * Creates a new {@link net.dv8tion.jda.core.entities.VoiceChannel VoiceChannel} in this Guild.
   * For this to be successful, the logged in account has to have the {@link
   * net.dv8tion.jda.core.Permission#MANAGE_CHANNEL MANAGE_CHANNEL} Permission.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The channel could not be created due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param name The name of the VoiceChannel to create
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the logged in
   *     account does not have the {@link net.dv8tion.jda.core.Permission#MANAGE_CHANNEL} permission
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @throws IllegalArgumentException If the provided name is {@code null} or less than 2 characters
   *     or greater than 100 characters in length
   * @return A specific {@link net.dv8tion.jda.core.requests.restaction.ChannelAction ChannelAction}
   *     &lt;br&gt;
   *     This action allows to set fields for the new VoiceChannel before creating it
   */
  public ChannelAction createVoiceChannel(String name) {
<span class="nc" id="L1793">    checkAvailable();</span>
<span class="nc" id="L1794">    checkPermission(Permission.MANAGE_CHANNEL);</span>
<span class="nc" id="L1795">    Checks.notBlank(name, &quot;Name&quot;);</span>
<span class="nc" id="L1796">    name = name.trim();</span>

<span class="nc" id="L1798">    Checks.check(</span>
<span class="nc bnc" id="L1799" title="All 4 branches missed.">        name.length() &gt;= 2 &amp;&amp; name.length() &lt;= 100,</span>
        &quot;Provided name must be 2 - 100 characters in length&quot;);

<span class="nc" id="L1802">    Route.CompiledRoute route = Route.Guilds.CREATE_CHANNEL.compile(guild.getId());</span>
<span class="nc" id="L1803">    return new ChannelAction(route, name, guild, ChannelType.VOICE);</span>
  }

  /**
   * Creates a new {@link net.dv8tion.jda.core.entities.Category Category} in this Guild. For this
   * to be successful, the logged in account has to have the {@link
   * net.dv8tion.jda.core.Permission#MANAGE_CHANNEL MANAGE_CHANNEL} Permission.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The channel could not be created due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param name The name of the Category to create
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the logged in
   *     account does not have the {@link net.dv8tion.jda.core.Permission#MANAGE_CHANNEL} permission
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @throws IllegalArgumentException If the provided name is {@code null} or less than 2 characters
   *     or greater than 100 characters in length
   * @return A specific {@link net.dv8tion.jda.core.requests.restaction.ChannelAction ChannelAction}
   *     &lt;br&gt;
   *     This action allows to set fields for the new Category before creating it
   */
  public ChannelAction createCategory(String name) {
<span class="nc" id="L1834">    checkAvailable();</span>
<span class="nc" id="L1835">    checkPermission(Permission.MANAGE_CHANNEL);</span>
<span class="nc" id="L1836">    Checks.notBlank(name, &quot;Name&quot;);</span>
<span class="nc" id="L1837">    name = name.trim();</span>

<span class="nc" id="L1839">    Checks.check(</span>
<span class="nc bnc" id="L1840" title="All 4 branches missed.">        name.length() &gt;= 2 &amp;&amp; name.length() &lt;= 100,</span>
        &quot;Provided name must be 2 - 100 characters in length&quot;);

<span class="nc" id="L1843">    Route.CompiledRoute route = Route.Guilds.CREATE_CHANNEL.compile(guild.getId());</span>
<span class="nc" id="L1844">    return new ChannelAction(route, name, guild, ChannelType.CATEGORY);</span>
  }

  /**
   * Creates a copy of the specified {@link net.dv8tion.jda.core.entities.Channel Channel} in this
   * {@link net.dv8tion.jda.core.entities.Guild Guild}. &lt;br&gt;
   * The provided channel need not be in the same Guild for this to work!
   *
   * &lt;p&gt;This copies the following elements:
   *
   * &lt;ol&gt;
   *   &lt;li&gt;Name
   *   &lt;li&gt;Parent Category (if present)
   *   &lt;li&gt;Voice Elements (Bitrate, Userlimit)
   *   &lt;li&gt;Text Elements (Topic, NSFW)
   *   &lt;li&gt;All permission overrides for Members/Roles
   * &lt;/ol&gt;
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The channel could not be created due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param channel The {@link net.dv8tion.jda.core.entities.Channel Channel} to use for the copy
   *     template
   * @throws java.lang.IllegalArgumentException If the provided channel is {@code null}
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the currently logged
   *     in account does not have the {@link net.dv8tion.jda.core.Permission#MANAGE_CHANNEL
   *     MANAGE_CHANNEL} Permission
   * @return A specific {@link net.dv8tion.jda.core.requests.restaction.ChannelAction ChannelAction}
   *     &lt;br&gt;
   *     This action allows to set fields for the new Channel before creating it!
   * @since 3.1
   * @see #createTextChannel(String)
   * @see #createVoiceChannel(String)
   * @see net.dv8tion.jda.core.requests.restaction.ChannelAction ChannelAction
   */
  public ChannelAction createCopyOfChannel(Channel channel) {
<span class="nc" id="L1888">    Checks.notNull(channel, &quot;Channel&quot;);</span>
<span class="nc" id="L1889">    return channel.createCopy(guild);</span>
  }

  /**
   * Creates a new {@link net.dv8tion.jda.core.entities.Role Role} in this Guild. &lt;br&gt;
   * It will be placed at the bottom (just over the Public Role) to avoid permission hierarchy
   * conflicts. &lt;br&gt;
   * For this to be successful, the logged in account has to have the {@link
   * net.dv8tion.jda.core.Permission#MANAGE_ROLES MANAGE_ROLES} Permission
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The role could not be created due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MAX_ROLES_PER_GUILD
   *       MAX_ROLES_PER_GUILD} &lt;br&gt;
   *       There are too many roles in this Guild
   * &lt;/ul&gt;
   *
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the logged in
   *     account does not have the {@link net.dv8tion.jda.core.Permission#MANAGE_ROLES} Permission
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @return {@link net.dv8tion.jda.core.requests.restaction.RoleAction RoleAction} &lt;br&gt;
   *     Creates a new role with previously selected field values
   */
  public RoleAction createRole() {
<span class="nc" id="L1921">    checkAvailable();</span>
<span class="nc" id="L1922">    checkPermission(Permission.MANAGE_ROLES);</span>

<span class="nc" id="L1924">    Route.CompiledRoute route = Route.Roles.CREATE_ROLE.compile(guild.getId());</span>
<span class="nc" id="L1925">    return new RoleAction(route, guild);</span>
  }

  /**
   * Creates a new {@link net.dv8tion.jda.core.entities.Role Role} in this {@link
   * net.dv8tion.jda.core.entities.Guild Guild} with the same settings as the given {@link
   * net.dv8tion.jda.core.entities.Role Role}. &lt;br&gt;
   * The position of the specified Role does not matter in this case!
   *
   * &lt;p&gt;It will be placed at the bottom (just over the Public Role) to avoid permission hierarchy
   * conflicts. &lt;br&gt;
   * For this to be successful, the logged in account has to have the {@link
   * net.dv8tion.jda.core.Permission#MANAGE_ROLES MANAGE_ROLES} Permission and all {@link
   * net.dv8tion.jda.core.Permission Permissions} the given {@link
   * net.dv8tion.jda.core.entities.Role Role} has.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The role could not be created due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MAX_ROLES_PER_GUILD
   *       MAX_ROLES_PER_GUILD} &lt;br&gt;
   *       There are too many roles in this Guild
   * &lt;/ul&gt;
   *
   * @param role The {@link net.dv8tion.jda.core.entities.Role Role} that should be copied
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the logged in
   *     account does not have the {@link net.dv8tion.jda.core.Permission#MANAGE_ROLES} Permission
   *     and every Permission the provided Role has
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @throws java.lang.IllegalArgumentException If the specified role is {@code null}
   * @return {@link net.dv8tion.jda.core.requests.restaction.RoleAction RoleAction} &lt;br&gt;
   *     RoleAction with already copied values from the specified {@link
   *     net.dv8tion.jda.core.entities.Role Role}
   */
  public RoleAction createCopyOfRole(Role role) {
<span class="nc" id="L1967">    Checks.notNull(role, &quot;Role&quot;);</span>
<span class="nc" id="L1968">    return role.createCopy(guild);</span>
  }

  /**
   * Creates a new {@link net.dv8tion.jda.core.entities.Emote Emote} in this Guild. &lt;br&gt;
   * If one or more Roles are specified the new Emote will only be available to Members with any of
   * the specified Roles (see {@link Member#canInteract(Emote)}) &lt;br&gt;
   * For this to be successful, the logged in account has to have the {@link
   * net.dv8tion.jda.core.Permission#MANAGE_EMOTES MANAGE_EMOTES} Permission.
   *
   * &lt;p&gt;&lt;b&gt;&lt;u&gt;Unicode emojis are not included as {@link net.dv8tion.jda.core.entities.Emote
   * Emote}!&lt;/u&gt;&lt;/b&gt;
   *
   * &lt;p&gt;Note that a guild is limited to 50 normal and 50 animated emotes by default. Some guilds are
   * able to add additional emotes beyond this limitation due to the {@code MORE_EMOJI} feature (see
   * {@link net.dv8tion.jda.core.entities.Guild#getFeatures() Guild.getFeatures()}). &lt;br&gt;
   * Due to simplicity we do not check for these limits.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} caused by the
   * returned {@link net.dv8tion.jda.core.requests.RestAction RestAction} include the following:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_PERMISSIONS
   *       MISSING_PERMISSIONS} &lt;br&gt;
   *       The emote could not be created due to a permission discrepancy
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       We were removed from the Guild before finishing the task
   * &lt;/ul&gt;
   *
   * @param name The name for the new Emote
   * @param icon The {@link net.dv8tion.jda.core.entities.Icon} for the new Emote
   * @param roles The {@link net.dv8tion.jda.core.entities.Role Roles} the new Emote should be
   *     restricted to &lt;br&gt;
   *     If no roles are provided the Emote will be available to all Members of this Guild
   * @throws net.dv8tion.jda.core.exceptions.InsufficientPermissionException If the logged in
   *     account does not have the {@link net.dv8tion.jda.core.Permission#MANAGE_EMOTES
   *     MANAGE_EMOTES} Permission
   * @throws net.dv8tion.jda.core.exceptions.GuildUnavailableException If the guild is temporarily
   *     not {@link net.dv8tion.jda.core.entities.Guild#isAvailable() available}
   * @return {@link net.dv8tion.jda.core.requests.restaction.AuditableRestAction
   *     AuditableRestAction} - Type: {@link net.dv8tion.jda.core.entities.Emote Emote}
   */
  public AuditableRestAction&lt;Emote&gt; createEmote(String name, Icon icon, Role... roles) {
<span class="nc" id="L2011">    checkAvailable();</span>
<span class="nc" id="L2012">    checkPermission(Permission.MANAGE_EMOTES);</span>
<span class="nc" id="L2013">    Checks.notBlank(name, &quot;Emote name&quot;);</span>
<span class="nc" id="L2014">    Checks.notNull(icon, &quot;Emote icon&quot;);</span>
<span class="nc" id="L2015">    Checks.notNull(roles, &quot;Roles&quot;);</span>

<span class="nc" id="L2017">    JSONObject body = new JSONObject();</span>
<span class="nc" id="L2018">    body.put(&quot;name&quot;, name);</span>
<span class="nc" id="L2019">    body.put(&quot;image&quot;, icon.getEncoding());</span>
<span class="nc bnc" id="L2020" title="All 2 branches missed.">    if (roles.length</span>
        &gt; 0) // making sure none of the provided roles are null before mapping them to the snowflake
      // id
<span class="nc" id="L2023">      body.put(</span>
          &quot;roles&quot;,
<span class="nc" id="L2025">          Stream.of(roles)</span>
<span class="nc" id="L2026">              .filter(Objects::nonNull)</span>
<span class="nc" id="L2027">              .map(ISnowflake::getId)</span>
<span class="nc" id="L2028">              .collect(Collectors.toSet()));</span>

<span class="nc" id="L2030">    Route.CompiledRoute route = Route.Emotes.CREATE_EMOTE.compile(guild.getId());</span>
<span class="nc" id="L2031">    return new AuditableRestAction&lt;Emote&gt;(getJDA(), route, body) {</span>
      @Override
      protected void handleResponse(Response response, Request&lt;Emote&gt; request) {
<span class="nc bnc" id="L2034" title="All 2 branches missed.">        if (!response.isOk()) {</span>
<span class="nc" id="L2035">          request.onFailure(response);</span>
<span class="nc" id="L2036">          return;</span>
        }
<span class="nc" id="L2038">        JSONObject obj = response.getObject();</span>
<span class="nc" id="L2039">        final long id = obj.getLong(&quot;id&quot;);</span>
<span class="nc" id="L2040">        final String name = obj.optString(&quot;name&quot;, null);</span>
<span class="nc" id="L2041">        final boolean managed = Helpers.optBoolean(obj, &quot;managed&quot;);</span>
<span class="nc" id="L2042">        final boolean animated = obj.optBoolean(&quot;animated&quot;);</span>
<span class="nc" id="L2043">        EmoteImpl emote =</span>
<span class="nc" id="L2044">            new EmoteImpl(id, guild).setName(name).setAnimated(animated).setManaged(managed);</span>

<span class="nc" id="L2046">        JSONArray rolesArr = obj.optJSONArray(&quot;roles&quot;);</span>
<span class="nc bnc" id="L2047" title="All 2 branches missed.">        if (rolesArr != null) {</span>
<span class="nc" id="L2048">          Set&lt;Role&gt; roleSet = emote.getRoleSet();</span>
<span class="nc bnc" id="L2049" title="All 2 branches missed.">          for (int i = 0; i &lt; rolesArr.length(); i++)</span>
<span class="nc" id="L2050">            roleSet.add(guild.getRoleById(rolesArr.getString(i)));</span>
        }
<span class="nc" id="L2052">        request.onSuccess(emote);</span>
<span class="nc" id="L2053">      }</span>
    };
  }

  /**
   * Modifies the positional order of {@link net.dv8tion.jda.core.entities.Guild#getCategories()
   * Guild.getCategories()} using a specific {@link net.dv8tion.jda.core.requests.RestAction
   * RestAction} extension to allow moving Channels {@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveUp(int) up}/{@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveDown(int) down} or {@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveTo(int) to} a specific position.
   * &lt;br&gt;
   * This uses &lt;b&gt;ascending&lt;/b&gt; order with a 0 based index.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} include:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_CHANNEL UNNKOWN_CHANNEL} &lt;br&gt;
   *       One of the channels has been deleted before the completion of the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       The currently logged in account was removed from the Guild
   * &lt;/ul&gt;
   *
   * @return {@link net.dv8tion.jda.core.requests.restaction.order.ChannelOrderAction
   *     ChannelOrderAction} - Type: {@link net.dv8tion.jda.core.entities.Category Category}
   */
  public ChannelOrderAction&lt;Category&gt; modifyCategoryPositions() {
<span class="nc" id="L2080">    return new ChannelOrderAction&lt;&gt;(guild, ChannelType.CATEGORY);</span>
  }

  /**
   * Modifies the positional order of {@link net.dv8tion.jda.core.entities.Guild#getTextChannels()
   * Guild.getTextChannels()} using a specific {@link net.dv8tion.jda.core.requests.RestAction
   * RestAction} extension to allow moving Channels {@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveUp(int) up}/{@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveDown(int) down} or {@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveTo(int) to} a specific position.
   * &lt;br&gt;
   * This uses &lt;b&gt;ascending&lt;/b&gt; order with a 0 based index.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} include:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_CHANNEL UNNKOWN_CHANNEL} &lt;br&gt;
   *       One of the channels has been deleted before the completion of the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       The currently logged in account was removed from the Guild
   * &lt;/ul&gt;
   *
   * @return {@link net.dv8tion.jda.core.requests.restaction.order.ChannelOrderAction
   *     ChannelOrderAction} - Type: {@link net.dv8tion.jda.core.entities.TextChannel TextChannel}
   */
  public ChannelOrderAction&lt;TextChannel&gt; modifyTextChannelPositions() {
<span class="nc" id="L2106">    return new ChannelOrderAction&lt;&gt;(guild, ChannelType.TEXT);</span>
  }

  /**
   * Modifies the positional order of {@link net.dv8tion.jda.core.entities.Guild#getVoiceChannels()
   * Guild.getVoiceChannels()} using a specific {@link net.dv8tion.jda.core.requests.RestAction
   * RestAction} extension to allow moving Channels {@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveUp(int) up}/{@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveDown(int) down} or {@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveTo(int) to} a specific position.
   * &lt;br&gt;
   * This uses &lt;b&gt;ascending&lt;/b&gt; order with a 0 based index.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} include:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_CHANNEL UNNKOWN_CHANNEL} &lt;br&gt;
   *       One of the channels has been deleted before the completion of the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       The currently logged in account was removed from the Guild
   * &lt;/ul&gt;
   *
   * @return {@link net.dv8tion.jda.core.requests.restaction.order.ChannelOrderAction
   *     ChannelOrderAction} - Type: {@link net.dv8tion.jda.core.entities.VoiceChannel VoiceChannel}
   */
  public ChannelOrderAction&lt;VoiceChannel&gt; modifyVoiceChannelPositions() {
<span class="nc" id="L2132">    return new ChannelOrderAction&lt;&gt;(guild, ChannelType.VOICE);</span>
  }

  /**
   * Modifies the positional order of {@link
   * net.dv8tion.jda.core.entities.Category#getTextChannels() Category#getTextChannels()} using an
   * extension of {@link net.dv8tion.jda.core.requests.restaction.order.ChannelOrderAction
   * ChannelOrderAction} specialized for ordering the nested {@link
   * net.dv8tion.jda.core.entities.TextChannel TextChannels} of this {@link
   * net.dv8tion.jda.core.entities.Category Category}. &lt;br&gt;
   * Like {@code ChannelOrderAction}, the returned {@link
   * net.dv8tion.jda.core.requests.restaction.order.CategoryOrderAction CategoryOrderAction} can be
   * used to move TextChannels {@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveUp(int) up}, {@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveDown(int) down}, or {@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveTo(int) to} a specific position.
   * &lt;br&gt;
   * This uses &lt;b&gt;ascending&lt;/b&gt; order with a 0 based index.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} include:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_CHANNEL UNNKOWN_CHANNEL} &lt;br&gt;
   *       One of the channels has been deleted before the completion of the task.
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       The currently logged in account was removed from the Guild.
   * &lt;/ul&gt;
   *
   * @param category The {@link net.dv8tion.jda.core.entities.Category Category} to order {@link
   *     net.dv8tion.jda.core.entities.TextChannel TextChannels} from.
   * @return {@link net.dv8tion.jda.core.requests.restaction.order.CategoryOrderAction
   *     CategoryOrderAction} - Type: {@link net.dv8tion.jda.core.entities.TextChannel TextChannel}
   */
  public CategoryOrderAction&lt;TextChannel&gt; modifyTextChannelPositions(Category category) {
<span class="nc" id="L2166">    Checks.notNull(category, &quot;Category&quot;);</span>
<span class="nc" id="L2167">    checkGuild(category.getGuild(), &quot;Category&quot;);</span>
<span class="nc" id="L2168">    return new CategoryOrderAction&lt;&gt;(category, ChannelType.TEXT);</span>
  }

  /**
   * Modifies the positional order of {@link
   * net.dv8tion.jda.core.entities.Category#getVoiceChannels() Category#getVoiceChannels()} using an
   * extension of {@link net.dv8tion.jda.core.requests.restaction.order.ChannelOrderAction
   * ChannelOrderAction} specialized for ordering the nested {@link
   * net.dv8tion.jda.core.entities.VoiceChannel VoiceChannels} of this {@link
   * net.dv8tion.jda.core.entities.Category Category}. &lt;br&gt;
   * Like {@code ChannelOrderAction}, the returned {@link
   * net.dv8tion.jda.core.requests.restaction.order.CategoryOrderAction CategoryOrderAction} can be
   * used to move VoiceChannels {@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveUp(int) up}, {@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveDown(int) down}, or {@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveTo(int) to} a specific position.
   * &lt;br&gt;
   * This uses &lt;b&gt;ascending&lt;/b&gt; order with a 0 based index.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} include:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_CHANNEL UNNKOWN_CHANNEL} &lt;br&gt;
   *       One of the channels has been deleted before the completion of the task.
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       The currently logged in account was removed from the Guild.
   * &lt;/ul&gt;
   *
   * @param category The {@link net.dv8tion.jda.core.entities.Category Category} to order {@link
   *     net.dv8tion.jda.core.entities.VoiceChannel VoiceChannels} from.
   * @return {@link net.dv8tion.jda.core.requests.restaction.order.CategoryOrderAction
   *     CategoryOrderAction} - Type: {@link net.dv8tion.jda.core.entities.VoiceChannel
   *     VoiceChannels}
   */
  public CategoryOrderAction&lt;VoiceChannel&gt; modifyVoiceChannelPositions(Category category) {
<span class="nc" id="L2203">    Checks.notNull(category, &quot;Category&quot;);</span>
<span class="nc" id="L2204">    checkGuild(category.getGuild(), &quot;Category&quot;);</span>
<span class="nc" id="L2205">    return new CategoryOrderAction&lt;&gt;(category, ChannelType.VOICE);</span>
  }

  /**
   * Modifies the positional order of {@link net.dv8tion.jda.core.entities.Guild#getRoles()
   * Guild.getRoles()} using a specific {@link net.dv8tion.jda.core.requests.RestAction RestAction}
   * extension to allow moving Roles {@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveUp(int) up}/{@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveDown(int) down} or {@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveTo(int) to} a specific position.
   *
   * &lt;p&gt;This uses the ordering defined by Discord, which is &lt;b&gt;descending&lt;/b&gt;! &lt;br&gt;
   * This means the highest role appears at index {@code 0} and the lower role at index {@code n -
   * 1}. &lt;br&gt;
   * Providing {@code false} to {@link #modifyRolePositions(boolean)} will result in the ordering
   * being in ascending order, with the lower role at index {@code 0} and the highest at index
   * {@code n - 1}. &lt;br&gt;
   * As a note: {@link net.dv8tion.jda.core.entities.Member#getRoles() Member.getRoles()} and {@link
   * net.dv8tion.jda.core.entities.Guild#getRoles() Guild.getRoles()} are both in descending order.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} include:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_ROLE UNKNOWN_ROLE} &lt;br&gt;
   *       One of the roles was deleted before the completion of the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       The currently logged in account was removed from the Guild
   * &lt;/ul&gt;
   *
   * @return {@link net.dv8tion.jda.core.requests.restaction.order.RoleOrderAction RoleOrderAction}
   */
  public RoleOrderAction modifyRolePositions() {
<span class="nc" id="L2237">    return modifyRolePositions(true);</span>
  }

  /**
   * Modifies the positional order of {@link net.dv8tion.jda.core.entities.Guild#getRoles()
   * Guild.getRoles()} using a specific {@link net.dv8tion.jda.core.requests.RestAction RestAction}
   * extension to allow moving Roles {@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveUp(int) up}/{@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveDown(int) down} or {@link
   * net.dv8tion.jda.core.requests.restaction.order.OrderAction#moveTo(int) to} a specific position.
   *
   * &lt;p&gt;Possible {@link net.dv8tion.jda.core.requests.ErrorResponse ErrorResponses} include:
   *
   * &lt;ul&gt;
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#UNKNOWN_ROLE UNKNOWN_ROLE} &lt;br&gt;
   *       One of the roles was deleted before the completion of the task
   *   &lt;li&gt;{@link net.dv8tion.jda.core.requests.ErrorResponse#MISSING_ACCESS MISSING_ACCESS} &lt;br&gt;
   *       The currently logged in account was removed from the Guild
   * &lt;/ul&gt;
   *
   * @param useDiscordOrder Defines the ordering of the OrderAction. If {@code true}, the
   *     OrderAction will be in the ordering defined by Discord for roles, which is Descending. This
   *     means that the highest role appears at index {@code 0} and the lowest role at index {@code
   *     n - 1}. Providing {@code false} will result in the ordering being in ascending order, with
   *     the lower role at index {@code 0} and the highest at index {@code n - 1}. &lt;br&gt;
   *     As a note: {@link net.dv8tion.jda.core.entities.Member#getRoles() Member.getRoles()} and
   *     {@link net.dv8tion.jda.core.entities.Guild#getRoles() Guild.getRoles()} are both in
   *     descending order.
   * @return {@link net.dv8tion.jda.core.requests.restaction.order.RoleOrderAction RoleOrderAction}
   */
  public RoleOrderAction modifyRolePositions(boolean useDiscordOrder) {
<span class="nc" id="L2268">    return new RoleOrderAction(guild, useDiscordOrder);</span>
  }

  protected void checkAvailable() {
<span class="nc bnc" id="L2272" title="All 2 branches missed.">    if (!guild.isAvailable()) throw new GuildUnavailableException();</span>
<span class="nc" id="L2273">  }</span>

  protected void checkGuild(Guild providedGuild, String comment) {
<span class="nc bnc" id="L2276" title="All 2 branches missed.">    if (!guild.equals(providedGuild))</span>
<span class="nc" id="L2277">      throw new IllegalArgumentException(&quot;Provided &quot; + comment + &quot; is not part of this Guild!&quot;);</span>
<span class="nc" id="L2278">  }</span>

  protected void checkPermission(Permission perm) {
<span class="nc bnc" id="L2281" title="All 2 branches missed.">    if (!guild.getSelfMember().hasPermission(perm)) throw new InsufficientPermissionException(perm);</span>
<span class="nc" id="L2282">  }</span>

  protected void checkPosition(Member member) {
<span class="nc bnc" id="L2285" title="All 2 branches missed.">    if (!guild.getSelfMember().canInteract(member))</span>
<span class="nc" id="L2286">      throw new HierarchyException(</span>
          &quot;Can't modify a member with higher or equal highest role than yourself!&quot;);
<span class="nc" id="L2288">  }</span>

  protected void checkPosition(Role role) {
<span class="nc bnc" id="L2291" title="All 2 branches missed.">    if (!guild.getSelfMember().canInteract(role))</span>
<span class="nc" id="L2292">      throw new HierarchyException(</span>
          &quot;Can't modify a role with higher or equal highest role than yourself! Role: &quot;
<span class="nc" id="L2294">              + role.toString());</span>
<span class="nc" id="L2295">  }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.0.201801022044</span></div></body></html>